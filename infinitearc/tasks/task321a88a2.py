# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: 321a88a2
Difficulty: easy

=== Tags ===
- Copy paste patch
- Count shapes
- Project shadow

=== Description ===
The input grid contains one or more connected shapes, defined as groups of non-
zero values connected edge-wise (not diagonally). The output grid is created by
copying each shape one cell to the right (preserving color) and overlaying it
onto the original input grid. Cells that are part of the original shape or the
copied shadow retain their color. Grid boundaries are respected; shadows
extending beyond the grid's right edge are truncated. The number of shapes
(counted as distinct connected components) determines the number of copies
applied (one copy per shape), but the transformation direction (right) remains
fixed regardless of the count.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import random_color

def generate():
    width = random.randint(5, 30)
    height = random.randint(5, 30)
    input_grid = [[0] * width for _ in range(height)]
    color1 = random_color(exclude=[0])
    color2 = random_color(exclude=[0, color1])
    
    # Top-left 2x2
    for r in range(2):
        for c in range(2):
            input_grid[r][c] = color1
    
    # Bottom-right 2x2
    for r in range(height-2, height):
        for c in range(width-2, width):
            input_grid[r][c] = color2
    
    output_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 0:
                output_grid[r][c] = input_grid[r][c]
                if c + 1 < width:
                    output_grid[r][c+1] = input_grid[r][c]
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    width = len(input_grid[0])
    height = len(input_grid)
    output = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 0:
                output[r][c] = input_grid[r][c]
            elif c > 0 and input_grid[r][c-1] != 0:
                output[r][c] = input_grid[r][c-1]
    return output
