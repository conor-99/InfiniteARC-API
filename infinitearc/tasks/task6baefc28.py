# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-02
# ---------------------------------------------------------------

"""
Task ID: 6baefc28
Difficulty: easy

=== Tags ===
- Image resizing
- Remove noise
- Draw line from border

=== Description ===
The task involves input grids containing a main shape composed of connected non-
zero colors and isolated noise pixels (single non-zero pixels surrounded by
zeros in all four adjacent directions). The output grid is generated by first
removing all noise pixels (setting them to zero), then drawing a vertical line
from the top border to the bottom border along the middle column of the grid
using a fixed color (e.g., color 1). This transformation is visually consistent,
relying solely on adjacency checks for noise removal and a fixed positional line
drawing, making it discoverable through simple pattern recognition.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import continuous_creature

def generate():
    w = random.randint(5, 20)
    h = random.randint(5, 20)
    grid = [[0] * w for _ in range(h)]
    
    main_size = random.randint(10, 20)
    pixels = continuous_creature(main_size, w, h)
    for r, c in pixels:
        grid[r][c] = 2
    
    noise_count = random.randint(2, 5)
    for _ in range(noise_count):
        r = random.randint(1, h-2)
        c = random.randint(1, w-2)
        if grid[r][c] != 0:
            continue
        if grid[r-1][c] != 0 or grid[r+1][c] != 0 or grid[r][c-1] != 0 or grid[r][c+1] != 0:
            continue
        grid[r][c] = 3
    
    output = [row[:] for row in grid]
    for r in range(h):
        for c in range(w):
            if output[r][c] == 3:
                output[r][c] = 0
    mid_col = (w - 1) // 2
    for r in range(h):
        output[r][mid_col] = 1
    
    return {
        "input": grid,
        "output": output
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if not input_grid or not input_grid[0]:
        return input_grid
    h = len(input_grid)
    w = len(input_grid[0])
    output = [list(row) for row in input_grid]
    
    for r in range(1, h-1):
        for c in range(1, w-1):
            if output[r][c] != 0:
                if output[r-1][c] == 0 and output[r+1][c] == 0 and output[r][c-1] == 0 and output[r][c+1] == 0:
                    output[r][c] = 0
    
    mid_col = (w - 1) // 2
    for r in range(h):
        output[r][mid_col] = 1
    
    return output
