# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: 155f39d3
Difficulty: medium

=== Tags ===
- Adapt image to grid
- Normalize orientation
- Associate images to images
- Pattern reflection

=== Description ===
The task involves transforming an input grid into an output grid through two
consistent steps. First, the grid's orientation is normalized by rotating it 90
degrees clockwise if its height exceeds its width, ensuring the grid's width is
at least as large as its height. This step adapts the input to a standard
horizontal orientation. Second, the normalized grid is reflected vertically
(left-right mirroring) to produce the output grid. This process associates the
input image with its vertically reflected counterpart while maintaining
consistent orientation alignment. The transformation requires abstract reasoning
to identify the need for rotation based on grid dimensions and apply the
reflection pattern uniformly.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid

def generate():
    while True:
        H = random.randint(1, 30)
        W = random.randint(1, 30)
        input_grid = grid(W, H, 0)
        for r in range(H):
            for c in range(W):
                input_grid[r][c] = random.randint(0, 9)
        if H > W:
            normalized = [list(reversed(row)) for row in zip(*input_grid)]
        else:
            normalized = input_grid
        output_grid = [row[::-1] for row in normalized]
        if input_grid != output_grid:
            return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    H = len(input_grid)
    W = len(input_grid[0])
    if H > W:
        rotated = [list(reversed(row)) for row in zip(*input_grid)]
    else:
        rotated = input_grid
    return [row[::-1] for row in rotated]
