# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-09
# ---------------------------------------------------------------

"""
Task ID: 2f2cefa9
Difficulty: medium

=== Tags ===
- Take maximum
- Fractal repetition

=== Description ===
The task involves transforming an input grid into an output grid by applying a
max-pooling operation at a 2x2 scale. Each 2x2 block in the input is processed
to determine the maximum color value (represented by the highest number between
0 and 9), and these maxima are arranged into a new grid. The output grid's
dimensions are exactly half of the input grid's width and height, resulting in a
downscaled representation that retains the dominant color features of the input.
This transformation creates a visual "fractal repetition" where the output
grid's pattern is a coarsened, yet structurally similar, version of the input,
reflecting the hierarchical nature of fractal patterns through the consistent
application of the maximum operation across scales. The solver must recognize
that the output grid is formed by grouping input pixels into 2x2 blocks and
replacing each block with its maximum value, producing a simplified, scaled-down
version that preserves the most prominent visual elements of the input.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.choice(range(2, 31, 2))
    height = random.choice(range(2, 31, 2))
    input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    output_grid = [[0] * (width // 2) for _ in range(height // 2)]
    for i in range(0, height, 2):
        for j in range(0, width, 2):
            block = [
                input_grid[i][j],
                input_grid[i][j+1],
                input_grid[i+1][j],
                input_grid[i+1][j+1]
            ]
            output_grid[i//2][j//2] = max(block)
    return {'input': input_grid, 'output': output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    output_grid = [[0] * (width // 2) for _ in range(height // 2)]
    for i in range(0, height, 2):
        for j in range(0, width, 2):
            block = [
                input_grid[i][j],
                input_grid[i][j+1],
                input_grid[i+1][j],
                input_grid[i+1][j+1]
            ]
            output_grid[i//2][j//2] = max(block)
    return output_grid
