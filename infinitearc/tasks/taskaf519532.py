# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-02
# ---------------------------------------------------------------

"""
Task ID: af519532
Difficulty: easy

=== Tags ===
- Detect grid
- Pattern coloring
- Fill single gap
- Count patterns

=== Description ===
The task presents a grid where a single cell (marked as 0) is missing within a
consistent repeating color pattern. The pattern alternates colors in a
predictable sequence, such as checkerboard, horizontal stripes, or vertical
stripes. The output grid fills this missing cell with the color that continues
the pattern based on the surrounding cells. For example, in a checkerboard
pattern with colors alternating between 1 and 2, a missing cell at a position
where the pattern requires color 2 would be filled accordingly. The key is that
the pattern is uniform and the missing cell is the only one not following the
pattern, making it straightforward to deduce the correct color for the gap.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid, random_color

def generate():
    width = random.randint(2, 30)
    height = random.randint(2, 30)
    c1 = random_color(exclude=[0])
    c2 = random_color(exclude=[0, c1])
    pattern = grid(width, height)
    for i in range(height):
        for j in range(width):
            if (i + j) % 2 == 0:
                pattern[i][j] = c1
            else:
                pattern[i][j] = c2
    i, j = random.randint(0, height-1), random.randint(0, width-1)
    input_grid = [row[:] for row in pattern]
    input_grid[i][j] = 0
    output_grid = pattern
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    zero_i, zero_j = None, None
    for i in range(len(input_grid)):
        for j in range(len(input_grid[0])):
            if input_grid[i][j] == 0:
                zero_i, zero_j = i, j
    ref_color = None
    ref_parity = None
    for i in range(len(input_grid)):
        for j in range(len(input_grid[0])):
            if input_grid[i][j] != 0:
                ref_color = input_grid[i][j]
                ref_parity = (i + j) % 2
                break
        if ref_color is not None:
            break
    colors = set()
    for i in range(len(input_grid)):
        for j in range(len(input_grid[0])):
            if input_grid[i][j] != 0:
                colors.add(input_grid[i][j])
    colors.discard(ref_color)
    other_color = next(iter(colors))
    zero_parity = (zero_i + zero_j) % 2
    fill_color = ref_color if zero_parity == ref_parity else other_color
    output = [list(row) for row in input_grid]
    output[zero_i][zero_j] = fill_color
    return output
