# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: d778136f
Difficulty: easy

=== Tags ===
- Image expansion
- Find the two identical shapes
- Associate images to bools

=== Description ===
The input grid contains two identical shapes (same color and spatial
arrangement) that are distinct from the background (color 0). The output grid is
created by expanding each cell of both shapes into a 2x2 block of color 1, while
all other cells are set to 0. The two shapes must be identical in both color and
pattern, and the output grid is exactly twice the width and height of the input
grid. This transformation visually associates the presence of the two identical
shapes with a binary representation (1s for shape areas, 0s for background),
fulfilling the "associate images to bools" requirement.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import continuous_creature, grid, random_color

def generate():
    width = random.randint(5, 15)
    height = random.randint(5, 15)
    color = random_color(exclude=[0])
    shape_size = random.randint(2, 5)
    pixels = continuous_creature(shape_size, width=5, height=5)
    
    min_r = min(r for r, c in pixels)
    max_r = max(r for r, c in pixels)
    min_c = min(c for r, c in pixels)
    max_c = max(c for r, c in pixels)
    
    dx = max(3, max_r - min_r + 2)
    dy = max(3, max_c - min_c + 2)
    
    translated_pixels = [(r + dx, c + dy) for r, c in pixels]
    
    if any(r >= height or c >= width for r, c in translated_pixels):
        dx = width - 1 - max_c
        dy = height - 1 - max_r
        if dx < 0: dx = 0
        if dy < 0: dy = 0
        translated_pixels = [(r + dx, c + dy) for r, c in pixels]
    
    input_grid = grid(width, height, 0)
    for r, c in pixels:
        if 0 <= r < height and 0 <= c < width:
            input_grid[r][c] = color
    for r, c in translated_pixels:
        if 0 <= r < height and 0 <= c < width:
            input_grid[r][c] = color
    
    output_width = width * 2
    output_height = height * 2
    output_grid = grid(output_width, output_height, 0)
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] == color:
                output_grid[2*r][2*c] = 1
                output_grid[2*r][2*c+1] = 1
                output_grid[2*r+1][2*c] = 1
                output_grid[2*r+1][2*c+1] = 1
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

from common import grid

def p(input_grid):
    color = None
    for r in range(len(input_grid)):
        for c in range(len(input_grid[0])):
            if input_grid[r][c] != 0:
                color = input_grid[r][c]
                break
        if color is not None:
            break
    if color is None:
        return grid(len(input_grid[0]) * 2, len(input_grid) * 2, 0)
    height = len(input_grid)
    width = len(input_grid[0])
    output = grid(width * 2, height * 2, 0)
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] == color:
                output[2*r][2*c] = 1
                output[2*r][2*c+1] = 1
                output[2*r+1][2*c] = 1
                output[2*r+1][2*c+1] = 1
    return output
