# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-10
# ---------------------------------------------------------------

"""
Task ID: 2508cdf5
Difficulty: medium

=== Tags ===
- Recoloring

=== Description ===
The task involves transforming an input grid into an output grid by recoloring
cells adjacent to a specific color. Specifically, any cell in the input grid
that has a direct neighbor (up, down, left, or right) with color 5 is recolored
to color 7 in the output grid. All other cells retain their original color. This
rule is applied universally across the grid, ensuring that cells adjacent to 5s
are transformed while preserving all other colors. The input grids are designed
such that at least one 5 has a neighboring cell (ensuring the output differs
from the input), and the transformation relies solely on visual adjacency
relationships rather than numerical properties or pixel-level patterns.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    from common import grid
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    while width == 1 and height == 1:
        width = random.randint(1, 30)
        height = random.randint(1, 30)
    input_grid = grid(width, height, 0)
    input_grid[0][0] = 5
    for r in range(height):
        for c in range(width):
            if r == 0 and c == 0:
                continue
            input_grid[r][c] = random.randint(0, 9)
    output_grid = grid(width, height, 0)
    for r in range(height):
        for c in range(width):
            if (r > 0 and input_grid[r-1][c] == 5) or \
               (r < height - 1 and input_grid[r+1][c] == 5) or \
               (c > 0 and input_grid[r][c-1] == 5) or \
               (c < width - 1 and input_grid[r][c+1] == 5):
                output_grid[r][c] = 7
            else:
                output_grid[r][c] = input_grid[r][c]
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    width = len(input_grid[0])
    height = len(input_grid)
    output_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            if (r > 0 and input_grid[r-1][c] == 5) or \
               (r < height - 1 and input_grid[r+1][c] == 5) or \
               (c > 0 and input_grid[r][c-1] == 5) or \
               (c < width - 1 and input_grid[r][c+1] == 5):
                output_grid[r][c] = 7
            else:
                output_grid[r][c] = input_grid[r][c]
    return output_grid
