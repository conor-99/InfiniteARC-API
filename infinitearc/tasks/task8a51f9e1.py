# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: 8a51f9e1
Difficulty: easy

=== Tags ===
- Snap to grid
- Recolor

=== Description ===
The task involves transforming input grids with scattered colored elements into
output grids where all colored elements are aligned to a grid structure
(snapping to the nearest even row and column indices) and then recolored to a
single consistent color. Specifically, each non-zero pixel in the input is moved
to the nearest position where both row and column indices are even (e.g., (0,0),
(0,2), (2,0), etc.), and all such positions in the output are filled with a
target color (e.g., blue), while all other positions remain background (black).
The transformation is visual, relying solely on positional alignment and color
replacement without numerical computations.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
import common

def generate():
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    input_grid = common.grid(width, height, 0)
    colors = list(range(1, 10))
    for r in range(height):
        for c in range(width):
            if random.random() > 0.5:
                input_grid[r][c] = random.choice(colors)
    has_odd = False
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 0 and (r % 2 != 0 or c % 2 != 0):
                has_odd = True
                break
        if has_odd:
            break
    if not has_odd:
        for r in range(height):
            for c in range(width):
                if r % 2 != 0 or c % 2 != 0:
                    input_grid[r][c] = random.choice(colors)
                    has_odd = True
                    break
            if has_odd:
                break
    if width == 1 and height == 1:
        if input_grid[0][0] == 1:
            input_grid[0][0] = random.choice([2,3,4,5,6,7,8,9])
    output_grid = common.grid(width, height, 0)
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 0:
                new_r = (r // 2) * 2
                new_c = (c // 2) * 2
                if new_r < height and new_c < width:
                    output_grid[new_r][new_c] = 1
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import common
def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0]) if height > 0 else 0
    output_grid = common.grid(width, height, 0)
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 0:
                new_r = (r // 2) * 2
                new_c = (c // 2) * 2
                if new_r < height and new_c < width:
                    output_grid[new_r][new_c] = 1
    return output_grid
