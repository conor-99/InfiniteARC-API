# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-02
# ---------------------------------------------------------------

"""
Task ID: 8639a97b
Difficulty: medium

=== Tags ===
- Count hor lines

=== Description ===
The input grid contains horizontal line segments of non-zero colors (background
is 0). Each segment is a maximal contiguous sequence of the same non-zero color
in a single row. The output grid is identical to the input except that the first
column is replaced with a vertical line of color 1 whose length equals the
number of such horizontal segments in the input. The vertical line starts at the
top of the first column and extends downward for the count, with all remaining
cells in the first column set to background (0). This transformation requires
identifying horizontal runs and visually representing their count through a
vertical line in the first column.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    while True:
        width = random.randint(1, 30)
        height = random.randint(1, 30)
        grid = [[0] * width for _ in range(height)]
        
        r, c = random.randint(0, height-1), random.randint(0, width-1)
        grid[r][c] = random.randint(1, 9)
        
        for _ in range(random.randint(0, 5)):
            r, c = random.randint(0, height-1), random.randint(0, width-1)
            if grid[r][c] == 0:
                grid[r][c] = random.randint(1, 9)
        
        count = 0
        for r in range(height):
            c = 0
            while c < width:
                if grid[r][c] != 0:
                    count += 1
                    while c < width and grid[r][c] != 0:
                        c += 1
                else:
                    c += 1
        
        output = [row[:] for row in grid]
        for r in range(height):
            output[r][0] = 1 if r < count else 0
        
        if grid != output:
            return {
                "input": grid,
                "output": output
            }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    height = len(input_grid)
    width = len(input_grid[0])
    
    count = 0
    for r in range(height):
        c = 0
        while c < width:
            if input_grid[r][c] != 0:
                count += 1
                while c < width and input_grid[r][c] != 0:
                    c += 1
            else:
                c += 1
    
    output = [row[:] for row in input_grid]
    for r in range(height):
        output[r][0] = 1 if r < count else 0
    return output
