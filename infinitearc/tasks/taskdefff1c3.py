# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-08
# ---------------------------------------------------------------

"""
Task ID: defff1c3
Difficulty: easy

=== Tags ===
- Order numbers
- Border detection
- Mirror pad edges

=== Description ===
The task involves detecting the border elements of the input grid (all cells on
the perimeter, including corners), sorting these elements in ascending numerical
order, reversing the sorted list (to mirror the order), and placing the reversed
elements back into the border positions in clockwise order starting from the
top-left corner. The inner elements of the grid (those not on the perimeter)
remain unchanged. For example, in a 3×3 grid, the border elements are collected
clockwise from the top-left, sorted, reversed, and reinserted into the same
border positions. This transformation consistently applies to grids of any size
≥2×2, with the border detection and mirroring of the sorted order forming the
core rule.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def collect_border_values(grid):
    h = len(grid)
    w = len(grid[0])
    border_vals = []
    # Top row
    for c in range(w):
        border_vals.append(grid[0][c])
    # Right edge (excluding top and bottom)
    for r in range(1, h-1):
        border_vals.append(grid[r][w-1])
    # Bottom row (right to left)
    for c in range(w-1, -1, -1):
        border_vals.append(grid[h-1][c])
    # Left edge (excluding top and bottom)
    for r in range(h-2, 0, -1):
        border_vals.append(grid[r][0])
    return border_vals

def generate():
    width = random.randint(2, 30)
    height = random.randint(2, 30)
    input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    border_vals = collect_border_values(input_grid)
    sorted_border = sorted(border_vals)
    new_border = sorted_border[::-1]
    output_grid = [row[:] for row in input_grid]
    idx = 0
    # Top row
    for c in range(width):
        output_grid[0][c] = new_border[idx]
        idx += 1
    # Right edge
    for r in range(1, height-1):
        output_grid[r][width-1] = new_border[idx]
        idx += 1
    # Bottom row
    for c in range(width-1, -1, -1):
        output_grid[height-1][c] = new_border[idx]
        idx += 1
    # Left edge
    for r in range(height-2, 0, -1):
        output_grid[r][0] = new_border[idx]
        idx += 1
    if input_grid == output_grid:
        return generate()
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def collect_border_values(grid):
    h = len(grid)
    w = len(grid[0])
    border_vals = []
    # Top row
    for c in range(w):
        border_vals.append(grid[0][c])
    # Right edge (excluding top and bottom)
    for r in range(1, h-1):
        border_vals.append(grid[r][w-1])
    # Bottom row (right to left)
    for c in range(w-1, -1, -1):
        border_vals.append(grid[h-1][c])
    # Left edge (excluding top and bottom)
    for r in range(h-2, 0, -1):
        border_vals.append(grid[r][0])
    return border_vals

def p(input_grid):
    input_grid = [list(row) for row in input_grid]
    h = len(input_grid)
    w = len(input_grid[0])
    border_vals = collect_border_values(input_grid)
    sorted_border = sorted(border_vals)
    new_border = sorted_border[::-1]
    output_grid = [row[:] for row in input_grid]
    idx = 0
    # Top row
    for c in range(w):
        output_grid[0][c] = new_border[idx]
        idx += 1
    # Right edge
    for r in range(1, h-1):
        output_grid[r][w-1] = new_border[idx]
        idx += 1
    # Bottom row
    for c in range(w-1, -1, -1):
        output_grid[h-1][c] = new_border[idx]
        idx += 1
    # Left edge
    for r in range(h-2, 0, -1):
        output_grid[r][0] = new_border[idx]
        idx += 1
    return output_grid
