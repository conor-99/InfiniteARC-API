# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: a73d50f6
Difficulty: insane

=== Tags ===
- Grid coloring
- Adversarial intruder detection

=== Description ===
Input grids consist of 2D arrays with values between 0 and 9 representing
colors. The output grid is generated by identifying "intruder" cells: those
where the cell's color appears exactly once in its row and exactly once in its
column. For every such intruder cell, the output grid replaces its color with 0,
while all other cells retain their original colors. This requires simultaneously
verifying two independent uniqueness conditions per cell, making the task
exceptionally challenging as intruders are not detectable through single-
dimensional analysis alone. The solution demands combinatorial reasoning across
both row and column constraints, with no visual cues indicating the dual
uniqueness requirement.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    b = random.randint(1, 9)
    t = random.randint(1, 9)
    while t == b:
        t = random.randint(1, 9)
    i = random.randint(0, height-1)
    j = random.randint(0, width-1)
    input_grid = [[b] * width for _ in range(height)]
    input_grid[i][j] = t
    output_grid = [row[:] for row in input_grid]
    output_grid[i][j] = 0
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    output_grid = [list(row) for row in input_grid]
    height = len(input_grid)
    width = len(input_grid[0])
    
    for i in range(height):
        for j in range(width):
            color = input_grid[i][j]
            row_count = sum(1 for c in range(width) if input_grid[i][c] == color)
            if row_count != 1:
                continue
            col_count = sum(1 for r in range(height) if input_grid[r][j] == color)
            if col_count == 1:
                output_grid[i][j] = 0
    return output_grid
