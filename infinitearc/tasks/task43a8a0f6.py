# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-08
# ---------------------------------------------------------------

"""
Task ID: 43a8a0f6
Difficulty: easy

=== Tags ===
- Threshold by area
- Trim trailing background

=== Description ===
The task involves transforming an input grid into an output grid by removing all
background pixels (color 0) from the edges. The background is defined as any
contiguous region of color 0 at the top, bottom, left, or right edges of the
grid. The output grid is the smallest possible subgrid that contains all non-
background pixels (values 1-9), achieved by trimming all leading and trailing
background rows and columns. For example, if the input grid has three leading
rows of 0s and two trailing columns of 0s, the output grid will exclude those
rows and columns, resulting in a grid that tightly encloses the non-background
shape. This transformation depends solely on the spatial arrangement of non-zero
values and does not require numerical thresholds or complex pattern recognition.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid, random_color

def generate():
    content_w = random.randint(2, 10)
    content_h = random.randint(2, 10)
    content = grid(content_w, content_h, 0)
    
    for r in range(content_h):
        for c in range(content_w):
            if random.random() > 0.5:
                content[r][c] = random_color(exclude=[0])
    
    # Ensure no all-zero rows
    for r in range(content_h):
        if all(content[r][c] == 0 for c in range(content_w)):
            content[r][0] = random_color(exclude=[0])
    
    # Ensure no all-zero columns
    for c in range(content_w):
        if all(content[r][c] == 0 for r in range(content_h)):
            content[0][c] = random_color(exclude=[0])
    
    top_pad = random.randint(1, 5)
    bottom_pad = random.randint(1, 5)
    left_pad = random.randint(1, 5)
    right_pad = random.randint(1, 5)
    
    width = content_w + left_pad + right_pad
    height = content_h + top_pad + bottom_pad
    width = min(width, 30)
    height = min(height, 30)
    
    input_grid = grid(width, height, 0)
    for r in range(content_h):
        for c in range(content_w):
            input_grid[top_pad + r][left_pad + c] = content[r][c]
    
    return {"input": input_grid, "output": content}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    if height == 0:
        return []
    width = len(input_grid[0])
    
    min_row = 0
    while min_row < height and all(x == 0 for x in input_grid[min_row]):
        min_row += 1
    
    max_row = height - 1
    while max_row >= 0 and all(x == 0 for x in input_grid[max_row]):
        max_row -= 1
    
    min_col = 0
    while min_col < width and all(input_grid[r][min_col] == 0 for r in range(height)):
        min_col += 1
    
    max_col = width - 1
    while max_col >= 0 and all(input_grid[r][max_col] == 0 for r in range(height)):
        max_col -= 1
    
    output = []
    for r in range(min_row, max_row + 1):
        output.append(input_grid[r][min_col:max_col + 1])
    
    return output
