# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-02
# ---------------------------------------------------------------

"""
Task ID: 417e09f6
Difficulty: insane

=== Tags ===
- Even or odd

=== Description ===
The task involves transforming an input grid into an output grid based on the
parity (even or odd) of the total count of even-numbered cells (values 0, 2, 4,
6, or 8) within the grid. First, the solver must count how many cells in the
input grid contain even values. If this count is even, every even value in the
input is replaced with 1 and every odd value (1, 3, 5, 7, 9) is replaced with 8.
If the count is odd, every even value is replaced with 8 and every odd value is
replaced with 1. This transformation ensures the output grid is always distinct
from the input grid, as the parity-based replacement rules guarantee no cell
retains its original value under all possible input configurations. The solver
must recognize the dependency on the global parity of even cell counts rather
than applying a direct per-cell rule, making the task challenging due to the
need for abstract reasoning about grid-wide properties.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    even_count = sum(1 for row in input_grid for cell in row if cell % 2 == 0)
    if even_count % 2 == 0:
        output_grid = [[1 if cell % 2 == 0 else 8 for cell in row] for row in input_grid]
    else:
        output_grid = [[8 if cell % 2 == 0 else 1 for cell in row] for row in input_grid]
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    even_count = sum(1 for row in input_grid for cell in row if cell % 2 == 0)
    if even_count % 2 == 0:
        return [[1 if cell % 2 == 0 else 8 for cell in row] for row in input_grid]
    else:
        return [[8 if cell % 2 == 0 else 1 for cell in row] for row in input_grid]
