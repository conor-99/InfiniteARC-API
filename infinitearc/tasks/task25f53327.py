# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: 25f53327
Difficulty: medium

=== Tags ===
- Associate images to colors

=== Description ===
The input grid contains various patterns formed by connected cells. The
transformation rule requires identifying all instances of a T-shaped pattern,
defined as a horizontal line of three adjacent cells with a vertical line of two
cells extending downward from the center cell of the horizontal line. In the
output grid, every cell that forms part of such a T-shaped pattern is replaced
with color 5 (represented by the value 5), while all other cells remain
unchanged. The input grid may contain multiple non-overlapping or overlapping
T-shaped patterns, and the output grid consistently applies this transformation
across all valid patterns.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    from common import grid
    width = random.randint(3, 30)
    height = random.randint(2, 30)
    input_grid = grid(width, height, 0)
    r = random.randint(0, height - 2)
    c = random.randint(0, width - 3)
    input_grid[r][c] = 1
    input_grid[r][c+1] = 1
    input_grid[r][c+2] = 1
    input_grid[r+1][c+1] = 1
    output_grid = [row[:] for row in input_grid]
    output_grid[r][c] = 5
    output_grid[r][c+1] = 5
    output_grid[r][c+2] = 5
    output_grid[r+1][c+1] = 5
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    height = len(input_grid)
    width = len(input_grid[0])
    output_grid = [row[:] for row in input_grid]
    for r in range(height - 1):
        for c in range(width - 2):
            if input_grid[r][c] != 0 and input_grid[r][c+1] != 0 and input_grid[r][c+2] != 0 and input_grid[r+1][c+1] != 0:
                output_grid[r][c] = 5
                output_grid[r][c+1] = 5
                output_grid[r][c+2] = 5
                output_grid[r+1][c+1] = 5
    return output_grid
