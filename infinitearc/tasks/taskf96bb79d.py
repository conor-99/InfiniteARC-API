# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-10
# ---------------------------------------------------------------

"""
Task ID: f96bb79d
Difficulty: medium–hard

=== Tags ===
- Coordinate warp
- Follow color path to destination
- Remove border

=== Description ===
Coordinate Warp Path  Input grids feature a uniform background color (0). A path
of connected cells (4-directional adjacency) begins at the top-left corner
(color 1) and follows a repeating sequence of three distinct colors (e.g., 2 → 3
→ 4 → 2 → 3 → 4...), with each subsequent cell in the path containing the next
color in the cycle. The path terminates at a destination cell, which has a
unique color (e.g., 5) not part of the cycle.  Surrounding the destination cell
is a border of four cells (one in each cardinal direction: up, down, left,
right), all colored with a single consistent border color (e.g., 6). This border
forms a cross-shaped frame around the destination.  In the output grid, the path
remains unchanged, the destination cell retains its color, but all border cells
(color 6) are changed to the background color (0). The grid dimensions remain
the same, and no other cells are modified.  To verify, the path must be uniquely
determined by the color cycle, and the border must be a single consistent color
surrounding the destination. The challenge requires recognizing the repeating
color cycle to trace the path, identifying the destination, and removing the
border frame around it without confusion from other color regions.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid

def generate():
    width = random.randint(3, 30)
    height = random.randint(3, 30)
    grid_input = grid(width, height, 0)
    
    x = random.randint(1, height-2)
    y = random.randint(1, width-2)
    
    # Generate path: right then down
    path = []
    for c in range(y+1):
        path.append((0, c))
    for r in range(1, x+1):
        path.append((r, y))
    
    # Assign colors
    grid_input[0][0] = 1
    for idx in range(1, len(path)-1):
        color = 2 + (idx-1) % 3
        r, c = path[idx]
        grid_input[r][c] = color
    grid_input[x][y] = 5
    
    # Set border
    for dr, dc in [(-1,0), (1,0), (0,-1), (0,1)]:
        nr, nc = x + dr, y + dc
        if 0 <= nr < height and 0 <= nc < width:
            grid_input[nr][nc] = 6
    
    # Create output by changing all 6s to 0
    grid_output = [[0 if cell == 6 else cell for cell in row] for row in grid_input]
    return {'input': grid_input, 'output': grid_output}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    grid = [list(row) for row in input_grid]
    for i in range(len(grid)):
        for j in range(len(grid[0])):
            if grid[i][j] == 6:
                grid[i][j] = 0
    return grid
