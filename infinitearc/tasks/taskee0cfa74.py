# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-08
# ---------------------------------------------------------------

"""
Task ID: ee0cfa74
Difficulty: easy

=== Tags ===
- Cylindrical
- Image reflection
- Take maximum
- Snap to grid

=== Description ===
The task involves transforming an input grid into an output grid by reflecting
it horizontally (left-right) and then taking the maximum value between each cell
in the original grid and its reflected position. The reflection is performed as
if the grid were cylindrical, meaning the leftmost and rightmost columns are
adjacent, but the reflection operation remains standard (column i swaps with
column width-1-i). The "snap to grid" aspect ensures the reflection axis aligns
perfectly with grid lines, requiring no fractional positioning. For every cell
at position (i, j), the output value is the maximum of the input grid's value at
(i, j) and (i, width-1-j). This creates a symmetric output grid where each cell
reflects the highest value from its original and mirrored positions. The
transformation is deterministic, requires no memorization, and is easily
discoverable with a few examples.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(2, 30)
    height = random.randint(1, 30)
    while True:
        grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
        symmetric = True
        for i in range(height):
            for j in range(width // 2):
                if grid[i][j] != grid[i][width - 1 - j]:
                    symmetric = False
                    break
            if not symmetric:
                break
        if not symmetric:
            break
    output = [[max(grid[i][j], grid[i][width - 1 - j]) for j in range(width)] for i in range(height)]
    return {"input": grid, "output": output}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    output = [[0] * width for _ in range(height)]
    for i in range(height):
        for j in range(width):
            refl_j = width - 1 - j
            output[i][j] = max(input_grid[i][j], input_grid[i][refl_j])
    return output
