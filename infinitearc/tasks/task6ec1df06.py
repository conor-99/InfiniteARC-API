# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-04
# ---------------------------------------------------------------

"""
Task ID: 6ec1df06
Difficulty: medium

=== Tags ===
- X marks the spot

=== Description ===
The input grid contains a single connected region of a non-zero color (e.g.,
color 1) surrounded by background (color 0). The output grid is identical to the
input, except the cell at the center of the region's bounding box is replaced
with color 9 (representing "X"). The bounding box is defined as the smallest
rectangle that contains all cells of the connected region. The center is
calculated using integer division of the bounding box's row and column extents:
center_row = (min_row + max_row) // 2, center_col = (min_col + max_col) // 2.
For example, a region spanning rows 2–4 and columns 3–5 has a bounding box
center at (3,4). This transformation marks the geometric center of the region
with an "X" while preserving all other grid values.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common

def generate():
    width = common.randint(3, 30)
    height = common.randint(3, 30)
    total_cells = width * height
    region_size = common.randint(2, total_cells - 1)
    region_pixels = common.continuous_creature(region_size, width, height)
    region_color = common.random_color(exclude=[0, 9])
    input_grid = common.grid(width, height, 0)
    for r, c in region_pixels:
        input_grid[r][c] = region_color
    rows = [p[0] for p in region_pixels]
    cols = [p[1] for p in region_pixels]
    min_row, max_row = min(rows), max(rows)
    min_col, max_col = min(cols), max(cols)
    center_row = (min_row + max_row) // 2
    center_col = (min_col + max_col) // 2
    output_grid = [row[:] for row in input_grid]
    output_grid[center_row][center_col] = 9
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    non_zero = []
    for r in range(len(input_grid)):
        for c in range(len(input_grid[0])):
            if input_grid[r][c] != 0:
                non_zero.append((r, c))
    rows = [p[0] for p in non_zero]
    cols = [p[1] for p in non_zero]
    min_row, max_row = min(rows), max(rows)
    min_col, max_col = min(cols), max(cols)
    center_row = (min_row + max_row) // 2
    center_col = (min_col + max_col) // 2
    output_grid = [row[:] for row in input_grid]
    output_grid[center_row][center_col] = 9
    return output_grid
