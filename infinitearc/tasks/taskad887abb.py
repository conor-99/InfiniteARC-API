# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-04
# ---------------------------------------------------------------

"""
Task ID: ad887abb
Difficulty: hard

=== Tags ===
- Color guessing
- Diagonal symmetry
- Detect connectedness
- Dominant color

=== Description ===
The task involves transforming an input grid into its diagonal transpose, where
each pixel at position (r, c) in the input moves to position (c, r) in the
output. The input grids feature a dominant color (the most frequently occurring
color), and the largest connected component of this dominant color must be
detected (using 4-connectivity). Although the connectedness of the dominant
color's component is a required step to identify the correct transformation, the
actual rule is purely a main-diagonal reflection. The complexity arises from the
need to ignore irrelevant visual features (like color dominance and
connectivity) and recognize the consistent geometric transformation. Input grids
are large (up to 30Ã—30) with intricate patterns, requiring the solver to
abstract away distractions and apply the transpose rule universally, making it
challenging to distinguish from other potential color-based transformations.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid, transpose

def generate():
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    while width == height:
        height = random.randint(1, 30)
    input_grid = grid(width, height, color=0)
    for r in range(height):
        for c in range(width):
            input_grid[r][c] = random.randint(0, 9)
    output_grid = transpose(input_grid)
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

from common import transpose

def p(input_grid):
    return transpose(input_grid)
