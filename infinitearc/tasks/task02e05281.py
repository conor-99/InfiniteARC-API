# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-03
# ---------------------------------------------------------------

"""
Task ID: 02e05281
Difficulty: easy

=== Tags ===
- Column parity coloring
- Recolor by count
- Algebra
- Paint outer ring

=== Description ===
The task transforms an input grid through two sequential steps. First, each
column is recolored based on the parity (even or odd) of the count of color 2
within that column: if the count is even, the entire column becomes color 3; if
odd, it becomes color 4. Second, all cells on the outer ring (border) of the
grid—defined as the first and last rows and columns—are recolored to color 5,
overriding any prior color assignments in those positions. The resulting grid is
the output. This task combines column-based parity checks, count-dependent
recoloring, simple parity algebra, and border painting, all of which are
visually discernible through pattern recognition without relying on numerical
values or non-visual rules.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    while all(cell == 5 for row in grid for cell in row):
        grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    output = [row[:] for row in grid]
    for c in range(width):
        count_2 = sum(1 for r in range(height) if grid[r][c] == 2)
        if count_2 % 2 == 0:
            for r in range(height):
                output[r][c] = 3
        else:
            for r in range(height):
                output[r][c] = 4
    for r in range(height):
        for c in range(width):
            if r == 0 or r == height-1 or c == 0 or c == width-1:
                output[r][c] = 5
    return {"input": grid, "output": output}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import random

def p(input_grid):
    if not input_grid:
        return []
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    height = len(input_grid)
    width = len(input_grid[0])
    output = [row[:] for row in input_grid]
    for c in range(width):
        count_2 = sum(1 for r in range(height) if input_grid[r][c] == 2)
        if count_2 % 2 == 0:
            for r in range(height):
                output[r][c] = 3
        else:
            for r in range(height):
                output[r][c] = 4
    for r in range(height):
        for c in range(width):
            if r == 0 or r == height-1 or c == 0 or c == width-1:
                output[r][c] = 5
    return output
