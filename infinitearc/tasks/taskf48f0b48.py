# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-04
# ---------------------------------------------------------------

"""
Task ID: f48f0b48
Difficulty: easy

=== Tags ===
- Detect hor lines
- Algebra

=== Description ===
The task involves input grids of varying sizes (1×1 to 30×30) with values
ranging from 0 to 9. The output grid is generated by identifying all rows where
every cell in the row has the same value (horizontal lines). For each such row,
every cell in the row is replaced with the value (row index + 1) modulo 10. All
non-uniform rows (where not all cells are the same) remain unchanged. This
transformation guarantees that no input grid matches its output grid, as the
replacement value (row index + 1) % 10 is always different from the original
uniform value in the row. For example, a uniform row at index 2 (value 5)
becomes [3, 3, ..., 3] in the output, since (2 + 1) % 10 = 3. The rule combines
detection of horizontal patterns with a simple algebraic operation based on row
position.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    width = random.randint(2, 30)
    height = random.randint(1, 30)
    input_grid = [[0] * width for _ in range(height)]
    r = random.randint(0, height-1)
    valid_v = [i for i in range(10) if i != (r + 1) % 10]
    v = random.choice(valid_v)
    for c in range(width):
        input_grid[r][c] = v
    for row in range(height):
        if row == r:
            continue
        a = random.randint(0, 9)
        b = random.randint(0, 9)
        while b == a:
            b = random.randint(0, 9)
        input_grid[row][0] = a
        input_grid[row][1] = b
        for c in range(2, width):
            input_grid[row][c] = random.randint(0, 9)
    output_grid = [row[:] for row in input_grid]
    for r_idx in range(height):
        if all(x == input_grid[r_idx][0] for x in input_grid[r_idx]):
            new_val = (r_idx + 1) % 10
            for c in range(width):
                output_grid[r_idx][c] = new_val
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    output = [list(row) for row in input_grid]
    for r in range(height):
        if all(x == input_grid[r][0] for x in input_grid[r]):
            new_val = (r + 1) % 10
            for c in range(width):
                output[r][c] = new_val
    return output
