# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-10
# ---------------------------------------------------------------

"""
Task ID: eb7df522
Difficulty: medium

=== Tags ===
- Image filling
- Associate colors to images
- Draw pattern from point

=== Description ===
The task involves transforming a grid where a single non-zero cell (the "seed")
determines a pattern. The seed's color (1-9) associates with a specific
direction (e.g., color 1 = up, color 2 = right, color 3 = down, color 4 = left,
color 5 = up-right, color 6 = down-right, color 7 = down-left, color 8 = up-
left, color 9 = all four directions) and a length equal to the color value. The
output grid fills a line of length equal to the seed's color, starting from the
seed cell and extending in the associated direction, using a fixed color (e.g.,
5). If the line would exceed grid boundaries, it stops at the edge. All other
cells remain empty (0), except for the filled line. The transformation requires
identifying the seed cell, mapping its color to direction/length, and drawing
the line accordingly.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    while True:
        width = random.randint(1, 30)
        height = random.randint(1, 30)
        seed_color = random.randint(1, 9)
        r = random.randint(0, height-1)
        c = random.randint(0, width-1)
        input_grid = [[0] * width for _ in range(height)]
        input_grid[r][c] = seed_color
        output_grid = [[0] * width for _ in range(height)]
        
        directions = {
            1: [(-1, 0)],
            2: [(0, 1)],
            3: [(1, 0)],
            4: [(0, -1)],
            5: [(-1, 1)],
            6: [(1, 1)],
            7: [(1, -1)],
            8: [(-1, -1)],
            9: [(-1, 0), (0, 1), (1, 0), (0, -1)]
        }
        
        for dr, dc in directions[seed_color]:
            for step in range(seed_color):
                nr = r + dr * step
                nc = c + dc * step
                if 0 <= nr < height and 0 <= nc < width:
                    output_grid[nr][nc] = 5
                else:
                    break
        
        if input_grid == output_grid:
            continue
        return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import random

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    seed_color = None
    seed_pos = None
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 0:
                seed_color = input_grid[r][c]
                seed_pos = (r, c)
                break
        if seed_pos:
            break
    if seed_pos is None:
        return [[0] * width for _ in range(height)]
    
    r, c = seed_pos
    output_grid = [[0] * width for _ in range(height)]
    
    directions = {
        1: [(-1, 0)],
        2: [(0, 1)],
        3: [(1, 0)],
        4: [(0, -1)],
        5: [(-1, 1)],
        6: [(1, 1)],
        7: [(1, -1)],
        8: [(-1, -1)],
        9: [(-1, 0), (0, 1), (1, 0), (0, -1)]
    }
    
    for dr, dc in directions[seed_color]:
        for step in range(seed_color):
            nr = r + dr * step
            nc = c + dc * step
            if 0 <= nr < height and 0 <= nc < width:
                output_grid[nr][nc] = 5
            else:
                break
    return output_grid
