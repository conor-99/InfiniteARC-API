# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-02
# ---------------------------------------------------------------

"""
Task ID: b9ac43dc
Difficulty: medium

=== Tags ===
- Hole punch pattern

=== Description ===
The task involves transforming a grid where certain rows and columns are
entirely filled with a single color. The output grid is generated by identifying
all cells that lie at the intersection of a fully uniform row (all cells in the
row share the same color) and a fully uniform column (all cells in the column
share the same color), then setting those cells to 0 (representing "holes"). All
other cells retain their original color. This requires recognizing uniform rows
and columns and their intersections, which is a medium-level abstraction that
avoids numerical dependencies and relies solely on spatial pattern recognition.
For example, a grid with a solid horizontal line of color 5 in row 3 and a solid
vertical line of color 5 in column 2 will have the cell at (3,2) transformed to
0 in the output, while other cells remain unchanged.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    H = max(2, random.randint(1, 30))
    W = max(2, random.randint(1, 30))
    C = random.randint(1, 9)
    R = random.sample(range(H), random.randint(1, H-1))
    C_cols = random.sample(range(W), random.randint(1, W-1))
    input_grid = [[0]*W for _ in range(H)]
    for i in range(H):
        for j in range(W):
            if i in R or j in C_cols:
                input_grid[i][j] = C
            else:
                color = random.randint(1, 9)
                while color == C:
                    color = random.randint(1, 9)
                input_grid[i][j] = color
    output_grid = [row[:] for row in input_grid]
    for i in R:
        for j in C_cols:
            output_grid[i][j] = 0
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    H = len(input_grid)
    W = len(input_grid[0])
    uniform_rows = []
    for i in range(H):
        if all(x == input_grid[i][0] for x in input_grid[i]):
            uniform_rows.append((i, input_grid[i][0]))
    uniform_cols = []
    for j in range(W):
        col = [input_grid[i][j] for i in range(H)]
        if all(x == col[0] for x in col):
            uniform_cols.append((j, col[0]))
    output = [list(row) for row in input_grid]
    for i, cx in uniform_rows:
        for j, cy in uniform_cols:
            if cx == cy:
                output[i][j] = 0
    return output
