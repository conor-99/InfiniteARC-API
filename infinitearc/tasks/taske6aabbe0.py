# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: e6aabbe0
Difficulty: easy

=== Tags ===
- Associate colors to shapes
- Count different colors
- Snap to grid

=== Description ===
The input grids are 2D grids of colors (0-9), where each color represents a
distinct shape. The output grid has identical dimensions to the input. For each
cell in the input, the corresponding cell in the output is replaced with the
total number of times that color appears across the entire input grid. For
example, if a cell contains color 4 and color 4 appears 6 times in the input,
the output cell will contain 6. This task requires associating each color with
its global count in the grid, resulting in a transformed grid where all
instances of a color are replaced by its frequency. The transformation is
deterministic, relies solely on counting color occurrences, and requires no
spatial reasoning or pattern analysis beyond basic frequency calculation.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    while True:
        width = random.randint(1, 30)
        height = random.randint(1, 30)
        if width == 1 and height == 1:
            color = random.choice([0, 2, 3, 4, 5, 6, 7, 8, 9])
            input_grid = [[color]]
        else:
            input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
        
        counts = [0] * 10
        for row in input_grid:
            for color in row:
                counts[color] += 1
        
        output_grid = []
        for row in input_grid:
            new_row = []
            for color in row:
                new_val = min(counts[color], 9)
                new_row.append(new_val)
            output_grid.append(new_row)
        
        if input_grid != output_grid:
            return {
                "input": input_grid,
                "output": output_grid
            }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    counts = [0] * 10
    for row in input_grid:
        for color in row:
            counts[color] += 1
    output_grid = []
    for row in input_grid:
        new_row = []
        for color in row:
            new_val = min(counts[color], 9)
            new_row.append(new_val)
        output_grid.append(new_row)
    return output_grid
