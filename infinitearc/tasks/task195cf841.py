# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: 195cf841
Difficulty: very hard

=== Tags ===
- Variable binding by color
- Rectangle guessing

=== Description ===
Input grids feature a background color (0) and multiple colored regions. Each of
the four grid edges (top, bottom, left, right) contains a single dominant color
forming a contiguous line along that edge. The top edge color is the color in
row 0 that appears in a contiguous block spanning at least 3 columns (with no
background cells between its occurrences), the bottom edge color is determined
similarly for row H-1, the left edge color for column 0, and the right edge
color for column W-1. The output grid is identical to the input except that all
cells inside the rectangle bounded by these four edge colors (i.e., between the
top and bottom edges, left and right edges) are filled with a new color (e.g.,
color 9), while the edge lines remain visible in their original colors. This
requires identifying the correct edge colors through contiguous line analysis at
each grid boundary, making it a complex task of inferring spatial relationships
through color patterns rather than numerical values.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common

def generate():
    w = common.randint(4, 30)
    h = common.randint(4, 30)
    colors = common.random_colors(4, exclude=[0])
    top_color, bottom_color, left_color, right_color = colors
    
    grid = [[0] * w for _ in range(h)]
    
    top_start = common.randint(0, w - 3)
    for c in range(top_start, top_start + 3):
        grid[0][c] = top_color
    
    bottom_start = common.randint(0, w - 3)
    for c in range(bottom_start, bottom_start + 3):
        grid[h-1][c] = bottom_color
    
    left_start = common.randint(0, h - 3)
    for r in range(left_start, left_start + 3):
        grid[r][0] = left_color
    
    right_start = common.randint(0, h - 3)
    for r in range(right_start, right_start + 3):
        grid[r][w-1] = right_color
    
    for r in range(h):
        for c in range(w):
            if grid[r][c] == 0:
                grid[r][c] = common.random_color(exclude=[0, top_color, bottom_color, left_color, right_color])
    
    output = [[grid[r][c] for c in range(w)] for r in range(h)]
    for r in range(1, h-1):
        for c in range(1, w-1):
            output[r][c] = 9
    
    return {"input": grid, "output": output}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    input_list = [list(row) for row in input_grid]
    h = len(input_list)
    w = len(input_list[0])
    for r in range(1, h-1):
        for c in range(1, w-1):
            input_list[r][c] = 9
    return input_list
