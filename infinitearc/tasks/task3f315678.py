# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: 3f315678
Difficulty: hard

=== Tags ===
- Color guessing

=== Description ===
The task involves transforming an input grid into an output grid where each cell
(r, c) is replaced by the smallest color (0-9) not present in the union of
colors found in the input grid's row r and column c. For example, if row r
contains colors {0, 2, 5} and column c contains colors {1, 3, 5}, the combined
set is {0, 1, 2, 3, 5}, so the smallest missing color is 4, and the output cell
(r, c) is set to 4. This requires the solver to analyze the color distribution
across each row and column to determine the missing color for each position,
making it a challenging task that demands systematic examination of row-column
interactions rather than simple pattern recognition.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid

def generate():
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    input_grid = grid(width, height)
    for r in range(height):
        for c in range(width):
            input_grid[r][c] = random.randint(0, 8)
    output_grid = grid(width, height)
    for r in range(height):
        row_colors = set(input_grid[r])
        for c in range(width):
            col_colors = set(input_grid[i][c] for i in range(height))
            union = row_colors | col_colors
            for color in range(10):
                if color not in union:
                    output_grid[r][c] = color
                    break
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    width = len(input_grid[0])
    height = len(input_grid)
    output_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        row_colors = set(input_grid[r])
        for c in range(width):
            col_colors = set(input_grid[i][c] for i in range(height))
            union = row_colors | col_colors
            for color in range(10):
                if color not in union:
                    output_grid[r][c] = color
                    break
    return output_grid
