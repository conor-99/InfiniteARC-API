# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-09
# ---------------------------------------------------------------

"""
Task ID: 049dd208
Difficulty: easy

=== Tags ===
- Draw line from point
- Dominant color
- Size guessing

=== Description ===
The input grid is a 2D array of values between 0 and 9, where 0 represents an
empty background. The dominant color is defined as the most frequently occurring
non-zero value in the input grid. The output grid is derived by replacing all
cells along the main diagonal (from the top-left corner to the bottom-right
corner) with this dominant color, while all other cells retain their original
values from the input. This transformation ensures the output grid differs from
the input, as at least one diagonal cell must be modified to the dominant color
(the input grid is constructed to guarantee this). The diagonal's length
corresponds to the grid's size (e.g., a 5Ã—5 grid has a 5-cell diagonal), making
the line length a direct function of the grid's dimensions.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
seen_inputs = set()

def generate():
    global seen_inputs
    while True:
        n = random.randint(2, 30)
        D = random.randint(1, 9)
        input_grid = [[D] * n for _ in range(n)]
        i = random.randint(0, n-1)
        C = random.randint(1, 9)
        while C == D:
            C = random.randint(1, 9)
        input_grid[i][i] = C
        grid_tuple = tuple(tuple(row) for row in input_grid)
        if grid_tuple not in seen_inputs:
            seen_inputs.add(grid_tuple)
            output_grid = [[D if r == c else input_grid[r][c] for c in range(n)] for r in range(n)]
            return {
                "input": input_grid,
                "output": output_grid
            }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    n = len(input_grid)
    counts = {}
    for row in input_grid:
        for cell in row:
            if cell != 0:
                counts[cell] = counts.get(cell, 0) + 1
    dominant = max(counts, key=counts.get) if counts else 0
    output_grid = [[dominant if r == c else input_grid[r][c] for c in range(n)] for r in range(n)]
    return output_grid
