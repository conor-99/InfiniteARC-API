# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-04
# ---------------------------------------------------------------

"""
Task ID: d9b3230f
Difficulty: medium

=== Tags ===
- Contouring
- Grid coloring

=== Description ===
The task involves identifying the boundaries of each connected region in the
input grid. A connected region consists of cells of the same color connected via
4-directional adjacency (up, down, left, right). For each cell in a region that
has at least one neighboring cell (in any of the four directions) with a
different color, the output grid replaces that cell's color with 9. All other
cells retain their original color. This process creates a contour effect where
the outer edges of each region are highlighted in color 9. The transformation
requires recognizing contiguous regions and their spatial relationships,
avoiding reliance on numerical properties or pixel-level matching. Input grids
are designed to contain at least two distinct regions or boundary edges to
ensure input and output grids differ.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    width = random.randint(3, 30)
    height = random.randint(2, 30)
    color1 = random.randint(1, 9)
    color2 = random.randint(1, 9)
    while color1 == color2:
        color2 = random.randint(1, 9)
    
    split_col = random.randint(1, width - 2)
    
    input_grid = [[color1 if c <= split_col else color2 for c in range(width)] for r in range(height)]
    
    output_grid = [row[:] for row in input_grid]
    
    for r in range(height):
        for c in range(width):
            for dr, dc in [(1, 0), (-1, 0), (0, 1), (0, -1)]:
                nr, nc = r + dr, c + dc
                if 0 <= nr < height and 0 <= nc < width:
                    if input_grid[nr][nc] != input_grid[r][c]:
                        output_grid[r][c] = 9
                        break
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    if not input_grid or not input_grid[0]:
        return input_grid
    height = len(input_grid)
    width = len(input_grid[0])
    output_grid = [row[:] for row in input_grid]
    
    for r in range(height):
        for c in range(width):
            for dr, dc in [(1, 0), (-1, 0), (0, 1), (0, -1)]:
                nr, nc = r + dr, c + dc
                if 0 <= nr < height and 0 <= nc < width:
                    if input_grid[nr][nc] != input_grid[r][c]:
                        output_grid[r][c] = 9
                        break
    return output_grid
