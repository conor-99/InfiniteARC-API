# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-02
# ---------------------------------------------------------------

"""
Task ID: 369a37c9
Difficulty: medium

=== Tags ===
- Diagonal symmetry
- Measure length

=== Description ===
The input grid contains at least one non-zero value along the main diagonal
(top-left to bottom-right). The output grid is generated by counting the number
of non-zero cells along the main diagonal (length L) and replacing every cell on
the main diagonal with L, while leaving all other cells unchanged. For example,
if the main diagonal has three non-zero cells, all diagonal cells in the output
will be set to 3. This transformation relies on measuring the length of the
diagonal's non-zero elements and applying a uniform value to maintain diagonal
symmetry in the output.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
def generate():
    n = random.randint(1, 30)
    grid = [[random.randint(0, 9) for _ in range(n)] for _ in range(n)]
    diag = [grid[i][i] for i in range(n)]
    if all(x == 0 for x in diag):
        grid[0][0] = random.randint(1, 9)
        diag = [grid[i][i] for i in range(n)]
    L = sum(1 for x in diag if x != 0)
    if L > 9:
        to_zero = L - 9
        for i in range(n):
            if to_zero <= 0:
                break
            if grid[i][i] != 0:
                grid[i][i] = 0
                to_zero -= 1
        diag = [grid[i][i] for i in range(n)]
        L = sum(1 for x in diag if x != 0)
    if all(grid[i][i] == L for i in range(n)):
        new_val = (grid[0][0] + 1) % 10
        if new_val == 0:
            new_val = 1
        grid[0][0] = new_val
    output = [row[:] for row in grid]
    for i in range(n):
        output[i][i] = L
    return {
        "input": grid,
        "output": output
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    n = len(input_grid)
    diag = [input_grid[i][i] for i in range(n)]
    L = sum(1 for x in diag if x != 0)
    output = [list(row) for row in input_grid]
    for i in range(n):
        output[i][i] = L
    return output
