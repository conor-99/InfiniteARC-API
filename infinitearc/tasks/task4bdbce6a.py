# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: 4bdbce6a
Difficulty: mediumâ€“hard

=== Tags ===
- Pattern mirroring chain
- Color the row with most dots
- Permute rows by length

=== Description ===
Input grids are 2D arrays of integer values representing colors (0-9), where 0
denotes background. The transformation follows a sequence of three distinct
operations: First, each row is horizontally mirrored (reversed). Second, the row
containing the highest count of non-zero cells (referred to as "dots") is
identified using the original input's dot counts (mirroring does not alter dot
counts). Third, all cells in this identified row are recolored to a fixed color
(e.g., 5), while preserving all other grid elements. Finally, the rows are
reordered in descending order based on their original dot counts (before
mirroring or coloring). The background color (0) is excluded from dot counting,
and the output grid must reflect all transformations without overlapping or
ambiguous operations.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    dots = [sum(1 for cell in row if cell != 0) for row in input_grid]
    r_max = dots.index(max(dots))
    mirrored = [row[::-1] for row in input_grid]
    mirrored[r_max] = [5] * width
    sorted_mirrored = [row for _, row in sorted(zip(dots, mirrored), key=lambda x: x[0], reverse=True)]
    return {"input": input_grid, "output": sorted_mirrored}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    input_list = [list(row) for row in input_grid]
    dots = [sum(1 for cell in row if cell != 0) for row in input_list]
    r_max = dots.index(max(dots))
    mirrored = [row[::-1] for row in input_list]
    mirrored[r_max] = [5] * len(mirrored[r_max])
    sorted_mirrored = [row for _, row in sorted(zip(dots, mirrored), key=lambda x: x[0], reverse=True)]
    return sorted_mirrored
