# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-04
# ---------------------------------------------------------------

"""
Task ID: 7a956edb
Difficulty: easy

=== Tags ===
- Pattern completion

=== Description ===
The input grid displays a checkerboard pattern of alternating colors, where
adjacent cells (horizontally and vertically) have different colors. One cell in
the grid is filled with 0 (indicating a missing color), and the output grid
replaces this 0 with the correct color to complete the checkerboard pattern. The
pattern is determined by the arrangement of non-zero colors in the input, with
the solver identifying the alternating sequence and filling the missing cell
accordingly. The task requires recognizing the visual alternation of colors
rather than relying on numerical properties or sums.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    from common import random_color
    width = random.randint(2, 30)
    height = random.randint(2, 30)
    color1 = random_color(exclude=[0])
    color2 = random_color(exclude=[0, color1])
    input_grid = [[0] * width for _ in range(height)]
    output_grid = [[0] * width for _ in range(height)]
    for i in range(height):
        for j in range(width):
            if (i + j) % 2 == 0:
                input_grid[i][j] = color1
                output_grid[i][j] = color1
            else:
                input_grid[i][j] = color2
                output_grid[i][j] = color2
    i, j = random.randint(0, height-1), random.randint(0, width-1)
    input_grid[i][j] = 0
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    zero_pos = None
    for i in range(len(input_grid)):
        for j in range(len(input_grid[0])):
            if input_grid[i][j] == 0:
                zero_pos = (i, j)
                break
        if zero_pos:
            break
    if zero_pos is None:
        return input_grid
    i, j = zero_pos
    neighbor_color = None
    for di, dj in [(1,0), (-1,0), (0,1), (0,-1)]:
        ni, nj = i + di, j + dj
        if 0 <= ni < len(input_grid) and 0 <= nj < len(input_grid[0]):
            color = input_grid[ni][nj]
            if color != 0:
                neighbor_color = color
                break
    if neighbor_color is None:
        return input_grid
    colors = set()
    for row in input_grid:
        for c in row:
            if c != 0:
                colors.add(c)
    if len(colors) == 1:
        other_color = next(iter(colors))
    else:
        other_color = next(iter(colors - {neighbor_color}))
    output = [row[:] for row in input_grid]
    output[i][j] = other_color
    return output
