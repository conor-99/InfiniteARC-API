# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-08
# ---------------------------------------------------------------

"""
Task ID: d2d030f1
Difficulty: easy

=== Tags ===
- Bring patterns close
- Recoloring
- Count ver lines

=== Description ===
Each input grid contains one or more vertical lines (groups of vertically
aligned cells sharing the same color). The output grid is generated by counting
the number of distinct vertical lines (N), compacting all vertical lines to the
leftmost columns with no gaps between them, and recoloring each vertical line to
the color corresponding to the count N. For example, if there are 2 vertical
lines in the input, all vertical lines in the output are recolored to color 2
and positioned adjacent to each other starting from the leftmost column.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    h = random.randint(1, 30)
    if h == 1:
        w = random.randint(1, 9)
        N = w
        input_grid = [[0] * w]
        for c in range(w):
            if c == 0:
                color = random.choice([i for i in range(1, 10) if i != N])
            else:
                color = N
            input_grid[0][c] = color
        output_grid = [[N] * N]
    else:
        w = random.randint(1, 30)
        N = random.randint(1, min(9, w))
        input_grid = [[0] * w for _ in range(h)]
        col_indices = random.sample(range(w), N)
        for c in col_indices:
            color = random.randint(1, 9)
            for r in range(h):
                input_grid[r][c] = color
        for c in range(w):
            if c not in col_indices:
                color1 = random.randint(1, 9)
                color2 = random.randint(1, 9)
                while color2 == color1:
                    color2 = random.randint(1, 9)
                for r in range(h):
                    input_grid[r][c] = color1 if r % 2 == 0 else color2
        output_grid = [[N] * N for _ in range(h)]
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if not input_grid or not input_grid[0]:
        return []
    h = len(input_grid)
    w = len(input_grid[0])
    N = 0
    for c in range(w):
        col = [input_grid[r][c] for r in range(h)]
        if all(x == col[0] for x in col) and col[0] != 0:
            N += 1
    return [[N] * N for _ in range(h)]
