# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-03
# ---------------------------------------------------------------

"""
Task ID: 3e47aefc
Difficulty: hard

=== Tags ===
- Associate colors to images
- Image reflection
- Enlarge image

=== Description ===
The task involves transforming an input grid into an output grid by performing
two operations in sequence: first, reflecting the grid horizontally (left
becomes right, right becomes left), then enlarging the entire grid by a factor
of 2, where each pixel in the reflected grid is replaced by a 2x2 block of the
same color. The input grids feature multiple distinct colored regions forming
complex shapes (e.g., overlapping patterns, disconnected components, or nested
structures), requiring the solver to recognize both the reflection direction and
the scaling factor. The output grid must be exactly twice the width and height
of the input, with all visual elements correctly mirrored and scaled without
distortion. This task is challenging due to the need to apply two distinct
transformations sequentially on a grid with intricate visual features, where
misinterpreting the order (e.g., scaling before reflection) or overlooking color
consistency during scaling leads to incorrect outputs.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common
import random

def generate():
    w = random.randint(1, 15)
    h = random.randint(1, 15)
    input_grid = [[random.randint(0, 9) for _ in range(w)] for _ in range(h)]
    reflected = common.flip_horiz(input_grid)
    output_grid = []
    for row in reflected:
        doubled_row = [color for color in row for _ in range(2)]
        output_grid.append(doubled_row)
        output_grid.append(doubled_row)
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import common

def p(input_grid):
    reflected = common.flip_horiz(input_grid)
    output = []
    for row in reflected:
        doubled_row = [color for color in row for _ in range(2)]
        output.append(doubled_row)
        output.append(doubled_row)
    return output
