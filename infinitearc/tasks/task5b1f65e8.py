# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: 5b1f65e8
Difficulty: insane

=== Tags ===
- Only one

=== Description ===
The input grid consists of multiple 2x2 blocks of uniform color, with exactly
one cell that does not belong to any such block. The output grid is identical to
the input except that this single cell is changed to color 0. The solver must
identify the cell that is not part of any 2x2 block (where all four cells in the
block share the same color) and modify it to 0. This requires analyzing the
entire grid for 2x2 block consistency, making the task exceptionally challenging
due to the need for precise neighbor checks across all possible block positions.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(3, 30)
    height = random.randint(3, 30)
    colorA = random.randint(1, 9)
    colorB = random.randint(1, 9)
    while colorB == colorA:
        colorB = random.randint(1, 9)
    
    input_grid = [[colorA] * width for _ in range(height)]
    corners = [(0, 0), (0, width-1), (height-1, 0), (height-1, width-1)]
    i, j = random.choice(corners)
    input_grid[i][j] = colorB
    
    output_grid = [row[:] for row in input_grid]
    output_grid[i][j] = 0
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    height = len(input_grid)
    width = len(input_grid[0])
    for i in range(height):
        for j in range(width):
            has_uniform_block = False
            for dr in [-1, 0]:
                for dc in [-1, 0]:
                    r = i + dr
                    c = j + dc
                    if r < 0 or c < 0 or r + 1 >= height or c + 1 >= width:
                        continue
                    if input_grid[r][c] == input_grid[r][c+1] == input_grid[r+1][c] == input_grid[r+1][c+1]:
                        has_uniform_block = True
                        break
                if has_uniform_block:
                    break
            if not has_uniform_block:
                output_grid = [row[:] for row in input_grid]
                output_grid[i][j] = 0
                return output_grid
