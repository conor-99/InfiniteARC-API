# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-03
# ---------------------------------------------------------------

"""
Task ID: 86f9a1d2
Difficulty: easy

=== Tags ===
- Detect repetition
- Detect enclosure
- Swap positions of two objects
- Count hor lines

=== Description ===
The task involves transforming an input grid into an output grid by identifying
and swapping two specific horizontal line segments. The input grid contains
exactly two horizontal lines (rows where all non-zero cells share the same
color), which are enclosed within the grid (not at the top or bottom edge). The
transformation requires detecting these two horizontal lines (repetition of the
horizontal pattern), confirming their enclosure within the grid, counting the
horizontal lines (which must equal two), and then swapping their positions in
the grid. The output grid will have the two horizontal lines exchanged while
preserving all other elements of the input. This task relies on visual pattern
recognition of horizontal structures, spatial enclosure, and a simple positional
swap, making it accessible for an easy difficulty level.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid, random_color
def generate():
    height = random.randint(4, 30)
    width = random.randint(2, 30)
    grid_in = grid(width, height, 0)
    
    rows = list(range(1, height-1))
    r1, r2 = random.sample(rows, 2)
    
    color1 = random_color(exclude=[0])
    color2 = random_color(exclude=[0, color1])
    
    for c in range(width):
        grid_in[r1][c] = color1
        grid_in[r2][c] = color2
    
    for r in range(height):
        if r == r1 or r == r2:
            continue
        color_x = random_color(exclude=[0, color1, color2])
        color_y = random_color(exclude=[0, color1, color2, color_x])
        c = random.randint(0, width-1)
        for c_idx in range(width):
            grid_in[r][c_idx] = color_x if c_idx != c else color_y
    
    grid_out = [row[:] for row in grid_in]
    grid_out[r1], grid_out[r2] = grid_out[r2], grid_out[r1]
    
    return {"input": grid_in, "output": grid_out}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    uniform_rows = []
    
    for r in range(height):
        row = input_grid[r]
        colors = set()
        for val in row:
            if val != 0:
                colors.add(val)
        if len(colors) == 1 and colors:
            uniform_rows.append(r)
    
    if len(uniform_rows) == 2:
        r1, r2 = uniform_rows
        output_grid = [row[:] for row in input_grid]
        output_grid[r1], output_grid[r2] = output_grid[r2], output_grid[r1]
        return output_grid
    else:
        return input_grid
