# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-03
# ---------------------------------------------------------------

"""
Task ID: 2d4068de
Difficulty: hard

=== Tags ===
- Pattern completion
- Detect wall
- Draw line from border
- Measure distance from side

=== Description ===
The input grid contains walls represented by non-zero values, while empty spaces
are denoted by 0. The task requires detecting walls, measuring the minimum
distance from each of the four grid borders (top, bottom, left, right) to the
nearest wall in the direction perpendicular to that border, and drawing a line
from each border inward for the exact measured distance. The lines are drawn
using a distinct color (e.g., color 1) and extend from the border toward the
wall, stopping just before the wall's location. For example, if a wall is
located 3 cells below the top border, the line from the top border will span 3
cells downward. The output grid must accurately reflect these lines for all
borders where walls exist, completing the pattern of border-to-wall connections
while preserving the original walls. This transformation requires precise
distance calculation, directional line drawing, and handling multiple
overlapping distances, making it a hard task due to the multi-step reasoning and
spatial awareness needed.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(3, 30)
    height = random.randint(3, 30)
    input_grid = [[0] * width for _ in range(height)]
    wall_color = random.randint(2, 9)
    
    top_col = random.randint(1, width - 2)
    input_grid[1][top_col] = wall_color
    
    bottom_col = random.randint(1, width - 2)
    input_grid[height - 2][bottom_col] = wall_color
    
    left_row = random.randint(1, height - 2)
    input_grid[left_row][1] = wall_color
    
    right_row = random.randint(1, height - 2)
    input_grid[right_row][width - 2] = wall_color
    
    output_grid = [row[:] for row in input_grid]
    
    for c in range(width):
        d = 0
        while d < height and input_grid[d][c] == 0:
            d += 1
        if d > 0 and d < height:
            for i in range(d):
                if input_grid[i][c] == 0:
                    output_grid[i][c] = 1
    
    for c in range(width):
        d = height - 1
        while d >= 0 and input_grid[d][c] == 0:
            d -= 1
        if d < height - 1:
            for i in range(d + 1, height):
                if input_grid[i][c] == 0:
                    output_grid[i][c] = 1
    
    for r in range(height):
        d = 0
        while d < width and input_grid[r][d] == 0:
            d += 1
        if d > 0 and d < width:
            for i in range(d):
                if input_grid[r][i] == 0:
                    output_grid[r][i] = 1
    
    for r in range(height):
        d = width - 1
        while d >= 0 and input_grid[r][d] == 0:
            d -= 1
        if d < width - 1:
            for i in range(d + 1, width):
                if input_grid[r][i] == 0:
                    output_grid[r][i] = 1
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import random

def p(input_grid):
    # Ensure input is list of lists
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    elif isinstance(input_grid[0], tuple):
        input_grid = [list(row) for row in input_grid]
    
    height = len(input_grid)
    width = len(input_grid[0])
    output_grid = [row[:] for row in input_grid]
    
    for c in range(width):
        d = 0
        while d < height and input_grid[d][c] == 0:
            d += 1
        if d > 0 and d < height:
            for i in range(d):
                if input_grid[i][c] == 0:
                    output_grid[i][c] = 1
    
    for c in range(width):
        d = height - 1
        while d >= 0 and input_grid[d][c] == 0:
            d -= 1
        if d < height - 1:
            for i in range(d + 1, height):
                if input_grid[i][c] == 0:
                    output_grid[i][c] = 1
    
    for r in range(height):
        d = 0
        while d < width and input_grid[r][d] == 0:
            d += 1
        if d > 0 and d < width:
            for i in range(d):
                if input_grid[r][i] == 0:
                    output_grid[r][i] = 1
    
    for r in range(height):
        d = width - 1
        while d >= 0 and input_grid[r][d] == 0:
            d -= 1
        if d < width - 1:
            for i in range(d + 1, width):
                if input_grid[r][i] == 0:
                    output_grid[r][i] = 1
    
    return output_grid
