# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-04
# ---------------------------------------------------------------

"""
Task ID: 8ef5624d
Difficulty: medium

=== Tags ===
- Size guessing
- Crop
- Only one
- Count ver lines

=== Description ===
The task involves identifying the sole vertical line in the input grid, defined
as a column where every cell shares the same non-zero color (e.g., all 5s),
while all other columns contain mixed colors or zeros. The output grid is a
cropped version containing only this identified vertical line, resulting in a
grid with the same height as the input but width reduced to 1. The input grid is
constructed to contain exactly one such vertical line, ensuring the rule is
unambiguous. The "Count ver lines" tag refers to the necessity of recognizing
the count of vertical lines (which is always 1), and "Crop" indicates the output
isolates the single vertical line. The "Size guessing" aspect arises from
inferring the output's height (matching the input's height) through visual
inspection of the vertical line's length.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common

def generate():
    H = common.randint(1, 30)
    W = common.randint(2, 30)
    line_col = common.randint(0, W-1)
    c = common.randint(1, 9)
    input_grid = common.grid(W, H, 0)
    for r in range(H):
        input_grid[r][line_col] = c
    if H > 1:
        for col in range(W):
            if col != line_col:
                for r in range(H):
                    input_grid[r][col] = c
                r_idx = common.randint(0, H-1)
                new_color = c
                while new_color == c:
                    new_color = common.randint(1, 9)
                input_grid[r_idx][col] = new_color
    else:
        for col in range(W):
            if col != line_col:
                input_grid[0][col] = 0
    output_grid = [[c] for _ in range(H)]
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    H = len(input_grid)
    W = len(input_grid[0])
    for col in range(W):
        color = input_grid[0][col]
        if color == 0:
            continue
        all_same = True
        for r in range(H):
            if input_grid[r][col] != color:
                all_same = False
                break
        if all_same:
            return [[input_grid[r][col]] for r in range(H)]
