# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-03
# ---------------------------------------------------------------

"""
Task ID: 8b94107e
Difficulty: insane

=== Tags ===
- One yes one no

=== Description ===
The task involves transforming an input grid into an output grid by identifying
and modifying a single cell that satisfies a specific condition. The condition
is: the value of the cell must exactly match the total number of distinct values
present in the entire input grid (excluding 0 if it's not part of the distinct
count). The input grid is guaranteed to contain exactly one such cell, making
the transformation deterministic. All other cells remain unchanged. The output
grid is identical to the input grid except for this single modified cell, which
is set to 0. This requires the solver to first compute the count of distinct
values across the grid, then locate the unique cell matching that count, and
finally replace it with 0. The challenge lies in recognizing the abstract
relationship between the cell's value and the global property of the grid,
rather than relying on visual patterns or simple transformations.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    C = random.randint(1, 9)
    possible = [x for x in range(1, 10) if x != C]
    if C == 1:
        other_values = []
    else:
        other_values = random.sample(possible, C-1)
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    while width * height < C:
        width = random.randint(1, 30)
        height = random.randint(1, 30)
    grid = [[0] * width for _ in range(height)]
    r, c = random.randint(0, height-1), random.randint(0, width-1)
    grid[r][c] = C
    for val in other_values:
        placed = False
        while not placed:
            r, c = random.randint(0, height-1), random.randint(0, width-1)
            if grid[r][c] == 0:
                grid[r][c] = val
                placed = True
    if other_values:
        for r in range(height):
            for c in range(width):
                if grid[r][c] == 0:
                    grid[r][c] = random.choice(other_values)
    output = [row[:] for row in grid]
    for r in range(height):
        for c in range(width):
            if grid[r][c] == C:
                output[r][c] = 0
                break
        else:
            continue
        break
    return {"input": grid, "output": output}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    input_grid = [list(row) for row in input_grid]
    non_zero = set()
    for row in input_grid:
        for val in row:
            if val != 0:
                non_zero.add(val)
    C = len(non_zero)
    output = [row[:] for row in input_grid]
    for r in range(len(output)):
        for c in range(len(output[0])):
            if output[r][c] == C:
                output[r][c] = 0
                break
        else:
            continue
        break
    return output
