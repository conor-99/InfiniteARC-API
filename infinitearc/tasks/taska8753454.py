# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-04
# ---------------------------------------------------------------

"""
Task ID: a8753454
Difficulty: medium

=== Tags ===
- Spacing
- Carve negative space

=== Description ===
The task involves transforming an input grid where non-zero cells form a
consistent pattern with horizontal and vertical spacing of exactly 2 units
between adjacent cells. The output grid is generated by "carving" out (setting
to zero) any non-zero cell that does not maintain this spacing rule.
Specifically, for each non-zero cell at position (r, c), the cell remains non-
zero in the output only if both (r, c+2) and (r+2, c) are also non-zero in the
input. Cells failing this check are set to zero, resulting in a grid where only
the cells part of a consistent 2x2 spaced pattern are preserved. This requires
examining both rightward and downward spacing relationships for each cell,
making it a medium-difficulty task that tests spatial reasoning and pattern
consistency without relying on numerical properties or specific color values.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    width = random.randint(5, 30)
    height = random.randint(5, 30)
    base_color = random.randint(1, 9)
    extra_color = random.randint(1, 9)
    while extra_color == base_color:
        extra_color = random.randint(1, 9)
    
    input_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            if r % 2 == 0 and c % 2 == 0:
                input_grid[r][c] = base_color
    
    num_extra = random.randint(1, 10)
    for _ in range(num_extra):
        while True:
            r = random.randint(0, height - 1)
            c = random.randint(0, width - 1)
            if r % 2 == 0 and c % 2 == 0:
                continue
            input_grid[r][c] = extra_color
            break
    
    output_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] == 0:
                continue
            if c + 2 < width and input_grid[r][c + 2] != 0 and r + 2 < height and input_grid[r + 2][c] != 0:
                output_grid[r][c] = input_grid[r][c]
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0]) if height else 0
    output_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] == 0:
                continue
            if c + 2 < width and input_grid[r][c + 2] != 0 and r + 2 < height and input_grid[r + 2][c] != 0:
                output_grid[r][c] = input_grid[r][c]
    return output_grid
