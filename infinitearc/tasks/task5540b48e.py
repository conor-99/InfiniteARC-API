# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-02
# ---------------------------------------------------------------

"""
Task ID: 5540b48e
Difficulty: easy

=== Tags ===
- Separate shapes
- Compare image
- Count ver lines
- Even or odd

=== Description ===
The task involves transforming an input grid into an output grid based on the
parity of the count of vertical lines. The input grid contains distinct vertical
lines represented by color 1 (e.g., columns where at least one cell has color
1). The transformation rule is as follows: count the number of columns
containing color 1. If the count is even, the output grid adds a horizontal line
(all cells in the middle row set to color 2) while preserving all other elements
of the input. If the count is odd, the output grid adds a vertical line (all
cells in the middle column set to color 2) while preserving all other elements.
The middle row is determined by the grid's height (row = height // 2), and the
middle column by the grid's width (column = width // 2). This rule relies on
visual cues (presence of vertical lines, parity check) rather than numerical
computations or pixel-level manipulations, making it accessible for "easy"
difficulty.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    from common import grid
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    input_grid = grid(width, height, 0)
    middle_row = height // 2
    middle_col = width // 2
    for col in range(width):
        if col == middle_col:
            continue
        if random.random() < 0.5:
            row = random.randint(0, height - 1)
            input_grid[row][col] = 1
    N = 0
    for col in range(width):
        if any(input_grid[r][col] == 1 for r in range(height)):
            N += 1
    output_grid = [row[:] for row in input_grid]
    if N % 2 == 0:
        for col in range(width):
            output_grid[middle_row][col] = 2
    else:
        for row in range(height):
            output_grid[row][middle_col] = 2
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    input_grid = [list(row) for row in input_grid]
    height = len(input_grid)
    width = len(input_grid[0])
    middle_row = height // 2
    middle_col = width // 2
    N = 0
    for col in range(width):
        for row in range(height):
            if input_grid[row][col] == 1:
                N += 1
                break
    output_grid = [row[:] for row in input_grid]
    if N % 2 == 0:
        for col in range(width):
            output_grid[middle_row][col] = 2
    else:
        for row in range(height):
            output_grid[row][middle_col] = 2
    return output_grid
