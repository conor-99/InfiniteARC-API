# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: e0d2d196
Difficulty: medium

=== Tags ===
- Diagonals
- Recolor

=== Description ===
The task involves transforming an input grid by recoloring all elements along
the main diagonal (positions where the row index equals the column index) to a
fixed target color (e.g., 5). For grids with dimensions m√ón, the main diagonal
consists of positions (i, i) for all i where i < min(m, n). The output grid
retains all non-diagonal elements unchanged while setting every diagonal element
to the target color. The input grid is constructed to ensure no diagonal element
already equals the target color, guaranteeing the output differs from the input.
This requires recognizing the geometric pattern of the main diagonal across
varying grid sizes and applying a consistent color replacement rule.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    min_dim = min(width, height)
    input_grid = [[0] * width for _ in range(height)]
    for i in range(height):
        for j in range(width):
            if i == j and i < min_dim:
                color = random.choice([c for c in range(10) if c != 5])
                input_grid[i][j] = color
            else:
                input_grid[i][j] = random.randint(0, 9)
    output_grid = [row[:] for row in input_grid]
    for i in range(min_dim):
        output_grid[i][i] = 5
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    height = len(input_grid)
    width = len(input_grid[0])
    min_dim = min(height, width)
    output_grid = [row[:] for row in input_grid]
    for i in range(min_dim):
        output_grid[i][i] = 5
    return output_grid
