# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-09
# ---------------------------------------------------------------

"""
Task ID: 42fd1e10
Difficulty: medium

=== Tags ===
- Propagate label
- Draw line from border

=== Description ===
The task involves transforming an input grid into an output grid by propagating
non-zero colors from the grid's borders inward. Each border cell (top, bottom,
left, or right) with a non-zero color (C) initiates a straight-line propagation
in the direction perpendicular to the border: downward for top-border cells,
upward for bottom-border cells, rightward for left-border cells, and leftward
for right-border cells. The propagation fills all consecutive background (0)
cells in the direction with color C until encountering a non-zero cell (which
represents another object). The output grid differs from the input as background
cells along the propagation path are overwritten with C, while non-zero cells
remain unchanged. This rule requires recognizing border cells, determining the
direction of propagation, and identifying the stopping point at non-zero cells,
making it a medium-difficulty task requiring spatial reasoning and directional
logic.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(3, 30)
    height = random.randint(3, 30)
    input_grid = [[0] * width for _ in range(height)]
    top_border = [(0, c) for c in range(width)]
    bottom_border = [(height-1, c) for c in range(width)]
    left_border = [(r, 0) for r in range(height)]
    right_border = [(r, width-1) for r in range(height)]
    
    top_cells = random.sample(top_border, random.randint(1, len(top_border)))
    for r, c in top_cells:
        input_grid[r][c] = random.randint(1, 9)
    
    bottom_cells = random.sample(bottom_border, random.randint(1, len(bottom_border)))
    for r, c in bottom_cells:
        input_grid[r][c] = random.randint(1, 9)
    
    left_cells = random.sample(left_border, random.randint(1, len(left_border)))
    for r, c in left_cells:
        input_grid[r][c] = random.randint(1, 9)
    
    right_cells = random.sample(right_border, random.randint(1, len(right_border)))
    for r, c in right_cells:
        input_grid[r][c] = random.randint(1, 9)
    
    output_grid = [row[:] for row in input_grid]
    
    for c in range(width):
        if input_grid[0][c] != 0:
            color = input_grid[0][c]
            for r in range(1, height):
                if output_grid[r][c] == 0:
                    output_grid[r][c] = color
                else:
                    break
    
    for c in range(width):
        if input_grid[height-1][c] != 0:
            color = input_grid[height-1][c]
            for r in range(height-2, -1, -1):
                if output_grid[r][c] == 0:
                    output_grid[r][c] = color
                else:
                    break
    
    for r in range(height):
        if input_grid[r][0] != 0:
            color = input_grid[r][0]
            for c in range(1, width):
                if output_grid[r][c] == 0:
                    output_grid[r][c] = color
                else:
                    break
    
    for r in range(height):
        if input_grid[r][width-1] != 0:
            color = input_grid[r][width-1]
            for c in range(width-2, -1, -1):
                if output_grid[r][c] == 0:
                    output_grid[r][c] = color
                else:
                    break
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    input_grid = [list(row) for row in input_grid]
    width = len(input_grid[0])
    height = len(input_grid)
    output_grid = [row[:] for row in input_grid]
    
    for c in range(width):
        if input_grid[0][c] != 0:
            color = input_grid[0][c]
            for r in range(1, height):
                if output_grid[r][c] == 0:
                    output_grid[r][c] = color
                else:
                    break
    
    for c in range(width):
        if input_grid[height-1][c] != 0:
            color = input_grid[height-1][c]
            for r in range(height-2, -1, -1):
                if output_grid[r][c] == 0:
                    output_grid[r][c] = color
                else:
                    break
    
    for r in range(height):
        if input_grid[r][0] != 0:
            color = input_grid[r][0]
            for c in range(1, width):
                if output_grid[r][c] == 0:
                    output_grid[r][c] = color
                else:
                    break
    
    for r in range(height):
        if input_grid[r][width-1] != 0:
            color = input_grid[r][width-1]
            for c in range(width-2, -1, -1):
                if output_grid[r][c] == 0:
                    output_grid[r][c] = color
                else:
                    break
    
    return output_grid
