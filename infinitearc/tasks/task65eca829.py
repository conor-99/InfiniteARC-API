# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: 65eca829
Difficulty: hard

=== Tags ===
- Associate colors to patterns
- Symmetry completion
- Associate colors to colors

=== Description ===
The task involves transforming an input grid into a symmetric output grid by
completing the missing half through reflection and applying a consistent color
mapping. The input grid is asymmetric, typically with the left half containing
non-zero colors and the right half filled with zeros (background). The output
grid must be symmetric with respect to the vertical axis, meaning the right half
mirrors the left half. Crucially, each non-zero color in the input is mapped to
a distinct target color in the output according to a fixed permutation (e.g.,
color 1 maps to 3, 2 to 5, etc.), while zero remains unchanged. The solver must
deduce the color mapping rule from the input-output pairs, as it is not
explicitly provided. The symmetry completion requires identifying the vertical
axis (center column) and reflecting the left half’s structure to the right, with
colors transformed via the inferred mapping. The challenge lies in recognizing
both the symmetry operation and the non-trivial color permutation, which is not
a simple arithmetic shift but a consistent permutation of colors 1–9.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid

def generate():
    color_perm = {i: (i % 9) + 1 for i in range(1,10)}
    width = random.choice(range(2, 31, 2))
    height = random.randint(1, 30)
    input_grid = grid(width, height, 0)
    for r in range(height):
        for c in range(width//2):
            input_grid[r][c] = random.randint(1,9)
    output_grid = grid(width, height, 0)
    for r in range(height):
        for c in range(width//2):
            color = input_grid[r][c]
            new_color = color_perm[color]
            output_grid[r][c] = new_color
            output_grid[r][width - 1 - c] = new_color
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    width = len(input_grid[0])
    height = len(input_grid)
    color_perm = {i: (i % 9) + 1 for i in range(1,10)}
    output_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width//2):
            color = input_grid[r][c]
            new_color = color_perm[color]
            output_grid[r][c] = new_color
            output_grid[r][width - 1 - c] = new_color
    return output_grid
