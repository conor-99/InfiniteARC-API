# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-09
# ---------------------------------------------------------------

"""
Task ID: 60fe4735
Difficulty: easy

=== Tags ===
- Detect wall
- Snap objects to gridlines

=== Description ===
The task involves transforming input grids where walls are represented by the
color 1. All other colors (2-9) represent movable objects. The output grid is
generated by shifting each object to the leftmost available position within its
row, maintaining their relative order, while keeping walls (color 1) fixed in
place. This results in all objects being aligned to the left edge of the grid,
with walls acting as immovable barriers that prevent objects from crossing into
their columns. The transformation is visually intuitive, relying on detecting
wall positions and snapping objects to the nearest gridline (left edge of the
grid) without overlapping walls.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(2, 30)
    height = random.randint(1, 30)
    grid = [[0] * width for _ in range(height)]
    
    # Ensure at least one wall
    if random.random() < 0.8:
        for r in range(height):
            for c in range(width):
                if random.random() < 0.3:
                    grid[r][c] = 1
    else:
        r, c = random.randint(0, height-1), random.randint(0, width-1)
        grid[r][c] = 1
    
    # Ensure each row has 0 followed by non-wall (2-9)
    for r in range(height):
        c = random.randint(0, width-2)
        if grid[r][c] == 1:
            grid[r][c] = 0
        grid[r][c+1] = random.randint(2, 9)
    
    output = []
    for row in grid:
        non_walls = [x for x in row if 2 <= x <= 9]
        new_row = []
        idx = 0
        for x in row:
            if x == 1:
                new_row.append(1)
            else:
                if idx < len(non_walls):
                    new_row.append(non_walls[idx])
                    idx += 1
                else:
                    new_row.append(0)
        output.append(new_row)
    return {"input": grid, "output": output}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    output = []
    for row in input_grid:
        non_walls = [x for x in row if 2 <= x <= 9]
        new_row = []
        idx = 0
        for x in row:
            if x == 1:
                new_row.append(1)
            else:
                if idx < len(non_walls):
                    new_row.append(non_walls[idx])
                    idx += 1
                else:
                    new_row.append(0)
        output.append(new_row)
    return output
