# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-03
# ---------------------------------------------------------------

"""
Task ID: c7853382
Difficulty: medium

=== Tags ===
- Periodic run length encoding

=== Description ===
Each input grid contains horizontal runs of identical colors. The output grid
replaces each horizontal run of length L ≥ 2 with a sequence where colors
alternate between the original color and the next color (mod 10), starting with
the original. For example, a run of three 2s becomes [2, 3, 2]. Runs of length 1
remain unchanged, but all input grids include at least one run of length ≥ 2 to
ensure the output differs from the input. The transformation uses a fixed period
of 2 for the alternation.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(2, 30)
    height = random.randint(1, 30)
    grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    grid[0][0] = random.randint(0, 9)
    grid[0][1] = grid[0][0]
    output = []
    for row in grid:
        new_row = []
        i = 0
        while i < len(row):
            j = i
            color = row[i]
            while j < len(row) and row[j] == color:
                j += 1
            length = j - i
            if length >= 2:
                for k in range(length):
                    new_color = color if k % 2 == 0 else (color + 1) % 10
                    new_row.append(new_color)
            else:
                new_row.append(color)
            i = j
        output.append(new_row)
    return {"input": grid, "output": output}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    output = []
    for row in input_grid:
        new_row = []
        i = 0
        while i < len(row):
            j = i
            color = row[i]
            while j < len(row) and row[j] == color:
                j += 1
            length = j - i
            if length >= 2:
                for k in range(length):
                    new_color = color if k % 2 == 0 else (color + 1) % 10
                    new_row.append(new_color)
            else:
                new_row.append(color)
            i = j
        output.append(new_row)
    return output
