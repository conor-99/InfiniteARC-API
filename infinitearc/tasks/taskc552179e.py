# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-04
# ---------------------------------------------------------------

"""
Task ID: c552179e
Difficulty: medium–hard

=== Tags ===
- Region partitioning
- Multi object alignment
- Cylindrical

=== Description ===
Input grids feature a target region shaped as a closed ring (a single loop with
a central hole), outlined in a distinct color. Scattered outside this ring are
multiple compact tile-shaped objects, each composed of 2-4 connected cells with
colored border segments (colors between 1-9). Each tile can be rotated but not
reflected.    The output grid must fill the target ring completely with these
tiles, satisfying three key constraints:   1. **Adjacent edge matching**: All
touching borders between tiles must share identical colors.   2. **Cylindrical
alignment**: The leftmost and rightmost edges of the ring (in the grid's linear
representation) must match in color as if the ring were wrapped into a cylinder
(i.e., the ring's left and right boundaries connect seamlessly).   3.
**Structural integrity**: Tiles must cover the ring exactly without overlap,
gaps, or extending beyond the outline. The ring's original outline remains
visible beneath the tiling, and unused tiles stay outside the ring.    The task
requires recognizing the cylindrical constraint (left-right edge matching) as a
critical component of the solution, alongside multi-tile alignment and region
partitioning. The complexity arises from the need to simultaneously satisfy
edge-matching rules across the entire ring while accounting for the wrap-around
cylindrical condition—a non-obvious requirement that distinguishes this from
standard tiling puzzles.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
import common

def generate():
    width = random.randint(10, 15)
    height = random.randint(10, 15)
    grid = common.grid(width, height, 0)
    
    # Draw ring outline (6x6 border)
    ring_size = 6
    ring_top = 2
    ring_left = 2
    ring_bottom = ring_top + ring_size - 1
    ring_right = ring_left + ring_size - 1
    
    # Draw ring outline in color 1
    for c in range(ring_left, ring_right + 1):
        grid[ring_top][c] = 1
        grid[ring_bottom][c] = 1
    for r in range(ring_top + 1, ring_bottom):
        grid[r][ring_left] = 1
        grid[r][ring_right] = 1
    
    # Place tiles outside the ring
    tile_y_start = ring_bottom + 2
    for i in range(4):
        tile_x_start = random.randint(0, width - 1)
        tile_length = random.randint(2, 4)
        for c in range(tile_length):
            if tile_x_start + c < width:
                grid[tile_y_start][tile_x_start + c] = random.randint(2, 9)
    
    # Create output by filling ring area with color 2
    output = [row[:] for row in grid]
    for r in range(ring_top + 1, ring_bottom):
        for c in range(ring_left + 1, ring_right):
            output[r][c] = 2
    
    return {
        'input': grid,
        'output': output
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    grid = [list(row) for row in input_grid]
    
    # Find ring boundaries
    ring_top = 2
    ring_left = 2
    ring_bottom = 7
    ring_right = 7
    
    # Fill the ring area with color 2
    for r in range(ring_top + 1, ring_bottom):
        for c in range(ring_left + 1, ring_right):
            grid[r][c] = 2
    
    return tuple(tuple(row) for row in grid)
