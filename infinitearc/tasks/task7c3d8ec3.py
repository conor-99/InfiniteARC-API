# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: 7c3d8ec3
Difficulty: easy

=== Tags ===
- Connect the dots
- Pattern coloring
- Direction guessing
- Take minimum

=== Description ===
The task involves connecting two distinct colored dots (non-zero cells) in the
input grid with a straight line of the minimum color value between the two dots.
The input grid contains exactly two non-zero cells (the dots) aligned either
horizontally or vertically, with all other cells set to zero. The output grid
retains the original dot colors but fills all cells between them with the color
representing the minimum value of the two dots' colors. For example, if the dots
are colored 4 and 7, the connecting line uses color 4. The direction (horizontal
or vertical) is determined by the relative positions of the dots, ensuring the
connection is unambiguous. This rule requires recognizing the dot positions,
identifying the minimum color, and applying it to the path between them, making
it accessible for beginners through clear visual patterns and minimal steps.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid

def generate():
    direction = random.choice(['horizontal', 'vertical'])
    
    if direction == 'horizontal':
        width = random.randint(3, 30)
        height = random.randint(1, 30)
        row = random.randint(0, height-1)
        col1 = random.randint(0, width-3)
        col2 = random.randint(col1+2, width-1)
    else:
        height = random.randint(3, 30)
        width = random.randint(1, 30)
        col = random.randint(0, width-1)
        row1 = random.randint(0, height-3)
        row2 = random.randint(row1+2, height-1)
    
    colors = list(range(1, 10))
    color1 = random.choice(colors)
    colors.remove(color1)
    color2 = random.choice(colors)
    min_color = min(color1, color2)
    
    input_grid = grid(width, height, 0)
    if direction == 'horizontal':
        input_grid[row][col1] = color1
        input_grid[row][col2] = color2
    else:
        input_grid[row1][col] = color1
        input_grid[row2][col] = color2
    
    output_grid = [row[:] for row in input_grid]
    if direction == 'horizontal':
        for c in range(col1+1, col2):
            output_grid[row][c] = min_color
    else:
        for r in range(row1+1, row2):
            output_grid[r][col] = min_color
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    output_grid = [row[:] for row in input_grid]
    non_zero = []
    for r in range(len(input_grid)):
        for c in range(len(input_grid[0])):
            if input_grid[r][c] > 0:
                non_zero.append((r, c))
    
    if len(non_zero) != 2:
        return output_grid
    
    (r1, c1), (r2, c2) = non_zero
    color1 = input_grid[r1][c1]
    color2 = input_grid[r2][c2]
    min_color = min(color1, color2)
    
    if r1 == r2:
        start, end = sorted([c1, c2])
        for c in range(start + 1, end):
            output_grid[r1][c] = min_color
    elif c1 == c2:
        start, end = sorted([r1, r2])
        for r in range(start + 1, end):
            output_grid[r][c1] = min_color
    return output_grid
