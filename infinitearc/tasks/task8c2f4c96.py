# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-02
# ---------------------------------------------------------------

"""
Task ID: 8c2f4c96
Difficulty: hard

=== Tags ===
- Infer hidden grid

=== Description ===
The task involves transforming input grids into output grids by inferring a
hidden grid through a two-step process. The input grid is derived from the
hidden grid by first rotating it 90 degrees clockwise and then swapping two
specific colors (e.g., color 2 and color 3). The hidden grid, which is the
output, can be recovered by reversing these operations: rotating the input 90
degrees counterclockwise and swapping the same two colors back. The complexity
arises from the need to simultaneously identify the rotation direction and
deduce the color mapping through pattern analysis. Input grids feature intricate
arrangements of multiple colors, with the color swap obscuring the hidden grid's
structure. Solvers must recognize rotational symmetry and correlate color shifts
across the grid to reconstruct the original hidden grid, requiring multi-step
abstract reasoning rather than simple visual matching.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
def generate():
    while True:
        width = random.randint(1, 30)
        height = random.randint(1, 30)
        hidden = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
        
        rotated = [list(x)[::-1] for x in zip(*hidden)]
        
        for i in range(len(rotated)):
            for j in range(len(rotated[0])):
                if rotated[i][j] == 2:
                    rotated[i][j] = 3
                elif rotated[i][j] == 3:
                    rotated[i][j] = 2
        
        if rotated != hidden:
            return {
                "input": rotated,
                "output": hidden
            }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    # Convert input to list of lists if it's a tuple
    if isinstance(input_grid[0], tuple):
        input_grid = [list(row) for row in input_grid]
    
    for i in range(len(input_grid)):
        for j in range(len(input_grid[0])):
            if input_grid[i][j] == 2:
                input_grid[i][j] = 3
            elif input_grid[i][j] == 3:
                input_grid[i][j] = 2
    
    transposed = list(zip(*input_grid))
    rotated_ccw = [list(x) for x in transposed[::-1]]
    
    return rotated_ccw
