# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-08
# ---------------------------------------------------------------

"""
Task ID: c032f554
Difficulty: easy

=== Tags ===
- Draw line from border

=== Description ===
The input grid contains a single connected region (a group of adjacent non-zero
pixels) that does not touch the top border. The output grid replicates the input
but adds a vertical line from the top border (row 0) to the topmost row of the
region. The line spans all rows between the top border and the region's top row,
using the same color as the region. The line is drawn in the column
corresponding to the region's leftmost position within its top row. This
transformation is visually consistent and requires no numerical computation,
relying solely on spatial relationships and connectivity.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import common
    width = common.randint(3, 30)
    height = common.randint(3, 30)
    size = common.randint(3, 9)
    creature_pixels = common.continuous_creature(size, 3, 3)
    shifted_pixels = [(r + 1, c) for (r, c) in creature_pixels]
    top_row = min(r for r, c in shifted_pixels)
    top_row_pixels = [(r, c) for r, c in shifted_pixels if r == top_row]
    leftmost_col = min(c for r, c in top_row_pixels)
    input_grid = common.grid(width, height, 0)
    region_color = common.random_color(exclude=[0])
    for r, c in shifted_pixels:
        if 0 <= r < height and 0 <= c < width:
            input_grid[r][c] = region_color
    output_grid = [row[:] for row in input_grid]
    for r in range(0, top_row + 1):
        output_grid[r][leftmost_col] = region_color
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    non_zero = []
    for r in range(len(input_grid)):
        for c in range(len(input_grid[0])):
            if input_grid[r][c] != 0:
                non_zero.append((r, c))
    if not non_zero:
        return input_grid
    top_row = min(r for r, c in non_zero)
    top_row_pixels = [(r, c) for r, c in non_zero if r == top_row]
    leftmost_col = min(c for r, c in top_row_pixels)
    color = input_grid[top_row][leftmost_col]
    output_grid = [row[:] for row in input_grid]
    for r in range(0, top_row + 1):
        output_grid[r][leftmost_col] = color
    return output_grid
