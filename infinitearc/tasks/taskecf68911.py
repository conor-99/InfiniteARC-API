# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: ecf68911
Difficulty: medium

=== Tags ===
- Stripe detection

=== Description ===
The task involves detecting horizontal stripes (rows where all elements are
identical) in the input grid and transforming them into vertical stripes in the
output grid. Specifically, for each row in the input that forms a horizontal
stripe (all cells in the row share the same color), the corresponding column in
the output grid is set to that color for all rows. All other columns in the
output grid (corresponding to rows that are not horizontal stripes in the input)
are set to 0. This transformation requires identifying uniform rows and mapping
them to vertical columns, creating a clear visual pattern where horizontal
stripes in the input become vertical stripes in the output. The solution is
deterministic, relying solely on visual pattern recognition without numerical
computations or pixel-level matching.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common
import random

def generate():
    while True:
        H = random.randint(1, 30)
        W = random.randint(1, 30)
        input_grid = [[0] * W for _ in range(H)]
        has_stripe = False
        
        for r in range(H):
            if random.random() > 0.5:
                color = common.random_color(exclude=[0])
                input_grid[r] = [color] * W
                has_stripe = True
            else:
                color1 = common.random_color(exclude=[0])
                color2 = common.random_color(exclude=[0, color1])
                row = [color1] * (W // 2) + [color2] * (W - W // 2)
                random.shuffle(row)
                input_grid[r] = row
        
        if not has_stripe:
            continue
        
        output_grid = [[0] * W for _ in range(H)]
        for j in range(W):
            if j < H and all(x == input_grid[j][0] for x in input_grid[j]):
                c = input_grid[j][0]
                for i in range(H):
                    output_grid[i][j] = c
        
        if input_grid == output_grid:
            continue
        else:
            break
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    H = len(input_grid)
    W = len(input_grid[0])
    output_grid = [[0] * W for _ in range(H)]
    for j in range(W):
        if j < H and all(x == input_grid[j][0] for x in input_grid[j]):
            c = input_grid[j][0]
            for i in range(H):
                output_grid[i][j] = c
    return output_grid
