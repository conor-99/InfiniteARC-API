# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-08
# ---------------------------------------------------------------

"""
Task ID: 75d92527
Difficulty: easy

=== Tags ===
- Detect grid

=== Description ===
The task involves detecting a grid structure formed by solid horizontal and
vertical lines within the input grid. The input grid contains rows and columns
that are entirely filled with a single color (e.g., color 1), representing
horizontal and vertical grid lines. The output grid retains only the
intersections of these lines—cells where both a full horizontal line (entire
row) and full vertical line (entire column) meet—while setting all other cells
to a background color (e.g., 0). For example, if rows 0 and 2 are entirely color
1 and columns 0 and 2 are entirely color 1, the output will have color 1 only at
positions (0,0), (0,2), (2,0), and (2,2), with all other cells set to 0. This
transformation is visually intuitive and requires no numerical computation,
relying solely on recognizing solid row and column patterns.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(2, 30)
    height = random.randint(2, 30)
    
    R_size = random.randint(1, height - 1)
    R = random.sample(range(height), R_size)
    
    C_size = random.randint(1, width - 1)
    C = random.sample(range(width), C_size)
    
    input_grid = [[0] * width for _ in range(height)]
    for r in R:
        for c in range(width):
            input_grid[r][c] = 1
    for c in C:
        for r in range(height):
            input_grid[r][c] = 1
    
    output_grid = [[0] * width for _ in range(height)]
    for r in R:
        for c in C:
            output_grid[r][c] = 1
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    R = []
    for r in range(height):
        if all(x == 1 for x in input_grid[r]):
            R.append(r)
    C = []
    for c in range(width):
        if all(input_grid[r][c] == 1 for r in range(height)):
            C.append(c)
    output_grid = [[0] * width for _ in range(height)]
    for r in R:
        for c in C:
            output_grid[r][c] = 1
    return output_grid
