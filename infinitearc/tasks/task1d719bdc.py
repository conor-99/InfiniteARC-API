# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-08
# ---------------------------------------------------------------

"""
Task ID: 1d719bdc
Difficulty: easy

=== Tags ===
- Measure area
- Image expasion
- Seal gaps inside shape

=== Description ===
The task involves transforming a grid where a single-colored shape (e.g., color
5) contains internal gaps (empty cells surrounded by the shape's color). The
output grid is generated by filling all such internal gaps with the shape's
color. The input grid is a 2D grid with dimensions between 1×1 and 30×30,
containing a connected region of a single non-zero color (e.g., 5) and some
empty cells (0) entirely enclosed within this region. The output grid is
identical to the input except that all enclosed empty cells are replaced with
the shape's color, resulting in a solid shape without internal gaps. The
transformation relies solely on visual structure: empty cells fully surrounded
by the shape's color (connected via edges) are filled, while edge cells or gaps
not enclosed remain unchanged. This rule is consistent and discoverable through
simple visual inspection of input-output pairs.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common
import random

def generate():
    width = random.randint(3, 30)
    height = random.randint(3, 30)
    C = random.randint(1, 9)
    input_grid = common.grid(width, height, C)
    inner_pixels = []
    for r in range(1, height - 1):
        for c in range(1, width - 1):
            inner_pixels.append((r, c))
    if not inner_pixels:
        return {"input": input_grid, "output": input_grid}
    num_zeros = random.randint(1, len(inner_pixels))
    selected = random.sample(inner_pixels, num_zeros)
    for r, c in selected:
        input_grid[r][c] = 0
    output_grid = [[C if cell == 0 else cell for cell in row] for row in input_grid]
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    non_zero = set()
    for row in input_grid:
        for cell in row:
            if cell != 0:
                non_zero.add(cell)
    C = next(iter(non_zero)) if non_zero else 0
    return [[C if cell == 0 else cell for cell in row] for row in input_grid]
