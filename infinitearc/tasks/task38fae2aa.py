# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-08
# ---------------------------------------------------------------

"""
Task ID: 38fae2aa
Difficulty: easy

=== Tags ===
- Rectangle guessing
- Cylindrical
- Diagonals
- Bring patterns close

=== Description ===
The task involves input grids containing two axis-aligned rectangles of the same
color, positioned such that their top-left corners form a diagonal pattern
(e.g., one rectangle at (r, c) and another at (r+2, c+2)). The output grid is
generated by shifting the rightmost rectangle horizontally toward the leftmost
rectangle, wrapping around the grid's edges (cylindrical property) until the
rectangles are adjacent. This transformation brings the diagonal patterns closer
together while preserving their orientation and color. The cylindrical aspect
ensures that horizontal movement from the leftmost column transitions to the
rightmost column, allowing minimal-distance shifts even when rectangles are
positioned near opposite edges.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(5, 10)
    height = random.randint(5, 10)
    color = random.randint(1, 9)
    r1 = random.randint(0, height - 3)
    c1 = random.randint(0, width - 3)
    d = random.randint(2, min(height - r1 - 1, width - c1 - 1))
    r2 = r1 + d
    c2 = c1 + d
    input_grid = [[0] * width for _ in range(height)]
    input_grid[r1][c1] = color
    input_grid[r2][c2] = color
    new_c = (c1 + 1) % width
    output_grid = [[0] * width for _ in range(height)]
    output_grid[r1][c1] = color
    output_grid[r2][new_c] = color
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    width = len(input_grid[0])
    height = len(input_grid)
    non_zero = []
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 0:
                non_zero.append((r, c, input_grid[r][c]))
    non_zero.sort(key=lambda x: x[1])
    r1, c1, color = non_zero[0]
    r2, c2, _ = non_zero[1]
    new_c = (c1 + 1) % width
    output_grid = [[0] * width for _ in range(height)]
    output_grid[r1][c1] = color
    output_grid[r2][new_c] = color
    return output_grid
