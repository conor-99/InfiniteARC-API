# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-09
# ---------------------------------------------------------------

"""
Task ID: c96eb1fd
Difficulty: easy

=== Tags ===
- Maze
- Fill single gap
- Find the intruder

=== Description ===
The input grids depict simple maze structures composed of two distinct colors:
one for walls (e.g., red) and one for the path (e.g., green). The maze contains
exactly one wall cell that disrupts the continuity of the path, creating a
single gap. The task requires identifying this single "intruder" (the misplaced
wall cell) and replacing it with the path color to restore the uninterrupted
path. The output grid is identical to the input except for this single corrected
cell, filling the gap while preserving all other maze features. The solution is
visually straightforward, as the gap is the only deviation from a continuous
path, making it discoverable through simple pattern recognition.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(5, 15)
    height = random.randint(5, 15)
    grid_input = [[2]*width for _ in range(height)]
    
    if random.choice([True, False]):
        # horizontal
        r = random.randint(1, height-2)
        c_start = random.randint(1, width - 4)
        c_end = c_start + random.randint(3, width - c_start - 1)
        for c in range(c_start, c_end):
            grid_input[r][c] = 3
        c_in = random.randint(c_start + 1, c_end - 2)
        grid_input[r][c_in] = 2
        grid_output = [row[:] for row in grid_input]
        grid_output[r][c_in] = 3
    else:
        # vertical
        c = random.randint(1, width-2)
        r_start = random.randint(1, height - 4)
        r_end = r_start + random.randint(3, height - r_start - 1)
        for r in range(r_start, r_end):
            grid_input[r][c] = 3
        r_in = random.randint(r_start + 1, r_end - 2)
        grid_input[r_in][c] = 2
        grid_output = [row[:] for row in grid_input]
        grid_output[r_in][c] = 3
    
    return {"input": grid_input, "output": grid_output}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    height = len(input_grid)
    width = len(input_grid[0])
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] == 2:
                if (c > 0 and c < width - 1 and 
                    input_grid[r][c-1] == 3 and input_grid[r][c+1] == 3):
                    output = [row[:] for row in input_grid]
                    output[r][c] = 3
                    return output
                if (r > 0 and r < height - 1 and 
                    input_grid[r-1][c] == 3 and input_grid[r+1][c] == 3):
                    output = [row[:] for row in input_grid]
                    output[r][c] = 3
                    return output
    return input_grid
