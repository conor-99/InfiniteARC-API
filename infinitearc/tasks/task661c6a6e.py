# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: 661c6a6e
Difficulty: medium

=== Tags ===
- Take half
- Associate images to bools
- Associate colors to colors
- Associate patterns to patterns

=== Description ===
The task involves transforming an input grid into an output grid through two
primary operations. First, the input grid is halved horizontally by retaining
only the left half of each row (i.e., for a grid with width `w`, the output grid
has width `floor(w/2)`). Second, each color in the left half is mapped to a
distinct target color via a fixed, deterministic association (e.g., color 2 →
color 3, color 5 → color 7). This color mapping is consistent across all grids
in the task and is based on predefined rules (e.g., mapping even colors to the
next higher color, odd colors to the previous lower color). The transformation
preserves the spatial pattern of colors in the left half while altering their
hues according to the color association rule. The output grid thus reflects a
cropped version of the input with all colors replaced by their associated
counterparts, satisfying the "Take half," "Associate colors to colors," and
"Associate patterns to patterns" tags. The "Associate images to bools" tag is
interpreted as the color mapping being derived from a binary classification
(e.g., color parity) that determines the target color, though the output remains
in the 0–9 color range.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def color_map(c):
    if c % 2 == 0:
        return c + 1 if c < 9 else 0
    else:
        return c - 1

def generate():
    width = random.randint(2, 30)
    height = random.randint(1, 30)
    input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    output_width = width // 2
    output_grid = []
    for row in input_grid:
        cropped = row[:output_width]
        mapped = [color_map(c) for c in cropped]
        output_grid.append(mapped)
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def color_map(c):
    if c % 2 == 0:
        return c + 1 if c < 9 else 0
    else:
        return c - 1

def p(input_grid):
    if not input_grid or not input_grid[0]:
        return []
    width = len(input_grid[0])
    output_width = width // 2
    output_grid = []
    for row in input_grid:
        cropped = row[:output_width]
        mapped = [color_map(c) for c in cropped]
        output_grid.append(mapped)
    return output_grid
