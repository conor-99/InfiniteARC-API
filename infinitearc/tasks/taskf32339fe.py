# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-08
# ---------------------------------------------------------------

"""
Task ID: f32339fe
Difficulty: easy

=== Tags ===
- Add corner markers
- Associate colors to images

=== Description ===
The task involves transforming a 2D grid where the main color of a central
object (the most frequent non-zero color) is used to mark the four corners of
the grid. The input grid contains a distinct object (a shape made of a single
non-zero color) against a background of 0. The output grid retains all elements
of the input, but sets the top-left, top-right, bottom-left, and bottom-right
corners to the main color of the object. This creates a visual association
between the object's color and the corner markers, making the transformation
clear and consistent for easy recognition. The rule is deterministic: identify
the dominant color of the object (ignoring background 0), then replace the four
corner cells with that color while preserving all other grid values.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common
import random

def generate():
    width = random.randint(2, 30)
    height = random.randint(2, 30)
    shape_names = ["el", "you", "aitch"]
    while True:
        name = random.choice(shape_names)
        sprite = common.rand_sprite(name, width, height)
        corners = [(0, 0), (0, width-1), (height-1, 0), (height-1, width-1)]
        corners_in_sprite = [corner in sprite for corner in corners]
        if not all(corners_in_sprite):
            break
    color = common.random_color(exclude=[0])
    input_grid = common.grid(width, height, 0)
    for r, c in sprite:
        input_grid[r][c] = color
    output_grid = [row[:] for row in input_grid]
    for r, c in [(0, 0), (0, width-1), (height-1, 0), (height-1, width-1)]:
        output_grid[r][c] = color
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    for r in range(len(input_grid)):
        for c in range(len(input_grid[0])):
            if input_grid[r][c] != 0:
                main_color = input_grid[r][c]
                break
        else:
            continue
        break
    output_grid = [list(row) for row in input_grid]
    height = len(output_grid)
    width = len(output_grid[0])
    output_grid[0][0] = main_color
    output_grid[0][width-1] = main_color
    output_grid[height-1][0] = main_color
    output_grid[height-1][width-1] = main_color
    return output_grid
