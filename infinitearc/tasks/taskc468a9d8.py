# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: c468a9d8
Difficulty: medium

=== Tags ===
- Direction guessing
- Take complement
- Fill between lines

=== Description ===
The input grid contains two parallel lines (either horizontal or vertical) of a
single color. The output grid replaces the area between these lines with a
distinct color (referred to as the "complement" color), which is visually
different from the line color and consistent across all examples. The direction
of the lines (horizontal or vertical) must be identified to correctly determine
the region between them: horizontal lines require filling vertically between
their row positions, while vertical lines require filling horizontally between
their column positions. The complement color is not derived numerically from the
line color but is a fixed, visually distinct color for the task, discoverable
through pattern recognition in the examples.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    from common import grid
    complement_color = 4
    direction = random.choice(['horizontal', 'vertical'])
    if direction == 'horizontal':
        height = random.randint(3, 30)
        width = random.randint(1, 30)
    else:
        width = random.randint(3, 30)
        height = random.randint(1, 30)
    input_grid = grid(width, height, 0)
    output_grid = grid(width, height, 0)
    line_color = random.choice([c for c in range(1, 10) if c != complement_color])
    if direction == 'horizontal':
        r1 = random.randint(0, height - 3)
        r2 = random.randint(r1 + 2, height - 1)
        for c in range(width):
            input_grid[r1][c] = line_color
            input_grid[r2][c] = line_color
        for r in range(r1 + 1, r2):
            for c in range(width):
                output_grid[r][c] = complement_color
        for c in range(width):
            output_grid[r1][c] = line_color
            output_grid[r2][c] = line_color
    else:
        c1 = random.randint(0, width - 3)
        c2 = random.randint(c1 + 2, width - 1)
        for r in range(height):
            input_grid[r][c1] = line_color
            input_grid[r][c2] = line_color
        for c in range(c1 + 1, c2):
            for r in range(height):
                output_grid[r][c] = complement_color
        for r in range(height):
            output_grid[r][c1] = line_color
            output_grid[r][c2] = line_color
    return {'input': input_grid, 'output': output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    elif isinstance(input_grid[0], tuple):
        input_grid = [list(row) for row in input_grid]
    height = len(input_grid)
    width = len(input_grid[0])
    complement_color = 4
    horizontal_lines = []
    for r in range(height):
        if input_grid[r][0] != 0:
            all_same = True
            for c in range(1, width):
                if input_grid[r][c] != input_grid[r][0]:
                    all_same = False
                    break
            if all_same:
                horizontal_lines.append(r)
    vertical_lines = []
    for c in range(width):
        if input_grid[0][c] != 0:
            all_same = True
            for r in range(1, height):
                if input_grid[r][c] != input_grid[0][c]:
                    all_same = False
                    break
            if all_same:
                vertical_lines.append(c)
    output_grid = [row[:] for row in input_grid]
    if len(horizontal_lines) == 2:
        r1, r2 = sorted(horizontal_lines)
        for r in range(r1 + 1, r2):
            for c in range(width):
                output_grid[r][c] = complement_color
    elif len(vertical_lines) == 2:
        c1, c2 = sorted(vertical_lines)
        for c in range(c1 + 1, c2):
            for r in range(height):
                output_grid[r][c] = complement_color
    return output_grid
