# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: d2144402
Difficulty: easy

=== Tags ===
- Repaint border
- Associate patterns to patterns

=== Description ===
The task involves transforming an input grid by repainting its border to match
the color of the top-left cell within the inner grid. The input grids are at
least 3×3 in size, ensuring a valid inner grid exists. The inner grid is defined
as the region excluding the outermost border (i.e., rows 1 to n-2 and columns 1
to m-2 for an n×m grid). The top-left cell of this inner grid (at position (1,1)
in 0-based indexing) determines the color used to repaint all border cells
(first row, last row, first column, last column) in the output grid. Inner cells
remain unchanged. For example, an input grid with a 5 at (1,1) will have all
border cells set to 5 in the output, while the inner structure stays intact.
This rule is consistent, deterministic, and discoverable through simple pattern
association between the inner grid's top-left color and the border's new color.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import randint

def generate():
    width = randint(3, 30)
    height = randint(3, 30)
    input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    inner_color = input_grid[1][1]
    border_cells = []
    for r in [0, height-1]:
        for c in range(width):
            border_cells.append((r, c))
    for c in [0, width-1]:
        for r in range(1, height-1):
            border_cells.append((r, c))
    border_cells = list(set(border_cells))
    all_same = True
    for (r, c) in border_cells:
        if input_grid[r][c] != inner_color:
            all_same = False
            break
    if all_same:
        r, c = border_cells[0]
        new_color = random.randint(0, 9)
        while new_color == inner_color:
            new_color = random.randint(0, 9)
        input_grid[r][c] = new_color
    output_grid = [row[:] for row in input_grid]
    for r in range(height):
        for c in range(width):
            if r == 0 or r == height-1 or c == 0 or c == width-1:
                output_grid[r][c] = inner_color
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    height = len(input_grid)
    width = len(input_grid[0])
    inner_color = input_grid[1][1]
    output_grid = [row[:] for row in input_grid]
    for r in range(height):
        for c in range(width):
            if r == 0 or r == height-1 or c == 0 or c == width-1:
                output_grid[r][c] = inner_color
    return output_grid
