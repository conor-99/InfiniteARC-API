# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-10
# ---------------------------------------------------------------

"""
Task ID: beb99508
Difficulty: easy

=== Tags ===
- Rectangle guessing
- Holes
- Draw x on largest object
- Color palette

=== Description ===
The input grid contains multiple colored rectangles, some of which include
rectangular holes (empty regions within the rectangle). The largest connected
region is determined by counting the number of filled cells (ignoring holes),
where the region's area is the total cells in its bounding box minus any hole
cells. The output grid is identical to the input, except that the two diagonals
(from top-left to bottom-right and top-right to bottom-left) of the bounding box
of the largest region are drawn using a fixed color (e.g., red, color value 2).
All other cells remain unchanged, ensuring the output differs from the input.
The task relies on visual identification of the largest shape and geometric
pattern drawing, avoiding numerical or pixel-based rules.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common

def generate():
    width = common.randint(5, 30)
    height = common.randint(5, 30)
    grid_in = common.grid(width, height, 0)
    colors = [1, 3, 4, 5, 6, 7, 8, 9]
    num_regions = common.randint(2, 4)
    region_colors = common.sample(colors, num_regions)
    
    for color in region_colors:
        r = common.randint(0, height - 3)
        c = common.randint(0, width - 3)
        w = common.randint(3, min(10, width - c))
        h = common.randint(3, min(10, height - r))
        
        for i in range(r, r + h):
            for j in range(c, c + w):
                grid_in[i][j] = color
        hole_r = r + 1
        hole_c = c + 1
        hole_w = w - 2
        hole_h = h - 2
        for i in range(hole_r, hole_r + hole_h):
            for j in range(hole_c, hole_c + hole_w):
                grid_in[i][j] = 0
    
    color_counts = {}
    for r in range(height):
        for c in range(width):
            color = grid_in[r][c]
            if color > 0:
                color_counts[color] = color_counts.get(color, 0) + 1
    largest_color = max(color_counts, key=color_counts.get)
    
    min_row = min(r for r in range(height) for c in range(width) if grid_in[r][c] == largest_color)
    max_row = max(r for r in range(height) for c in range(width) if grid_in[r][c] == largest_color)
    min_col = min(c for r in range(height) for c in range(width) if grid_in[r][c] == largest_color)
    max_col = max(c for r in range(height) for c in range(width) if grid_in[r][c] == largest_color)
    
    grid_out = [row[:] for row in grid_in]
    for i in range(min_row, max_row + 1):
        j = min_col + (i - min_row)
        if j <= max_col:
            grid_out[i][j] = 2
    for i in range(min_row, max_row + 1):
        j = max_col - (i - min_row)
        if j >= min_col:
            grid_out[i][j] = 2
    
    return {'input': grid_in, 'output': grid_out}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import common

def p(input_grid):
    width = len(input_grid[0])
    height = len(input_grid)
    
    color_counts = {}
    for r in range(height):
        for c in range(width):
            color = input_grid[r][c]
            if color > 0:
                color_counts[color] = color_counts.get(color, 0) + 1
    if not color_counts:
        return input_grid
    
    largest_color = max(color_counts, key=color_counts.get)
    
    min_row = min(r for r in range(height) for c in range(width) if input_grid[r][c] == largest_color)
    max_row = max(r for r in range(height) for c in range(width) if input_grid[r][c] == largest_color)
    min_col = min(c for r in range(height) for c in range(width) if input_grid[r][c] == largest_color)
    max_col = max(c for r in range(height) for c in range(width) if input_grid[r][c] == largest_color)
    
    output_grid = [list(row) for row in input_grid]
    
    for i in range(min_row, max_row + 1):
        j = min_col + (i - min_row)
        if j <= max_col:
            output_grid[i][j] = 2
    for i in range(min_row, max_row + 1):
        j = max_col - (i - min_row)
        if j >= min_col:
            output_grid[i][j] = 2
    
    return output_grid
