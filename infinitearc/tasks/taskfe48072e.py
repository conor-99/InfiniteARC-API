# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: fe48072e
Difficulty: easy

=== Tags ===
- Maze

=== Description ===
The input grid represents a maze where path cells are connected orthogonally
(up, down, left, right) and non-zero values indicate path cells, while zero
values represent walls. The output grid is generated by removing all dead-end
path cellsâ€”those path cells that have exactly one neighboring path cell
(orthogonally adjacent). All other path cells and wall cells remain unchanged in
the output. This transformation simplifies the maze by eliminating short,
disconnected branches, leaving only the main continuous path structure.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid, random_you, random_color

def generate():
    width = random.randint(3, 30)
    height = random.randint(3, 30)
    input_grid = grid(width, height, 0)
    path_pixels = random_you(width, height)
    color = random_color(exclude=[0])
    for r, c in path_pixels:
        input_grid[r][c] = color
    output_grid = [row[:] for row in input_grid]
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] == 0:
                continue
            count = 0
            for dr, dc in [(1,0), (-1,0), (0,1), (0,-1)]:
                nr, nc = r + dr, c + dc
                if 0 <= nr < height and 0 <= nc < width and input_grid[nr][nc] != 0:
                    count += 1
            if count == 1:
                output_grid[r][c] = 0
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    width = len(input_grid[0])
    height = len(input_grid)
    output_grid = [row[:] for row in input_grid]
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] == 0:
                continue
            count = 0
            for dr, dc in [(1,0), (-1,0), (0,1), (0,-1)]:
                nr, nc = r + dr, c + dc
                if 0 <= nr < height and 0 <= nc < width and input_grid[nr][nc] != 0:
                    count += 1
            if count == 1:
                output_grid[r][c] = 0
    return output_grid
