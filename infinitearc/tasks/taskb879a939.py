# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-10
# ---------------------------------------------------------------

"""
Task ID: b879a939
Difficulty: medium

=== Tags ===
- Detect hor lines
- Pattern completion
- Associate patterns to colors

=== Description ===
The input grid contains horizontal lines (rows where all cells are the same
color) that alternate between two distinct colors. The output grid completes the
pattern by adding a horizontal line in the missing position with the color that
continues the alternating sequence. For example, if the existing lines are color
A followed by color B, the next line should be color A. The background (non-
horizontal line rows) is filled with a neutral color (0), which is not part of
the pattern. The task requires detecting the horizontal line pattern through
visual inspection and applying the alternating color rule to fill the gap,
without relying on numerical properties of the colors.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(1, 30)
    height = random.randint(3, 30)
    colors = list(range(1, 10))
    c1 = random.choice(colors)
    colors.remove(c1)
    c2 = random.choice(colors)
    i = random.randint(0, height - 3)
    input_grid = [[0] * width for _ in range(height)]
    for j in range(width):
        input_grid[i][j] = c1
        input_grid[i+2][j] = c2
    output_grid = [row[:] for row in input_grid]
    for j in range(width):
        output_grid[i+1][j] = c1
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    width = len(input_grid[0])
    height = len(input_grid)
    non_zero_rows = []
    for r in range(height):
        if any(x != 0 for x in input_grid[r]):
            non_zero_rows.append(r)
    r1, r2 = non_zero_rows[0], non_zero_rows[1]
    c1 = next(x for x in input_grid[r1] if x != 0)
    mid_row = (r1 + r2) // 2
    output = [list(row) for row in input_grid]
    for j in range(width):
        output[mid_row][j] = c1
    return output
