# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-09
# ---------------------------------------------------------------

"""
Task ID: 9a2a33f6
Difficulty: easy

=== Tags ===
- Recolor by count
- Count different colors
- Associate patterns to patterns
- Duplicate column pattern

=== Description ===
The task involves transforming each column of the input grid based on the count
of distinct non-zero colors within that column. For each column, count the
number of different colors present (excluding color 0, which represents empty or
background cells). The output grid is constructed by replacing each column with
a uniform color equal to this count. For example, a column containing three
distinct non-zero colors (e.g., 1, 2, and 3) becomes a column filled entirely
with color 3. This transformation is applied independently to every column,
preserving the grid's dimensions. The rule is visually intuitive: the number of
unique colors in a column directly maps to the single color used to fill that
column in the output, making it discoverable through simple visual inspection of
input-output pairs.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import random_colors

def generate():
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    input_grid = [[0] * width for _ in range(height)]
    output_grid = [[0] * width for _ in range(height)]
    
    for c in range(width):
        max_k = min(9, height)
        k = random.randint(1, max_k)
        if k == 1:
            color = random.randint(2, 9)
            for r in range(height):
                input_grid[r][c] = color
        else:
            colors = random_colors(k)
            col = []
            for i in range(k):
                col.append(colors[i])
            for i in range(k, height):
                col.append(random.choice(colors))
            random.shuffle(col)
            for r in range(height):
                input_grid[r][c] = col[r]
        for r in range(height):
            output_grid[r][c] = k
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    output = [[0] * width for _ in range(height)]
    for c in range(width):
        colors_set = set()
        for r in range(height):
            if input_grid[r][c] != 0:
                colors_set.add(input_grid[r][c])
        count = len(colors_set)
        for r in range(height):
            output[r][c] = count
    return output
