# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-09
# ---------------------------------------------------------------

"""
Task ID: 593692ae
Difficulty: medium

=== Tags ===
- Infer step size
- Pattern deconstruction

=== Description ===
The task involves transforming an input grid into an output grid by identifying
and removing a consistent background pattern. The input grid contains a
repeating sequence of non-background colors separated by a fixed background
color (e.g., 0 or another consistent value). The background color is the one
that appears most frequently in the "gaps" between the non-background elements.
The solver must infer the background color, determine the step size (the
interval between consecutive non-background elements in each row), and
reconstruct the output grid by removing all background elements, leaving only
the sequence of non-background colors. The output grid maintains the same number
of rows as the input, but each row is compressed to contain only the pattern
elements in their original order, with the step size consistent across the grid.
This requires both pattern recognition and step-size inference to deconstruct
the input into its base sequence.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
def generate():
    rows = random.randint(1, 30)
    cols = random.randint(3, 30)
    k = random.randint(3, 5)
    input_grid = [[0] * cols for _ in range(rows)]
    colors = list(range(1, 10))
    for r in range(rows):
        pos = 0
        while pos < cols:
            input_grid[r][pos] = random.choice(colors)
            pos += k
    output_grid = []
    for row in input_grid:
        output_row = [x for x in row if x != 0]
        output_grid.append(output_row)
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

from collections import Counter
def p(input_grid):
    all_colors = [color for row in input_grid for color in row]
    bg = Counter(all_colors).most_common(1)[0][0]
    output = []
    for row in input_grid:
        output.append([x for x in row if x != bg])
    return output
