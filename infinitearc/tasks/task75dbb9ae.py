# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-09
# ---------------------------------------------------------------

"""
Task ID: 75dbb9ae
Difficulty: easy

=== Tags ===
- Recolor
- Obstacles

=== Description ===
In this task, obstacles are represented by the color 7. For every cell
containing an obstacle (7), all orthogonally adjacent cells (up, down, left,
right) are recolored to 3 in the output grid. Obstacle cells (7) remain
unchanged, and all other cells retain their original color. The transformation
applies to all obstacles in the input grid simultaneously, creating a clear
visual pattern where obstacle "influences" spread to immediate neighbors. This
rule is simple to recognize visually without relying on numerical properties,
making it suitable for an easy difficulty level.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    w = random.randint(2, 30)
    h = random.randint(2, 30)
    input_grid = [[random.randint(0, 9) for _ in range(w)] for _ in range(h)]
    
    # Ensure at least one 7 has a non-7 neighbor
    input_grid[0][0] = 7
    if input_grid[0][1] == 7:
        input_grid[0][1] = random.randint(0, 6)
    
    for r in range(h):
        for c in range(w):
            if input_grid[r][c] != 7:
                input_grid[r][c] = random.randint(0, 9)
    
    output_grid = [row[:] for row in input_grid]
    for r in range(h):
        for c in range(w):
            if input_grid[r][c] != 7:
                for dr, dc in [(1,0), (-1,0), (0,1), (0,-1)]:
                    nr, nc = r + dr, c + dc
                    if 0 <= nr < h and 0 <= nc < w and input_grid[nr][nc] == 7:
                        output_grid[r][c] = 3
                        break
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    input_grid = [list(row) for row in input_grid]
    h = len(input_grid)
    w = len(input_grid[0])
    output_grid = [row[:] for row in input_grid]
    for r in range(h):
        for c in range(w):
            if input_grid[r][c] != 7:
                for dr, dc in [(1,0), (-1,0), (0,1), (0,-1)]:
                    nr, nc = r + dr, c + dc
                    if 0 <= nr < h and 0 <= nc < w and input_grid[nr][nc] == 7:
                        output_grid[r][c] = 3
                        break
    return output_grid
