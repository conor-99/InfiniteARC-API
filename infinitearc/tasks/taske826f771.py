# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-08
# ---------------------------------------------------------------

"""
Task ID: e826f771
Difficulty: mediumâ€“hard

=== Tags ===
- Pattern modification

=== Description ===
Staircase to Rectangle  Input grids consist of a single background color and a
contiguous pattern of a different color forming a staircase shape. The staircase
is characterized by having, for each consecutive row within the pattern's
vertical span, an increasing number of adjacent cells of the same color,
starting with one cell in the topmost row of the pattern and incrementing by one
per row downward. The output grid replaces this staircase with a solid rectangle
of the same color, filling all cells within the minimal bounding box that
contains the staircase. The bounding box is defined by the topmost and
bottommost rows, and leftmost and rightmost columns of the staircase pattern,
with all cells inside this rectangle set to the pattern's color. The
transformation requires identifying the staircase structure and expanding it to
fill its bounding box, with no dependency on numerical values or color-specific
rules.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(5, 30)
    height = random.randint(5, 30)
    bg = 0
    color = random.choice([1,2,3,4,5,6,7,8,9])
    n = random.randint(2, 5)
    
    max_r0 = height - n
    max_c0 = width - n
    r0 = random.randint(0, max_r0)
    c0 = random.randint(0, max_c0)
    
    input_grid = [[bg] * width for _ in range(height)]
    output_grid = [[bg] * width for _ in range(height)]
    
    for i in range(n):
        for j in range(i + 1):
            input_grid[r0 + i][c0 + j] = color
    
    for r in range(r0, r0 + n):
        for c in range(c0, c0 + n):
            output_grid[r][c] = color
            
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    input_grid = [list(row) for row in input_grid]
    height = len(input_grid)
    width = len(input_grid[0])
    
    non_zero = []
    color = None
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 0:
                non_zero.append((r, c))
                if color is None:
                    color = input_grid[r][c]
    
    if not non_zero:
        return input_grid
    
    rows = [r for r, c in non_zero]
    cols = [c for r, c in non_zero]
    min_row, max_row = min(rows), max(rows)
    min_col, max_col = min(cols), max(cols)
    
    for r in range(min_row, max_row + 1):
        for c in range(min_col, max_col + 1):
            input_grid[r][c] = color
            
    return input_grid
