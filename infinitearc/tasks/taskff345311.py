# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-10
# ---------------------------------------------------------------

"""
Task ID: ff345311
Difficulty: easy

=== Tags ===
- Associate colors to ranks
- Recolor
- Permute columns by length
- Associate colors to images

=== Description ===
The input grid is a 2D array of colors (values 0-9). To generate the output
grid, two transformations are applied sequentially:    1. **Column
Permutation**: Each column is sorted by the number of non-zero cells it contains
(ascending order). Columns with fewer non-zero cells appear first.   2.
**Recoloring**: Each color in the permuted grid is replaced by the next color in
sequence (0→1, 1→2, ..., 8→9, 9→0).    This transformation relies on visual
associations between colors and their ranks (where a color’s rank equals its
numeric value), with the output grid visually reflecting the permuted column
order and shifted color values. The rules are simple, deterministic, and avoid
mathematical operations, focusing purely on visual pattern recognition.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    col_counts = [sum(1 for r in range(height) if input_grid[r][c] != 0) for c in range(width)]
    sorted_cols = sorted(range(width), key=lambda c: col_counts[c])
    sorted_grid = [[input_grid[r][c] for c in sorted_cols] for r in range(height)]
    output_grid = [[(cell + 1) % 10 for cell in row] for row in sorted_grid]
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    col_counts = [sum(1 for r in range(height) if input_grid[r][c] != 0) for c in range(width)]
    sorted_cols = sorted(range(width), key=lambda c: col_counts[c])
    sorted_grid = [[input_grid[r][c] for c in sorted_cols] for r in range(height)]
    output_grid = [[(cell + 1) % 10 for cell in row] for row in sorted_grid]
    return output_grid
