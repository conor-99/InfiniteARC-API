# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-09
# ---------------------------------------------------------------

"""
Task ID: f0154d9a
Difficulty: medium

=== Tags ===
- Bouncing

=== Description ===
The input grid is a single, uniform color across all cells. The output grid
retains this background color but adds a diagonal line starting at the bottom-
left corner. This line moves upward while alternating direction each time it
reaches the left or right edge of the grid, creating a zig-zag pattern. The line
is rendered in a distinct color that differs from the background, with the
direction reversing upon hitting any vertical boundary. The transformation is
deterministic and based solely on the grid's dimensions and the presence of a
uniform background color.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    H = random.randint(1, 30)
    W = random.randint(1, 30)
    B = random.choice([0, 2, 3, 4, 5, 6, 7, 8, 9])
    input_grid = [[B] * W for _ in range(H)]
    output_grid = [[B] * W for _ in range(H)]
    current_col = 0
    direction = 1
    for r in range(H-1, -1, -1):
        output_grid[r][current_col] = 1
        new_col = current_col + direction
        if new_col < 0 or new_col >= W:
            direction *= -1
            new_col = current_col + direction
        current_col = new_col
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    B = input_grid[0][0]
    H = len(input_grid)
    W = len(input_grid[0])
    output_grid = [[B] * W for _ in range(H)]
    current_col = 0
    direction = 1
    for r in range(H-1, -1, -1):
        output_grid[r][current_col] = 1
        new_col = current_col + direction
        if new_col < 0 or new_col >= W:
            direction *= -1
            new_col = current_col + direction
        current_col = new_col
    return output_grid
