# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-04
# ---------------------------------------------------------------

"""
Task ID: b9d06816
Difficulty: easy

=== Tags ===
- Pattern intersection
- Count shapes

=== Description ===
The input grid contains exactly two distinct patterns: a horizontal line (all
cells in a single row share a non-zero color) and a vertical line (all cells in
a single column share a different non-zero color). These lines intersect at
precisely one cell. The output grid is formed by setting all cells to 0 except
for the intersection cell, which is set to color 3. This task requires
identifying the intersection point of two patterns, with the count of patterns
(two) being a key aspect of the input structure.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid

def generate():
    width = random.randint(3, 30)
    height = random.randint(3, 30)
    
    r = random.randint(1, height-2)
    c = random.randint(1, width-2)
    
    colors = [1,2,4,5,6,7,8,9]
    A = random.choice(colors)
    B = random.choice([color for color in colors if color != A])
    
    input_grid = [[0]*width for _ in range(height)]
    
    for j in range(width):
        input_grid[r][j] = A
    
    for i in range(height):
        if i != r:
            input_grid[i][c] = B
    
    output_grid = [[0]*width for _ in range(height)]
    output_grid[r][c] = 3
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    
    horizontal_row = None
    for r in range(height):
        row = input_grid[r]
        if all(x != 0 for x in row) and len(set(row)) == 1:
            horizontal_row = r
            break
    
    if horizontal_row is None:
        return [[0]*width for _ in range(height)]
    
    X = input_grid[horizontal_row][0]
    
    vertical_col = None
    for c in range(width):
        col = [input_grid[r][c] for r in range(height)]
        count_X = sum(1 for x in col if x == X)
        if count_X != 1:
            continue
        Ys = [x for x in col if x != X]
        if len(set(Ys)) == 1 and Ys[0] != 0:
            vertical_col = c
            break
    
    if vertical_col is None:
        return [[0]*width for _ in range(height)]
    
    output = [[0]*width for _ in range(height)]
    output[horizontal_row][vertical_col] = 3
    return output
