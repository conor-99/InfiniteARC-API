# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-09
# ---------------------------------------------------------------

"""
Task ID: a3f26296
Difficulty: medium

=== Tags ===
- Count hor lines
- Image expansion

=== Description ===
The task involves transforming an input grid into an output grid based on the
count of horizontal lines within the input. A horizontal line is defined as a
row where every cell contains the same non-zero color (e.g., all cells are 1, 2,
etc.). The number of such rows, denoted as *n*, determines the vertical scaling
factor for the output grid. The output grid is formed by repeating each row of
the input grid exactly *n* times, resulting in an output with height equal to
*n* multiplied by the input height, while maintaining the input width. For
example, if the input has 3 rows and 2 horizontal lines (e.g., rows 0 and 2 are
uniform non-zero), the output will have 6 rows (each input row repeated twice).
The transformation ensures the output grid differs from the input by design, as
*n* must be at least 2 to avoid identical grids. This task requires counting
specific patterns and applying a deterministic scaling rule, fitting a medium
difficulty level.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    w = random.randint(1, 30)
    h = random.randint(2, 15)
    max_n = min(30 // h, h)
    n = random.randint(2, max_n)
    
    input_grid = []
    uniform_indices = random.sample(range(h), n)
    colors = random.sample(range(1, 10), n)
    
    for i in range(h):
        if i in uniform_indices:
            color = colors[uniform_indices.index(i)]
            row = [color] * w
        else:
            row = [random.randint(0, 9) for _ in range(w)]
            while all(x == row[0] for x in row) and row[0] != 0:
                idx = random.randint(0, w-1)
                row[idx] = random.randint(0, 9)
        input_grid.append(row)
    
    n_actual = sum(1 for row in input_grid if all(x == row[0] for x in row) and row[0] != 0)
    output_grid = []
    for row in input_grid:
        for _ in range(n_actual):
            output_grid.append(row[:])
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    n = 0
    for row in input_grid:
        if all(x == row[0] for x in row) and row[0] != 0:
            n += 1
    output_grid = []
    for row in input_grid:
        for _ in range(n):
            output_grid.append(row[:])
    return output_grid
