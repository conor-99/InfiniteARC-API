# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: 871daef1
Difficulty: medium

=== Tags ===
- Select every nth column
- Bounce
- Jigsaw

=== Description ===
The task involves selecting every nth column from the input grid (where n is a
fixed integer, such as 2 or 3) and then reversing the order of these selected
columns to form the output grid. For example, if the input grid has columns A,
B, C, D, E and n=2, the selected columns would be A, C, E, which are reversed to
E, C, A in the output. The output grid's width is determined by the number of
selected columns, while its height matches the input grid's height. This
transformation creates a visual effect where columns appear to "bounce" in
sequence (reversing order) and are rearranged like puzzle pieces, reflecting the
jigsaw theme. The rule ensures that the output grid is always distinct from the
input, as reversing column order alters the visual arrangement.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(3, 30)
    height = random.randint(1, 30)
    input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    col_indices = list(range(0, width, 2))
    selected_cols = []
    for idx in col_indices:
        col = [input_grid[r][idx] for r in range(height)]
        selected_cols.append(col)
    reversed_cols = selected_cols[::-1]
    output_grid = []
    for r in range(height):
        output_grid.append([reversed_cols[c][r] for c in range(len(reversed_cols))])
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    col_indices = list(range(0, width, 2))
    selected_cols = []
    for idx in col_indices:
        col = [input_grid[r][idx] for r in range(height)]
        selected_cols.append(col)
    reversed_cols = selected_cols[::-1]
    output_grid = []
    for r in range(height):
        output_grid.append([reversed_cols[c][r] for c in range(len(reversed_cols))])
    return output_grid
