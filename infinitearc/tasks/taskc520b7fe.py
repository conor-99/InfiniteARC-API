# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-10
# ---------------------------------------------------------------

"""
Task ID: c520b7fe
Difficulty: easy

=== Tags ===
- Detect hor lines
- Find the intruder
- Pattern intersection

=== Description ===
The task involves grids where each row (horizontal line) consists of a uniform
color except for a single cell that differs (the intruder). The output grid
corrects this intruder cell to match the dominant color of its row, ensuring all
cells in the row share the same color. The "pattern intersection" refers to the
intruder's position within the horizontal line pattern, where the cell disrupts
the expected uniformity of the row. The transformation is consistent across all
rows containing an intruder, with no input grid matching its output.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common

def generate():
    width = common.randint(2, 30)
    height = common.randint(1, 30)
    input_grid = common.grid(width, height)
    output_grid = common.grid(width, height)
    
    for r in range(height):
        dominant = common.random_color()
        intruder_col = common.randint(0, width-1)
        intruder_color = common.random_color(exclude=[dominant])
        for c in range(width):
            if c == intruder_col:
                input_grid[r][c] = intruder_color
            else:
                input_grid[r][c] = dominant
        output_grid[r] = [dominant] * width
        
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    output = []
    for row in input_grid:
        counts = {}
        for color in row:
            counts[color] = counts.get(color, 0) + 1
        majority = None
        for color, count in counts.items():
            if count == len(row) - 1:
                majority = color
                break
        if majority is None:
            majority = row[0]
        output.append([majority] * len(row))
    return output
