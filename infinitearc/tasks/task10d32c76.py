# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: 10d32c76
Difficulty: medium

=== Tags ===
- Image repetition
- Detect symmetry
- Draw rectangle
- Associate images to numbers

=== Description ===
The task involves transforming input grids by detecting vertical symmetry,
repeating the non-symmetrical portion to create a symmetrical image, and drawing
a rectangle whose size corresponds to the number of repetitions. Input grids
contain a single connected shape that lacks vertical symmetry (e.g., a line or
simple pattern on one side). The transformation first mirrors the shape across
the vertical axis to establish symmetry (image repetition), resulting in a
symmetrical output grid. The number of repetitions (always 2 for vertical
mirroring) determines the rectangle's dimensions: a 2Ã—2 rectangle is drawn in
the top-left corner of the output grid using a fixed color (e.g., 5). This
rectangle is added to ensure the output grid differs from the input, while the
association between the repetition count (2) and the rectangle's size fulfills
the "associate images to numbers" requirement. The symmetry detection step
ensures the mirrored shape aligns with the vertical axis, and the rectangle's
placement provides a consistent visual marker tied to the transformation logic.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common

def generate():
    width = common.randint(5, 10)
    height = common.randint(5, 10)
    color = common.random_color()
    pixels = common.random_el(width, height)
    input_grid = common.grid(width, height, 0)
    for r, c in pixels:
        input_grid[r][c] = color
    output_grid = common.grid(width, height, 0)
    for r, c in pixels:
        output_grid[r][c] = color
        mirror_c = width - 1 - c
        output_grid[r][mirror_c] = color
    for r in range(2):
        for c in range(2):
            output_grid[r][c] = 5
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    width = len(input_grid[0])
    height = len(input_grid)
    output_grid = [row[:] for row in input_grid]
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 0:
                mirror_c = width - 1 - c
                output_grid[r][mirror_c] = input_grid[r][c]
    for r in range(2):
        for c in range(2):
            output_grid[r][c] = 5
    return output_grid
