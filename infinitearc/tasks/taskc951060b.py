# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: c951060b
Difficulty: easy

=== Tags ===
- Direction guesingcrop
- Permute columns by length

=== Description ===
The task involves transforming an input grid into an output grid by reordering
its columns based on the number of non-zero elements each column contains.
Specifically, columns are sorted in descending order of their "length," where
length is defined as the count of non-zero values in the column. Columns with
identical lengths retain their original left-to-right order. For example, if a
column has three non-zero elements, it will appear before a column with two non-
zero elements. The direction (descending order) is consistent across all
examples, and the solver must recognize this pattern by observing that columns
with more non-zero elements are positioned to the left in the output. The
transformation does not involve cropping or other operations beyond this column
permutation.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
import common

def generate():
    while True:
        width = random.randint(1, 30)
        height = random.randint(1, 30)
        input_grid = common.grid(width, height, 0)
        for r in range(height):
            for c in range(width):
                input_grid[r][c] = random.randint(0, 9)
        col_counts = [sum(1 for r in range(height) if input_grid[r][c] != 0) for c in range(width)]
        if len(set(col_counts)) == 1:
            continue
        sorted_cols = sorted(range(width), key=lambda c: col_counts[c], reverse=True)
        output_grid = [[input_grid[r][c] for c in sorted_cols] for r in range(height)]
        if input_grid == output_grid:
            continue
        return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if not input_grid:
        return input_grid
    width = len(input_grid[0])
    height = len(input_grid)
    col_counts = [sum(1 for r in range(height) if input_grid[r][c] != 0) for c in range(width)]
    sorted_cols = sorted(range(width), key=lambda c: col_counts[c], reverse=True)
    output_grid = [[input_grid[r][c] for c in sorted_cols] for r in range(height)]
    return output_grid
