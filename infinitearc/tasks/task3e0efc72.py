# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-08
# ---------------------------------------------------------------

"""
Task ID: 3e0efc72
Difficulty: hard

=== Tags ===
- Associate colors to bools

=== Description ===
The input grids are 2D grids containing up to nine distinct colors (0-9)
arranged in complex, non-trivial patterns. Each color is consistently associated
with a boolean value (True or False) across all examples of the task, though
this mapping is not explicitly provided. The output grid is generated through a
two-step process: first, each cell's color is mapped to its corresponding
boolean value based on the input-output examples; second, each cell in the
output is determined by a logical condition involving its own boolean value and
the boolean values of its orthogonal neighbors (up, down, left, right).
Specifically, a cell in the output grid is assigned color 5 if its input color's
boolean is True *and* at least one orthogonal neighbor's boolean is also True;
otherwise, it is assigned color 6. The input grids feature multiple
interconnected shapes of varying colors, with some color associations requiring
careful observation of spatial relationships across examples to deduce the
boolean mappings. The output grids exhibit subtle yet consistent patterns
reflecting the interaction between boolean values and neighbor configurations,
demanding both color-boolean association and multi-step spatial reasoning to
solve.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    # Fixed color_map for consistency with solver
    color_map = {
        0: False, 1: True, 2: False, 3: True,
        4: False, 5: True, 6: False, 7: True,
        8: False, 9: True
    }
    
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    input_grid = [[random.choice(range(10)) for _ in range(width)] for _ in range(height)]
    
    all_5_6 = True
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] not in [5, 6]:
                all_5_6 = False
                break
        if not all_5_6:
            break
    if all_5_6:
        r, c = random.randint(0, height-1), random.randint(0, width-1)
        new_color = random.choice([c for c in range(10) if c not in [5, 6]])
        input_grid[r][c] = new_color
    
    output_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            color = input_grid[r][c]
            is_true = color_map[color]
            neighbors_true = False
            for dr, dc in [(1,0), (-1,0), (0,1), (0,-1)]:
                nr, nc = r + dr, c + dc
                if 0 <= nr < height and 0 <= nc < width:
                    neighbor_color = input_grid[nr][nc]
                    if color_map[neighbor_color]:
                        neighbors_true = True
                        break
            output_grid[r][c] = 5 if (is_true and neighbors_true) else 6
    
    if input_grid == output_grid:
        while input_grid == output_grid:
            width = random.randint(1, 30)
            height = random.randint(1, 30)
            input_grid = [[random.choice(range(10)) for _ in range(width)] for _ in range(height)]
            all_5_6 = True
            for r in range(height):
                for c in range(width):
                    if input_grid[r][c] not in [5, 6]:
                        all_5_6 = False
                        break
                if not all_5_6:
                    break
            if all_5_6:
                r, c = random.randint(0, height-1), random.randint(0, width-1)
                new_color = random.choice([c for c in range(10) if c not in [5, 6]])
                input_grid[r][c] = new_color
            output_grid = [[0] * width for _ in range(height)]
            for r in range(height):
                for c in range(width):
                    color = input_grid[r][c]
                    is_true = color_map[color]
                    neighbors_true = False
                    for dr, dc in [(1,0), (-1,0), (0,1), (0,-1)]:
                        nr, nc = r + dr, c + dc
                        if 0 <= nr < height and 0 <= nc < width:
                            neighbor_color = input_grid[nr][nc]
                            if color_map[neighbor_color]:
                                neighbors_true = True
                                break
                    output_grid[r][c] = 5 if (is_true and neighbors_true) else 6
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    color_map = {
        0: False, 1: True, 2: False, 3: True,
        4: False, 5: True, 6: False, 7: True,
        8: False, 9: True
    }
    width = len(input_grid[0])
    height = len(input_grid)
    output_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            color = input_grid[r][c]
            is_true = color_map[color]
            neighbors_true = False
            for dr, dc in [(1,0), (-1,0), (0,1), (0,-1)]:
                nr, nc = r + dr, c + dc
                if 0 <= nr < height and 0 <= nc < width:
                    neighbor_color = input_grid[nr][nc]
                    if color_map[neighbor_color]:
                        neighbors_true = True
                        break
            output_grid[r][c] = 5 if (is_true and neighbors_true) else 6
    return output_grid
