# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: 228e7958
Difficulty: easy

=== Tags ===
- Associate images to colors
- Count patterns
- Take complement
- Rectangle guessing

=== Description ===
The input grid contains a single rectangular region (a solid block of cells
forming a rectangle with no holes). The output grid is formed by replacing every
cell within this rectangle with the color 9 minus the area of the rectangle
(where area is the number of cells in the rectangle). All other cells remain
unchanged. The rectangle is identified as the unique maximal contiguous
rectangular region in the input grid.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    while True:
        w = random.randint(1, width)
        h = random.randint(1, height)
        area = w * h
        if area <= 9 and area != 8:
            break
    input_grid = [[0] * width for _ in range(height)]
    for r in range(h):
        for c in range(w):
            input_grid[r][c] = 1
    output_grid = [row[:] for row in input_grid]
    for r in range(h):
        for c in range(w):
            output_grid[r][c] = 9 - area
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    non_zero_cells = []
    for r in range(len(input_grid)):
        for c in range(len(input_grid[0])):
            if input_grid[r][c] != 0:
                non_zero_cells.append((r, c))
    if not non_zero_cells:
        return input_grid
    min_r = min(r for r, c in non_zero_cells)
    max_r = max(r for r, c in non_zero_cells)
    min_c = min(c for r, c in non_zero_cells)
    max_c = max(c for r, c in non_zero_cells)
    for r in range(min_r, max_r + 1):
        for c in range(min_c, max_c + 1):
            if input_grid[r][c] == 0:
                return input_grid
    width = max_c - min_c + 1
    height = max_r - min_r + 1
    area = width * height
    output_grid = [row[:] for row in input_grid]
    for r in range(min_r, max_r + 1):
        for c in range(min_c, max_c + 1):
            output_grid[r][c] = 9 - area
    return output_grid
