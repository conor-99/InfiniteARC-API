# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: 572e7160
Difficulty: easy

=== Tags ===
- Ex nihilo

=== Description ===
The task involves transforming an input grid into an output grid where every
cell is filled with the most frequently occurring non-zero color present in the
input. If the input grid contains no non-zero colors (i.e., all cells are zero),
the output grid is filled with color 1. This transformation ensures the output
grid is always distinct from the input grid, as the input will never consist of
a single uniform non-zero color (to avoid identical output). The rule is derived
purely from statistical analysis of the input's color distribution, requiring no
spatial reasoning or pattern manipulation.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from collections import Counter
def generate():
    while True:
        width = random.randint(1, 30)
        height = random.randint(1, 30)
        input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
        
        non_zero = [cell for row in input_grid for cell in row if cell != 0]
        if not non_zero:
            output_grid = [[1] * width for _ in range(height)]
            return {"input": input_grid, "output": output_grid}
        else:
            if all(x == non_zero[0] for x in non_zero):
                continue
            else:
                mode = Counter(non_zero).most_common(1)[0][0]
                output_grid = [[mode] * width for _ in range(height)]
                return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    non_zero = [cell for row in input_grid for cell in row if cell != 0]
    if not non_zero:
        return [[1] * width for _ in range(height)]
    else:
        from collections import Counter
        mode = Counter(non_zero).most_common(1)[0][0]
        return [[mode] * width for _ in range(height)]
