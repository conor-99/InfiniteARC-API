# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: ea809e84
Difficulty: medium

=== Tags ===
- Count touches
- Reflect across detected axis

=== Description ===
The task requires reflecting the input grid across a detected axis (vertical or
horizontal) based on the relative counts of horizontal and vertical same-color
adjacencies. For each cell, count how many horizontally adjacent cells
(left/right) share the same color and how many vertically adjacent cells
(up/down) share the same color. Sum these counts across all cells to determine
the total horizontal and vertical adjacency counts. If the total horizontal
count exceeds the vertical count, reflect the grid across a vertical axis (left-
right flip). Otherwise, reflect across a horizontal axis (top-bottom flip). The
output grid is this reflection, which will always differ from the input grid due
to the asymmetric nature of the transformation.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    while True:
        width = random.randint(2, 30)
        height = random.randint(2, 30)
        grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
        horiz_count = 0
        vert_count = 0
        for r in range(height):
            for c in range(width):
                if c > 0 and grid[r][c] == grid[r][c-1]:
                    horiz_count += 1
                if c < width - 1 and grid[r][c] == grid[r][c+1]:
                    horiz_count += 1
                if r > 0 and grid[r][c] == grid[r-1][c]:
                    vert_count += 1
                if r < height - 1 and grid[r][c] == grid[r+1][c]:
                    vert_count += 1
        if horiz_count == vert_count:
            continue
        if horiz_count > vert_count:
            output = [row[::-1] for row in grid]
        else:
            output = grid[::-1]
        if grid == output:
            continue
        return {
            "input": grid,
            "output": output
        }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input):
    width = len(input[0])
    height = len(input)
    horiz_count = 0
    vert_count = 0
    for r in range(height):
        for c in range(width):
            if c > 0 and input[r][c] == input[r][c-1]:
                horiz_count += 1
            if c < width - 1 and input[r][c] == input[r][c+1]:
                horiz_count += 1
            if r > 0 and input[r][c] == input[r-1][c]:
                vert_count += 1
            if r < height - 1 and input[r][c] == input[r+1][c]:
                vert_count += 1
    if horiz_count > vert_count:
        return [row[::-1] for row in input]
    else:
        return input[::-1]
