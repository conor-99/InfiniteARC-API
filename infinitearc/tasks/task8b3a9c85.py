# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: 8b3a9c85
Difficulty: medium

=== Tags ===
- X marks the spot
- Image within image
- Grid coloring

=== Description ===
The input grid contains exactly one cell marked with color 9 (the "X" marker),
positioned at the top-left corner of a 3×3 embedded image. The output grid is
the 3×3 subgrid starting at the marker's position, where each color value has
been incremented by 1 (with values wrapping around from 9 to 0). This
transformation requires identifying the marker location, extracting the embedded
subgrid, and applying a consistent color shift.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid
def generate():
    width = random.randint(3, 30)
    height = random.randint(3, 30)
    r = random.randint(0, height - 3)
    c = random.randint(0, width - 3)
    
    input_grid = grid(width, height, 0)
    input_grid[r][c] = 9
    
    for i in range(height):
        for j in range(width):
            if i == r and j == c:
                continue
            input_grid[i][j] = random.randint(0, 8)
    
    output_grid = []
    for i in range(3):
        output_row = []
        for j in range(3):
            val = input_grid[r + i][c + j]
            output_row.append((val + 1) % 10)
        output_grid.append(output_row)
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    r, c = -1, -1
    for i in range(height):
        for j in range(width):
            if input_grid[i][j] == 9:
                r, c = i, j
                break
        if r != -1:
            break
    output = []
    for i in range(3):
        output_row = []
        for j in range(3):
            val = input_grid[r + i][c + j]
            output_row.append((val + 1) % 10)
        output.append(output_row)
    return output
