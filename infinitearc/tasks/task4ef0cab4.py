# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: 4ef0cab4
Difficulty: hard

=== Tags ===
- Image reflection

=== Description ===
The input grid features a distinct color (e.g., red) appearing in the top row.
The output grid is generated by reflecting the entire input grid vertically
across the leftmost column where this specific color appears in the top row. For
example, if the top row contains the color red at column 3 (0-based), each cell
(r, c) in the input is mapped to (r, 2*3 - c) in the output. The reflection axis
is dynamically determined by the input's content, requiring the solver to first
locate the axis by identifying the color's position in the top row before
applying the transformation. Input grids contain complex, asymmetric
arrangements of multiple colors and shapes, and the output reflects these
features across the dynamically identified axis, ensuring the output differs
from the input. This task demands both pattern recognition to detect the axis
and precise geometric transformation skills, making it challenging for human
solvers.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.choice([1,3,5,7,9,11,13,15,17,19,21,23,25,27,29])
    height = random.randint(1, 30)
    color = random.randint(1, 9)
    center = width // 2
    
    input_grid = [[0] * width for _ in range(height)]
    input_grid[0][center] = color
    
    for r in range(1, height):
        for c in range(width):
            input_grid[r][c] = random.randint(0, 9)
    
    output_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            reflected_c = 2 * center - c
            output_grid[r][c] = input_grid[r][reflected_c]
    
    if input_grid == output_grid:
        return generate()
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    width = len(input_grid[0])
    height = len(input_grid)
    axis = 0
    for c in range(width):
        if input_grid[0][c] != 0:
            axis = c
            break
    output_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            reflected_c = 2 * axis - c
            output_grid[r][c] = input_grid[r][reflected_c]
    return output_grid
