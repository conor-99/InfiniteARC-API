# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: 5de27297
Difficulty: easy

=== Tags ===
- Pattern deconstruction

=== Description ===
The input grids are 2D grids of integers between 0 and 9, containing a single
continuous horizontal or vertical line of a specific non-zero color that is the
longest such line in the grid (i.e., no other line of the same or longer length
exists in any row or column). The output grids are derived by preserving only
the cells of this longest line (retaining their original color) and setting all
other cells to 0. The transformation requires identifying the longest continuous
sequence of identical color in any row or column, ignoring all other patterns or
colors, and simplifying the grid to this single line.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    direction = random.choice(['horizontal', 'vertical'])
    if direction == 'horizontal':
        width = random.randint(3, 10)
        height = random.randint(2, width - 1)
        row_idx = random.randint(0, height - 1)
        color = random.randint(1, 9)
        grid_in = [[0] * width for _ in range(height)]
        for c in range(width):
            grid_in[row_idx][c] = color
        for r in range(height):
            if r == row_idx:
                continue
            row_colors = [random.randint(1, 9) for _ in range(width)]
            if all(x == row_colors[0] for x in row_colors):
                idx = random.randint(0, width - 1)
                row_colors[idx] = random.randint(1, 9)
            for c in range(width):
                grid_in[r][c] = row_colors[c]
    else:
        height = random.randint(3, 10)
        width = random.randint(2, height - 1)
        col_idx = random.randint(0, width - 1)
        color = random.randint(1, 9)
        grid_in = [[0] * width for _ in range(height)]
        for r in range(height):
            grid_in[r][col_idx] = color
        for c in range(width):
            if c == col_idx:
                continue
            col_colors = [random.randint(1, 9) for _ in range(height)]
            if all(x == col_colors[0] for x in col_colors):
                idx = random.randint(0, height - 1)
                col_colors[idx] = random.randint(1, 9)
            for r in range(height):
                grid_in[r][c] = col_colors[r]
    grid_out = [[0] * len(grid_in[0]) for _ in range(len(grid_in))]
    if direction == 'horizontal':
        for c in range(len(grid_in[0])):
            grid_out[row_idx][c] = grid_in[row_idx][c]
    else:
        for r in range(len(grid_in)):
            grid_out[r][col_idx] = grid_in[r][col_idx]
    return {'input': grid_in, 'output': grid_out}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    max_length = 0
    max_position = None
    
    # Check horizontal runs
    for r in range(height):
        c = 0
        while c < width:
            if input_grid[r][c] == 0:
                c += 1
                continue
            color = input_grid[r][c]
            start = c
            while c < width and input_grid[r][c] == color:
                c += 1
            count = c - start
            if count > max_length:
                max_length = count
                max_position = ('horizontal', r, start, c - 1)
    
    # Check vertical runs
    for c in range(width):
        r = 0
        while r < height:
            if input_grid[r][c] == 0:
                r += 1
                continue
            color = input_grid[r][c]
            start = r
            while r < height and input_grid[r][c] == color:
                r += 1
            count = r - start
            if count > max_length:
                max_length = count
                max_position = ('vertical', c, start, r - 1)
    
    output = [[0] * width for _ in range(height)]
    if max_position[0] == 'horizontal':
        r = max_position[1]
        start, end = max_position[2], max_position[3]
        for c in range(start, end + 1):
            output[r][c] = input_grid[r][c]
    else:
        c = max_position[1]
        start, end = max_position[2], max_position[3]
        for r in range(start, end + 1):
            output[r][c] = input_grid[r][c]
    return output
