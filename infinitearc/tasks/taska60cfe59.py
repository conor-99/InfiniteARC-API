# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-10
# ---------------------------------------------------------------

"""
Task ID: a60cfe59
Difficulty: easy

=== Tags ===
- Associate colors to bools
- Count ver lines
- Gravity

=== Description ===
The task involves an input grid where a specific color (e.g., 5) forms vertical
lines (columns entirely composed of this color). The transformation requires
counting the number of such vertical lines. If at least one vertical line exists
(count > 0), the output grid is the input grid with rows reversed (top to
bottom). If no vertical lines exist (count = 0), the output grid is the input
grid transposed (rows become columns and columns become rows). This rule
consistently applies the "gravity" transformation based on the presence of
vertical lines, associating the color 5 with the boolean condition of vertical
line existence.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid, transpose

def generate():
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    case = random.choice([1, 2])
    input_grid = grid(width, height, 0)
    
    if case == 1:
        col_idx = random.randint(0, width - 1)
        for r in range(height):
            input_grid[r][col_idx] = 5
        for r in range(height):
            for c in range(width):
                if c != col_idx:
                    input_grid[r][c] = random.randint(0, 9)
        output_grid = input_grid[::-1]
        if input_grid == output_grid:
            return generate()
        return {"input": input_grid, "output": output_grid}
    else:
        input_grid = grid(width, height, 5)
        for c in range(width):
            r = random.randint(0, height - 1)
            input_grid[r][c] = random.choice([i for i in range(10) if i != 5])
        output_grid = transpose(input_grid)
        if input_grid == output_grid:
            return generate()
        return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

from common import transpose

def p(input_grid):
    width = len(input_grid[0])
    height = len(input_grid)
    has_vertical_line = False
    for c in range(width):
        all_5 = True
        for r in range(height):
            if input_grid[r][c] != 5:
                all_5 = False
                break
        if all_5:
            has_vertical_line = True
            break
    if has_vertical_line:
        return input_grid[::-1]
    else:
        return transpose(input_grid)
