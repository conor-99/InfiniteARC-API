# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: cd2b1a53
Difficulty: insane

=== Tags ===
- Color guessing

=== Description ===
For each cell in the input grid, the corresponding output cell's color is
determined by the smallest integer between 0 and 9 that does not appear in the
orthogonal neighbors (up, down, left, right) of the corresponding cell in the
input grid. Edge and corner cells have fewer neighbors, but the rule applies to
the available neighbors. For example, a 1Ã—1 grid has no neighbors, so the output
color is 0. A cell with neighbors of colors 1 and 2 would output 0, as it is the
smallest missing color. This rule requires consistent application of neighbor
analysis across all grid positions to derive the output.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def compute_output(grid):
    h = len(grid)
    w = len(grid[0])
    out = [[0] * w for _ in range(h)]
    for r in range(h):
        for c in range(w):
            neighbors = set()
            for dr, dc in [(1,0), (-1,0), (0,1), (0,-1)]:
                nr, nc = r + dr, c + dc
                if 0 <= nr < h and 0 <= nc < w:
                    neighbors.add(grid[nr][nc])
            for color in range(10):
                if color not in neighbors:
                    out[r][c] = color
                    break
    return out

def generate():
    while True:
        width = random.randint(1, 30)
        height = random.randint(1, 30)
        input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
        output_grid = compute_output(input_grid)
        if input_grid != output_grid:
            return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    h = len(input_grid)
    w = len(input_grid[0])
    output = [[0] * w for _ in range(h)]
    for r in range(h):
        for c in range(w):
            neighbors = set()
            for dr, dc in [(1,0), (-1,0), (0,1), (0,-1)]:
                nr, nc = r + dr, c + dc
                if 0 <= nr < h and 0 <= nc < w:
                    neighbors.add(input_grid[nr][nc])
            for color in range(10):
                if color not in neighbors:
                    output[r][c] = color
                    break
    return output
