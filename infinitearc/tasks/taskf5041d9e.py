# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: f5041d9e
Difficulty: easy

=== Tags ===
- Nearest color fill

=== Description ===
The input grids are 2D arrays with values ranging from 0 to 9, where 0
represents empty cells and non-zero values represent colors. The task requires
transforming the input grid into an output grid by replacing each empty cell (0)
with the color of the nearest non-zero cell, using Manhattan distance to
determine the closest non-zero cell. For every empty cell, the nearest non-zero
cell is uniquely determined, ensuring a consistent and deterministic
transformation. Non-zero cells remain unchanged in the output grid. This rule
creates a "fill" effect where empty spaces are populated by the closest
available color, forming contiguous regions around non-zero cells.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(2, 30)
    height = random.randint(2, 30)
    color = random.randint(1, 9)
    input_grid = [[0] * width for _ in range(height)]
    r, c = random.randint(0, height-1), random.randint(0, width-1)
    input_grid[r][c] = color
    output_grid = [[color] * width for _ in range(height)]
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import random

def p(input_grid):
    non_zero_cells = []
    for r in range(len(input_grid)):
        for c in range(len(input_grid[0])):
            if input_grid[r][c] != 0:
                non_zero_cells.append((r, c, input_grid[r][c]))
    output = [[0] * len(input_grid[0]) for _ in range(len(input_grid))]
    for r in range(len(input_grid)):
        for c in range(len(input_grid[0])):
            if input_grid[r][c] != 0:
                output[r][c] = input_grid[r][c]
            else:
                min_dist = float('inf')
                nearest_color = 0
                for (x, y, color) in non_zero_cells:
                    dist = abs(r - x) + abs(c - y)
                    if dist < min_dist:
                        min_dist = dist
                        nearest_color = color
                output[r][c] = nearest_color
    return output
