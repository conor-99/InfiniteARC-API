# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: aba5f766
Difficulty: medium

=== Tags ===
- X marks the spot
- Pattern moving
- Fill between lines
- Remove intruders

=== Description ===
The input grid features horizontal (color 1) and vertical (color 2) lines
forming a rectangular boundary, with an 'X' (color 9) positioned inside the
enclosed area. The transformation requires moving the 'X' exactly one cell to
the right while preserving the boundary lines. All other colors within the
boundary (intruders) are removed, and the entire area between the lines is
uniformly filled with color 3. The boundary lines (colors 1 and 2) remain
unchanged in the output, and no other modifications to the grid are applied.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common
import random
def generate():
    width = random.randint(6, 30)
    height = random.randint(6, 30)
    grid = common.grid(width, height, 0)
    
    c1 = random.randint(1, width - 5)
    c2 = random.randint(c1 + 3, width - 2)
    r1 = random.randint(1, height - 5)
    r2 = random.randint(r1 + 3, height - 2)
    
    for c in range(c1, c2 + 1):
        grid[r1][c] = 1
        grid[r2][c] = 1
    
    for r in range(r1, r2 + 1):
        grid[r][c1] = 2
        grid[r][c2] = 2
    
    interior_rows = range(r1 + 1, r2)
    interior_cols = range(c1 + 1, c2)
    
    r_x = random.choice(list(interior_rows))
    c_x = random.choice([c for c in interior_cols if c < max(interior_cols)])
    grid[r_x][c_x] = 9
    
    for r in interior_rows:
        for c in interior_cols:
            if (r, c) == (r_x, c_x):
                continue
            grid[r][c] = random.choice([0] + list(range(3, 9)))
    
    output = [row[:] for row in grid]
    output[r_x][c_x] = 3
    output[r_x][c_x + 1] = 9
    for r in interior_rows:
        for c in interior_cols:
            if (r, c) == (r_x, c_x + 1):
                continue
            output[r][c] = 3
    
    return {"input": grid, "output": output}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import common
import random
def p(input_grid):
    # Convert input to mutable list of lists
    input_grid = [list(row) for row in input_grid]
    rows = len(input_grid)
    cols = len(input_grid[0])
    
    horizontal_rows = [r for r in range(rows) if 1 in input_grid[r]]
    r1, r2 = min(horizontal_rows), max(horizontal_rows)
    
    vertical_cols = [c for c in range(cols) if any(input_grid[r][c] == 2 for r in range(rows))]
    c1, c2 = min(vertical_cols), max(vertical_cols)
    
    x_pos = None
    for r in range(r1 + 1, r2):
        for c in range(c1 + 1, c2):
            if input_grid[r][c] == 9:
                x_pos = (r, c)
                break
        if x_pos:
            break
    
    r_x, c_x = x_pos if x_pos else (r1 + 1, c1 + 1)
    
    output = [row[:] for row in input_grid]
    output[r_x][c_x] = 3
    output[r_x][c_x + 1] = 9
    
    for r in range(r1 + 1, r2):
        for c in range(c1 + 1, c2):
            if (r, c) != (r_x, c_x + 1):
                output[r][c] = 3
    
    return output
