# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: f7bc430b
Difficulty: hard

=== Tags ===
- Mirror pairing
- Image reflection
- Take negative

=== Description ===
The input grid features a complex arrangement of multiple distinct colored
shapes and patterns, with no inherent symmetry. The output grid is generated
through two sequential transformations: first, the input grid undergoes a
vertical mirror reflection (left-right flip), and second, each color in the
reflected grid is replaced by its visual complement according to a consistent,
non-numerical color mapping. The color complement mapping is visually apparent
(e.g., red becomes blue, blue becomes green, green becomes yellow, and so on),
requiring the solver to identify both the reflection operation and the color
transformation through example pairs. This task demands the solver to recognize
and apply two distinct, compositional rules in sequence, making it challenging
due to the need to disentangle the reflection from the color mapping while
working with multiple visual features in a single grid.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    color_map = {0: 0, 1: 2, 2: 3, 3: 4, 4: 1, 5: 5, 6: 7, 7: 6, 8: 9, 9: 8}
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    while all(cell == 0 for row in input_grid for cell in row) or all(cell == 5 for row in input_grid for cell in row):
        input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    mirrored = [row[::-1] for row in input_grid]
    output_grid = [[color_map[cell] for cell in row] for row in mirrored]
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import random

def p(input_grid):
    color_map = {0: 0, 1: 2, 2: 3, 3: 4, 4: 1, 5: 5, 6: 7, 7: 6, 8: 9, 9: 8}
    mirrored = [row[::-1] for row in input_grid]
    output_grid = [[color_map[cell] for cell in row] for row in mirrored]
    return output_grid
