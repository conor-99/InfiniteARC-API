# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-04
# ---------------------------------------------------------------

"""
Task ID: 4b7e8008
Difficulty: easy

=== Tags ===
- Extrapolate image from grid
- Detect wall

=== Description ===
The input grid contains a vertical wall, which is a column where all cells have
the same non-zero color (e.g., color 5). The output grid is created by copying
the region to the left of the wall to the right of the wall, maintaining the
wall's position. The wall itself remains unchanged. For example, if the wall is
at column 2 (0-based) in a 5-column grid, the cells in columns 0-1 (left of the
wall) are copied to columns 3-4 (right of the wall), resulting in a symmetric
grid around the wall. The wall color must be distinct from background (0) and
other content, and the grid width must allow sufficient space to the right of
the wall for the copy operation. The rule is deterministic, visually intuitive,
and requires minimal reasoning to detect the wall and apply the copy.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    while True:
        width = random.choice([3,5,7,9,11,13,15,17,19,21,23,25,27,29])
        height = random.randint(1, 30)
        wall_col = width // 2
        
        # Generate left part
        left = [[random.randint(0, 9) for _ in range(wall_col)] for _ in range(height)]
        if all(cell == 0 for row in left for cell in row):
            r_idx, c_idx = random.randint(0, height-1), random.randint(0, wall_col-1)
            left[r_idx][c_idx] = random.randint(1, 9)
        
        # Find available colors for wall (not in left part)
        left_colors = set()
        for row in left:
            for color in row:
                if color != 0:
                    left_colors.add(color)
        available_colors = [c for c in range(1, 10) if c not in left_colors]
        wall_color = random.choice(available_colors) if available_colors else random.randint(1, 9)
        
        # Create input grid
        input_grid = [[0] * width for _ in range(height)]
        for r in range(height):
            input_grid[r][wall_col] = wall_color
        
        # Fill left part
        for r in range(height):
            for c in range(wall_col):
                input_grid[r][c] = left[r][c]
        
        # Fill right part (avoid wall_color)
        right_width = width - wall_col - 1
        for r in range(height):
            for c in range(wall_col+1, width):
                color = random.randint(0, 9)
                while color == wall_color:
                    color = random.randint(0, 9)
                input_grid[r][c] = color
        
        # Check all columns except wall are not uniform
        valid = True
        for col in range(width):
            if col == wall_col:
                continue
            color = input_grid[0][col]
            if color == 0:
                continue
            for row in range(1, height):
                if input_grid[row][col] != color:
                    break
            else:
                valid = False
                break
        
        if valid:
            break
    
    # Create output grid (copy left to right)
    output_grid = [row[:] for row in input_grid]
    for r in range(height):
        for c in range(wall_col):
            output_grid[r][wall_col+1+c] = left[r][c]
    
    return {
        'input': input_grid,
        'output': output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    width = len(input_grid[0])
    height = len(input_grid)
    wall_col = None
    
    for col in range(width):
        color = input_grid[0][col]
        if color == 0:
            continue
        is_wall = True
        for row in range(height):
            if input_grid[row][col] != color:
                is_wall = False
                break
        if is_wall:
            wall_col = col
            break
    
    if wall_col is None:
        return input_grid
    
    output_grid = [row[:] for row in input_grid]
    left_width = wall_col
    for row in range(height):
        for c in range(left_width):
            output_grid[row][wall_col+1+c] = input_grid[row][c]
    return output_grid
