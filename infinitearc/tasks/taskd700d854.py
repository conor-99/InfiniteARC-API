# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-08
# ---------------------------------------------------------------

"""
Task ID: d700d854
Difficulty: easy

=== Tags ===
- Snap to grid
- Associate color to bools
- Pattern moving
- Mimic pattern

=== Description ===
The task involves a single contiguous pattern (a connected region of identical
color) on a grid, surrounded by a background of color 0. The output grid shifts
this pattern by one cell in a direction determined by its color: color 1 (red)
moves right, color 2 (blue) moves left, color 3 (green) moves up, and color 4
(yellow) moves down. The background color (0) remains unchanged, and all non-
background cells must belong to the pattern being moved. The grid dimensions
stay consistent, and the pattern shifts without overlapping grid boundaries. The
transformation is visual, relying on color identity to determine movement
direction rather than numerical properties.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common
from common import continuous_creature, grid

def generate():
    width = common.random.randint(4, 10)
    height = common.random.randint(4, 10)
    color = common.random.choice([1, 2, 3, 4])
    if color == 1:
        dx, dy = 0, 1
        start_col = 0
        start_row = common.random.randint(0, height-2)
    elif color == 2:
        dx, dy = 0, -1
        start_col = common.random.randint(1, width-2)
        start_row = common.random.randint(0, height-2)
    elif color == 3:
        dx, dy = -1, 0
        start_col = common.random.randint(0, width-2)
        start_row = common.random.randint(1, height-2)
    elif color == 4:
        dx, dy = 1, 0
        start_col = common.random.randint(0, width-2)
        start_row = common.random.randint(0, height-2)

    creature_rows, creature_cols = continuous_creature(2, 2, 2)
    creature_rows = [r + start_row for r in creature_rows]
    creature_cols = [c + start_col for c in creature_cols]

    input_grid = grid(width, height, 0)
    for r, c in zip(creature_rows, creature_cols):
        input_grid[r][c] = color

    output_grid = grid(width, height, 0)
    for r, c in zip(creature_rows, creature_cols):
        new_r = r + dx
        new_c = c + dy
        output_grid[new_r][new_c] = color

    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import common
from common import grid

def p(input_grid):
    color = None
    for r in range(len(input_grid)):
        for c in range(len(input_grid[0])):
            if input_grid[r][c] > 0:
                color = input_grid[r][c]
                break
        if color is not None:
            break
    if color == 1:
        dx, dy = 0, 1
    elif color == 2:
        dx, dy = 0, -1
    elif color == 3:
        dx, dy = -1, 0
    elif color == 4:
        dx, dy = 1, 0
    else:
        dx, dy = 0, 0

    height = len(input_grid)
    width = len(input_grid[0])
    output_grid = grid(width, height, 0)
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] == color:
                new_r = r + dx
                new_c = c + dy
                if 0 <= new_r < height and 0 <= new_c < width:
                    output_grid[new_r][new_c] = color
    return output_grid
