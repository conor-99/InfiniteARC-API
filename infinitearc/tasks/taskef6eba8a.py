# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-03
# ---------------------------------------------------------------

"""
Task ID: ef6eba8a
Difficulty: easy

=== Tags ===
- Color palette
- Recolor by count

=== Description ===
The task involves transforming an input grid into an output grid by recoloring
each cell based on the frequency of its original color within the entire grid.
Each color in the input grid (represented as a number between 0 and 9) is
replaced with the count of how many times that specific color appears in the
input. For example, if color 4 appears exactly 5 times in the input, all cells
originally colored 4 will be changed to color 5 in the output. This
transformation is applied uniformly to all cells, regardless of their position,
and ensures that no input grid remains identical to its output (as the frequency
count for at least one color differs from the color value itself). The rule is
simple, visual, and relies solely on the global count of each color, making it
accessible for an "easy" difficulty level.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    while True:
        width = random.randint(1, 30)
        height = random.randint(1, 30)
        input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
        counts = {}
        for row in input_grid:
            for color in row:
                counts[color] = counts.get(color, 0) + 1
        if any(count > 9 for count in counts.values()):
            continue
        output_grid = [[counts[color] for color in row] for row in input_grid]
        if input_grid == output_grid:
            continue
        return {
            "input": input_grid,
            "output": output_grid
        }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    counts = {}
    for row in input_grid:
        for color in row:
            counts[color] = counts.get(color, 0) + 1
    output_grid = [[counts[color] for color in row] for row in input_grid]
    return output_grid
