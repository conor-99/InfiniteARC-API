# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: a4e8aea1
Difficulty: insane

=== Tags ===
- Fractal repetition
- Detect symmetry
- Pattern modification

=== Description ===
Input grids exhibit symmetry along a primary axis (vertical, horizontal, or
diagonal). The output grid is constructed by replacing each cell in the input
with a 2x2 block that preserves the detected symmetry. For vertical symmetry,
each block mirrors left-right; for horizontal symmetry, top-bottom; and for
diagonal symmetry, across the diagonal. This creates a fractal repetition where
the symmetry is maintained at the micro-scale of each block, resulting in an
output grid that is twice the width and height of the input while preserving the
original pattern's symmetry. The transformation requires identifying the
symmetry axis first, then modifying the pattern by expanding each cell into a
symmetrical 2x2 block, generating a larger grid that reflects the fractal-like
repetition of the input's symmetric structure.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
import common

def generate():
    symmetry = random.choice(['vertical', 'horizontal', 'diagonal'])
    if symmetry == 'diagonal':
        size = random.randint(1, 15)
        width = size
        height = size
    else:
        width = random.randint(1, 15)
        height = random.randint(1, 15)
    
    input_grid = [[0] * width for _ in range(height)]
    
    if symmetry == 'vertical':
        for i in range(height):
            for j in range(width // 2):
                c = common.random_color()
                input_grid[i][j] = c
                input_grid[i][width - 1 - j] = c
            if width % 2 == 1:
                mid = width // 2
                input_grid[i][mid] = common.random_color()
    elif symmetry == 'horizontal':
        for j in range(width):
            for i in range(height // 2):
                c = common.random_color()
                input_grid[i][j] = c
                input_grid[height - 1 - i][j] = c
            if height % 2 == 1:
                mid = height // 2
                input_grid[mid][j] = common.random_color()
    elif symmetry == 'diagonal':
        for i in range(size):
            for j in range(i + 1):
                c = common.random_color()
                input_grid[i][j] = c
                input_grid[j][i] = c
    
    output_grid = []
    for i in range(height):
        for _ in range(2):
            new_row = []
            for j in range(width):
                for _ in range(2):
                    new_row.append(input_grid[i][j])
            output_grid.append(new_row)
    
    return {
        'input': input_grid,
        'output': output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    output_grid = []
    for i in range(height):
        for _ in range(2):
            new_row = []
            for j in range(width):
                for _ in range(2):
                    new_row.append(input_grid[i][j])
            output_grid.append(new_row)
    return output_grid
