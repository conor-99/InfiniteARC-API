# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-09
# ---------------------------------------------------------------

"""
Task ID: 2a7be700
Difficulty: easy

=== Tags ===
- Extrapolate image from grid
- Background filling
- Detect hor lines

=== Description ===
The input grid contains horizontal segments (contiguous sequences of non-zero
colors in a row). Each segment is extended to span the entire row. The
background color (0) is then replaced with a fixed non-zero color (e.g., 2)
across all remaining cells, resulting in a uniform background fill and extended
horizontal segments in the output grid.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    input_grid = [[0] * width for _ in range(height)]
    
    has_segment = False
    if width > 1:
        for r in range(height):
            if random.choice([True, False]):
                has_segment = True
                color = random.randint(1, 9)
                length = random.randint(1, width - 1)
                start = random.randint(0, width - length)
                for c in range(start, start + length):
                    input_grid[r][c] = color
    
    if not has_segment and width > 1:
        r = random.randint(0, height - 1)
        color = random.randint(1, 9)
        length = random.randint(1, width - 1)
        start = random.randint(0, width - length)
        for c in range(start, start + length):
            input_grid[r][c] = color
    
    output_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        row = input_grid[r]
        non_zero = next((x for x in row if x != 0), None)
        if non_zero is not None:
            output_grid[r] = [non_zero] * width
        else:
            output_grid[r] = [2] * width
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    width = len(input_grid[0])
    height = len(input_grid)
    output_grid = [[0] * width for _ in range(height)]
    
    for r in range(height):
        row = input_grid[r]
        non_zero = next((x for x in row if x != 0), None)
        if non_zero is not None:
            output_grid[r] = [non_zero] * width
        else:
            output_grid[r] = [2] * width
    return output_grid
