# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: 494e3324
Difficulty: mediumâ€“hard

=== Tags ===
- Propagation by rule weight
- Row parity coloring

=== Description ===
The input grid consists of a 2D array of values between 0 and 9, where 0
represents a blank background and values 1-9 represent distinct colors. Each
colored cell (value > 0) has a propagation weight equal to its color value. For
each colored cell at position (r, c) in the input grid: - If the row index r is
even (0-based), the color propagates horizontally to the right by a distance
equal to its weight (c + C). - If the row index r is odd, the color propagates
horizontally to the left by a distance equal to its weight (c - C).  The output
grid is generated by adding these propagated colors to the input grid.
Propagated cells are set to the original color value, overriding any existing
color. Propagation that would extend beyond grid boundaries is ignored. The
original input cells remain unchanged in the output. Overlapping propagations
(multiple sources targeting the same cell) are resolved by processing cells in
top-to-bottom, left-to-right order, with later propagations overriding earlier
ones. This creates a visual pattern where colors spread predictably based on row
parity and their inherent weight, requiring the solver to recognize both the
directional rule and the weight-based distance for each cell.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    input_grid = [[0] * width for _ in range(height)]
    
    placed = False
    while not placed:
        input_grid = [[0] * width for _ in range(height)]
        for r in range(height):
            for c in range(width):
                color = random.randint(1, 9)
                if r % 2 == 0 and c + color < width:
                    input_grid[r][c] = color
                    placed = True
                elif r % 2 == 1 and c >= color:
                    input_grid[r][c] = color
                    placed = True
    output_grid = [row[:] for row in input_grid]
    for r in range(height):
        for c in range(width):
            color = input_grid[r][c]
            if color == 0:
                continue
            if r % 2 == 0:
                for d in range(1, color + 1):
                    nc = c + d
                    if nc >= width:
                        break
                    output_grid[r][nc] = color
            else:
                for d in range(1, color + 1):
                    nc = c - d
                    if nc < 0:
                        break
                    output_grid[r][nc] = color
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import random

def p(input_grid):
    input_list = [list(row) for row in input_grid]
    height = len(input_list)
    width = len(input_list[0])
    output_grid = [row[:] for row in input_list]
    for r in range(height):
        for c in range(width):
            color = input_list[r][c]
            if color == 0:
                continue
            if r % 2 == 0:
                for d in range(1, color + 1):
                    nc = c + d
                    if nc >= width:
                        break
                    output_grid[r][nc] = color
            else:
                for d in range(1, color + 1):
                    nc = c - d
                    if nc < 0:
                        break
                    output_grid[r][nc] = color
    return output_grid
