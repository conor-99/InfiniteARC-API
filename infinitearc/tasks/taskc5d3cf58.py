# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: c5d3cf58
Difficulty: easy

=== Tags ===
- Bounce

=== Description ===
The input grid is a 2D grid where all cells are black (0) except for a single
non-black pixel (color 1-9) positioned at the bottom-left corner (row =
height-1, column = 0). The output grid replaces the black background with a
fixed gray color (5), while preserving the single non-black pixel's color. A
continuous bouncing line is drawn starting from the bottom-left corner, moving
upward row by row. This line alternates direction (left to right, right to left)
whenever it reaches the left or right edge of the grid, maintaining the same
color as the input's single non-black pixel. The line extends throughout the
entire grid height, creating a zig-zag pattern that reflects off the grid
boundaries.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import bounce, random_color
def generate():
    width = random.randint(2, 30)
    height = random.randint(1, 30)
    c = random_color(exclude=[0])
    input_grid, output_grid = bounce(width, height, 0, 5, c)
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    color = input_grid[height - 1][0]
    output_grid = [[5] * width for _ in range(height)]
    current_col = 0
    direction = 1
    for r in range(height - 1, -1, -1):
        output_grid[r][current_col] = color
        current_col += direction
        if current_col == 0 or current_col == width - 1:
            direction = -direction
    return output_grid
