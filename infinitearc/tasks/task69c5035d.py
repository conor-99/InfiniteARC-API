# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-08
# ---------------------------------------------------------------

"""
Task ID: 69c5035d
Difficulty: hard

=== Tags ===
- Minimal edit completion
- Pixelwise xor composition

=== Description ===
The input grid features two distinct shapes, each rendered in a unique color,
with their overlapping regions displayed in a third, distinct color. The output
grid is generated by replacing all overlapping regions (third color) with the
background color (0), while preserving the non-overlapping portions of both
shapes. This transformation requires identifying the two shapes and their
intersection, then applying a symmetric difference operation (XOR) to produce
the output. The task is challenging due to the complexity of the shapes and the
need to distinguish overlapping regions from other elements in the grid. Input
grids contain intricate, multi-part shapes with subtle color variations,
requiring the solver to discern which regions represent true overlaps (third
color) versus incidental color combinations. The minimal edit aspect is evident
as only the overlapping regions (typically small, localized areas) are altered,
while the vast majority of the grid remains unchanged.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
import common
def generate():
    width = random.randint(5, 30)
    height = random.randint(5, 30)
    sprite1 = common.rand_sprite("el", width, height)
    while True:
        sprite2 = common.rand_sprite("you", width, height)
        if set(sprite1) & set(sprite2):
            break
    input_grid = common.grid(width, height, 0)
    for r, c in sprite1:
        input_grid[r][c] = 1
    for r, c in sprite2:
        if (r, c) in sprite1:
            input_grid[r][c] = 3
        else:
            input_grid[r][c] = 2
    output_grid = [row[:] for row in input_grid]
    for r in range(height):
        for c in range(width):
            if output_grid[r][c] == 3:
                output_grid[r][c] = 0
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    output_grid = [row[:] for row in input_grid]
    for r in range(len(input_grid)):
        for c in range(len(input_grid[0])):
            if output_grid[r][c] == 3:
                output_grid[r][c] = 0
    return output_grid
