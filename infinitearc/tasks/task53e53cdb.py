# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-04
# ---------------------------------------------------------------

"""
Task ID: 53e53cdb
Difficulty: medium

=== Tags ===
- Trace perimeter

=== Description ===
The task involves transforming an input grid containing a single connected shape
(represented by non-zero values) into an output grid that outlines the shape's
perimeter. The perimeter consists of all cells within the shape that are
adjacent to the background (value 0) or the grid's edges. In the output, these
perimeter cells are set to value 1, while all other cells are set to 0. This
requires identifying the shape's boundary through connectivity checks and
adjacency analysis, making it a medium-difficulty reasoning task.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common

def generate():
    width = common.randint(3, 20)
    height = common.randint(3, 20)
    size = common.randint(5, 15)
    pixels = common.continuous_creature(size, width, height)
    input_grid = common.grid(width, height, 0)
    color = common.random_color(exclude=[0])
    for (r, c) in pixels:
        input_grid[r][c] = color
    output_grid = common.grid(width, height, 0)
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 0:
                if r == 0 or r == height-1 or c == 0 or c == width-1:
                    output_grid[r][c] = 1
                else:
                    if input_grid[r-1][c] == 0 or input_grid[r+1][c] == 0 or input_grid[r][c-1] == 0 or input_grid[r][c+1] == 0:
                        output_grid[r][c] = 1
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import common

def p(input_grid):
    width = len(input_grid[0])
    height = len(input_grid)
    output_grid = common.grid(width, height, 0)
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 0:
                if r == 0 or r == height-1 or c == 0 or c == width-1:
                    output_grid[r][c] = 1
                else:
                    if input_grid[r-1][c] == 0 or input_grid[r+1][c] == 0 or input_grid[r][c-1] == 0 or input_grid[r][c+1] == 0:
                        output_grid[r][c] = 1
    return output_grid
