# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-10
# ---------------------------------------------------------------

"""
Task ID: abea1efb
Difficulty: easy

=== Tags ===
- Color majority row
- Remove border
- Extrapolate image from grid

=== Description ===
The task involves transforming an input grid by first removing its outer border
(i.e., excluding the first and last rows and columns) to form an inner grid. For
each row in this inner grid, the majority color (the most frequently occurring
color in the row) is identified. The output grid is then generated by replacing
every element in each row with this majority color, resulting in a simplified
grid where each row consists of a single repeated color. This process combines
border removal, row-wise majority analysis, and image simplification
(extrapolation) to produce the output. The transformation is deterministic,
requires minimal computation, and is discoverable through examining a small
number of input-output pairs.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    from common import grid
    width = random.randint(3, 30)
    height = random.randint(3, 30)
    inner_width = width - 2
    inner_height = height - 2
    inner_grid = []
    for _ in range(inner_height):
        majority_color = random.randint(0, 9)
        k = (inner_width + 1) // 2
        row = [majority_color] * k + [random.randint(0, 9) for _ in range(inner_width - k)]
        inner_grid.append(row)
    input_grid = grid(width, height, 0)
    for r in range(height):
        for c in range(width):
            if r == 0 or r == height - 1 or c == 0 or c == width - 1:
                input_grid[r][c] = random.randint(0, 9)
    for r in range(1, height - 1):
        for c in range(1, width - 1):
            input_grid[r][c] = inner_grid[r-1][c-1]
    output_grid = []
    for row in inner_grid:
        majority_color = max(set(row), key=row.count)
        output_grid.append([majority_color] * inner_width)
    return {'input': input_grid, 'output': output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    inner_height = height - 2
    inner_width = width - 2
    inner_grid = []
    for r in range(1, height - 1):
        inner_grid.append(input_grid[r][1:width-1])
    output_grid = []
    for row in inner_grid:
        majority_color = max(set(row), key=row.count)
        output_grid.append([majority_color] * inner_width)
    return output_grid
