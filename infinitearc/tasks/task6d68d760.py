# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: 6d68d760
Difficulty: medium

=== Tags ===
- Take intersection
- Periodic tiling
- Detect wall
- Create grid

=== Description ===
The input grid contains a connected wall represented by color 5 (using
4-directional connectivity). The output grid marks all cells that are part of
this wall and lie on a periodic grid line (i.e., cells where either the row
index or column index is divisible by 3) with a value of 1, while all other
cells are set to 0.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common
import random

def generate():
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    wall_size = random.randint(1, min(20, width * height))
    pixels = common.continuous_creature(wall_size, width, height)
    input_grid = common.grid(width, height, 0)
    for (r, c) in pixels:
        input_grid[r][c] = 5
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 5:
                input_grid[r][c] = random.choice([i for i in range(10) if i != 5])
    output_grid = common.grid(width, height, 0)
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] == 5 and (r % 3 == 0 or c % 3 == 0):
                output_grid[r][c] = 1
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    output_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] == 5 and (r % 3 == 0 or c % 3 == 0):
                output_grid[r][c] = 1
    return output_grid
