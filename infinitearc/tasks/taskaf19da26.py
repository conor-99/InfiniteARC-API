# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-08
# ---------------------------------------------------------------

"""
Task ID: af19da26
Difficulty: easy

=== Tags ===
- Crop
- Color majority column
- Bounce

=== Description ===
The task involves transforming an input grid into an output grid by first
identifying the most frequent non-zero color across all columns of the input
(ignoring zero values). This color determines the path's color in the output.
The output grid maintains the same dimensions as the input. A bouncing path is
drawn using this color, starting at the bottom-left corner (row = height-1,
column = 0), moving right until hitting the right edge, then reversing direction
to move left until hitting the left edge, and repeating this pattern as it moves
upward through each row. All other cells in the output grid remain empty (color
0). The transformation relies solely on the color determined by the input's
column majority, with the path's structure independent of the input's content
beyond this color.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common
import random

def generate():
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    input_grid = common.grid(width, height, 0)
    for r in range(height):
        for c in range(width):
            input_grid[r][c] = random.randint(0, 9)
    
    if all(input_grid[r][c] == 0 for r in range(height) for c in range(width)):
        return generate()
    
    non_zero = [input_grid[r][c] for r in range(height) for c in range(width) if input_grid[r][c] != 0]
    color = max(set(non_zero), key=non_zero.count)
    modes = [c for c in set(non_zero) if non_zero.count(c) == non_zero.count(color)]
    color = min(modes)
    
    output_grid = common.grid(width, height, color)
    
    if input_grid == output_grid:
        return generate()
    
    return {'input': input_grid, 'output': output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import common

def p(input_grid):
    width = len(input_grid[0])
    height = len(input_grid)
    non_zero = [input_grid[r][c] for r in range(height) for c in range(width) if input_grid[r][c] != 0]
    if not non_zero:
        color = 1
    else:
        color = max(set(non_zero), key=non_zero.count)
        modes = [c for c in set(non_zero) if non_zero.count(c) == non_zero.count(color)]
        color = min(modes)
    return common.grid(width, height, color)
