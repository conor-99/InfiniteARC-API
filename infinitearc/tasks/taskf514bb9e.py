# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: f514bb9e
Difficulty: medium

=== Tags ===
- Pattern differences

=== Description ===
The task involves transforming input grids by collapsing consecutive identical
color sequences within each row into single instances. Input grids consist of 2D
arrangements of colors (0-9) where each row contains horizontal runs of the same
color. The output grid is formed by processing each row to replace every maximal
sequence of identical adjacent colors with a single instance of that color. For
example, a row [5,5,5,2,2,3] becomes [5,2,3] in the output. The transformation
applies uniformly across all rows, preserving row order while reducing
horizontal repetition. This requires recognizing visual patterns of color runs
rather than numerical properties, making it a medium-difficulty task that tests
the ability to identify and apply a consistent spatial transformation based on
adjacency.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def collapse_row(row):
    if not row:
        return []
    result = [row[0]]
    for i in range(1, len(row)):
        if row[i] != row[i-1]:
            result.append(row[i])
    return result

def generate():
    width = random.randint(2, 30)
    height = random.randint(1, 30)
    input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    input_grid[0][0] = input_grid[0][1] = random.randint(0, 9)
    output_grid = [collapse_row(row) for row in input_grid]
    max_len = max(len(row) for row in output_grid)
    output_grid = [row + [0] * (max_len - len(row)) for row in output_grid]
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    output = []
    for row in input_grid:
        if not row:
            output.append([])
            continue
        collapsed = [row[0]]
        for i in range(1, len(row)):
            if row[i] != row[i-1]:
                collapsed.append(row[i])
        output.append(collapsed)
    max_len = max(len(row) for row in output)
    return [row + [0] * (max_len - len(row)) for row in output]
