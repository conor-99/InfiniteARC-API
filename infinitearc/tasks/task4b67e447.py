# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-04
# ---------------------------------------------------------------

"""
Task ID: 4b67e447
Difficulty: hard

=== Tags ===
- Connect the dots
- Conditional symmetry

=== Description ===
The input grid consists of a 2D array of integers between 0 and 9, where non-
zero values represent "dots" positioned at specific grid coordinates. The task
requires transforming the input into an output grid by connecting symmetric
pairs of dots with respect to the vertical axis of the grid. For each row, if a
non-zero cell exists at column `c` and its vertically mirrored counterpart at
column `width - 1 - c` also contains a non-zero value, the cells strictly
between these positions (i.e., columns `c+1` to `width - 2 - c`) are filled with
the fixed color 8 (cyan). The original dot colors remain unchanged at the
endpoints, while all other cells retain their input values. This transformation
ensures the output grid is distinct from the input by adding connecting lines
between symmetric dot pairs, with the line color being consistently 8 across all
examples. The presence of at least one symmetric dot pair in the input
guarantees a non-identical output.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid
def generate():
    width = random.randint(3, 30)
    height = random.randint(1, 30)
    input_grid = grid(width, height, 0)
    row = random.randint(0, height - 1)
    c = random.randint(0, (width - 2) // 2)
    color1 = random.randint(1, 9)
    color2 = random.randint(1, 9)
    input_grid[row][c] = color1
    input_grid[row][width - 1 - c] = color2
    output_grid = [row[:] for row in input_grid]
    for col in range(c + 1, width - 1 - c):
        output_grid[row][col] = 8
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    width = len(input_grid[0])
    height = len(input_grid)
    output = [row[:] for row in input_grid]
    for r in range(height):
        for c in range((width - 1) // 2):
            if input_grid[r][c] != 0 and input_grid[r][width - 1 - c] != 0:
                for col in range(c + 1, width - 1 - c):
                    output[r][col] = 8
    return output
