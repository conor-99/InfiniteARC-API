# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-03
# ---------------------------------------------------------------

"""
Task ID: 11439766
Difficulty: easy

=== Tags ===
- Diagonal symmetry
- Size guessing
- Recolor by count
- Measure length

=== Description ===
The input grids are square (NÃ—N) with values between 0 and 9. The output grid is
created by first reflecting the input over its main diagonal (ensuring
output[i][j] = input[j][i] for all i, j), then recoloring each cell: if the
original color (from input[j][i]) appeared more than N times in the input grid,
it is replaced with color 5; otherwise, it remains unchanged. The grid size N
(measured as the diagonal length) serves as the threshold for recoloring,
incorporating "size guessing" and "measure length" through the use of N as the
count threshold.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    N = random.randint(2, 30)
    C1 = random.choice([1,2,3,4,6,7,8,9])
    C2 = random.randint(0, 9)
    while C2 == C1:
        C2 = random.randint(0, 9)
    
    input_grid = [[C1] * N for _ in range(N)]
    input_grid[N-1][N-1] = C2
    
    freq = {}
    for row in input_grid:
        for color in row:
            freq[color] = freq.get(color, 0) + 1
    
    output_grid = [[0] * N for _ in range(N)]
    for i in range(N):
        for j in range(N):
            color = input_grid[j][i]
            if freq[color] > N:
                output_grid[i][j] = 5
            else:
                output_grid[i][j] = color
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    N = len(input_grid)
    freq = {}
    for row in input_grid:
        for color in row:
            freq[color] = freq.get(color, 0) + 1
    
    output_grid = [[0] * N for _ in range(N)]
    for i in range(N):
        for j in range(N):
            color = input_grid[j][i]
            if freq[color] > N:
                output_grid[i][j] = 5
            else:
                output_grid[i][j] = color
    return output_grid
