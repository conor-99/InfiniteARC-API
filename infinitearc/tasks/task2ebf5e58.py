# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: 2ebf5e58
Difficulty: medium

=== Tags ===
- Draw line from border

=== Description ===
The task involves transforming an input grid into an output grid by drawing
straight lines from border cells with non-zero colors. For each cell on the
grid's border (top, bottom, left, or right edge) that contains a non-zero color,
a line is drawn in that color extending perpendicularly into the grid. Top
border cells draw lines downward, bottom border cells upward, left border cells
rightward, and right border cells leftward. The line continues until it reaches
the opposite border, overriding any existing colors along the path. Border cells
with color 0 are ignored. The output grid will differ from the input by
including these newly drawn lines, which are visually distinct and consistent
with the border cell's color.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    w = random.randint(1, 30)
    h = random.randint(1, 30)
    input_grid = [[0] * w for _ in range(h)]
    
    for c in range(w):
        if random.random() < 0.5:
            color = random.randint(1, 9)
            input_grid[0][c] = color
        elif random.random() < 0.5:
            color = random.randint(1, 9)
            input_grid[h-1][c] = color
    
    for r in range(h):
        if random.random() < 0.5:
            color = random.randint(1, 9)
            input_grid[r][0] = color
        elif random.random() < 0.5:
            color = random.randint(1, 9)
            input_grid[r][w-1] = color
    
    has_border = False
    for c in range(w):
        if input_grid[0][c] != 0 or input_grid[h-1][c] != 0:
            has_border = True
    for r in range(h):
        if input_grid[r][0] != 0 or input_grid[r][w-1] != 0:
            has_border = True
    if not has_border:
        c = random.randint(0, w-1)
        input_grid[0][c] = random.randint(1, 9)
    
    output_grid = [row[:] for row in input_grid]
    for c in range(w):
        if input_grid[0][c] != 0:
            color = input_grid[0][c]
            for r in range(h):
                output_grid[r][c] = color
        elif input_grid[h-1][c] != 0:
            color = input_grid[h-1][c]
            for r in range(h):
                output_grid[r][c] = color
    for r in range(h):
        if input_grid[r][0] != 0:
            color = input_grid[r][0]
            for c in range(w):
                output_grid[r][c] = color
        elif input_grid[r][w-1] != 0:
            color = input_grid[r][w-1]
            for c in range(w):
                output_grid[r][c] = color
    
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    if not input_grid:
        return []
    h = len(input_grid)
    w = len(input_grid[0])
    output_grid = [row[:] for row in input_grid]
    
    for c in range(w):
        if input_grid[0][c] != 0:
            color = input_grid[0][c]
            for r in range(h):
                output_grid[r][c] = color
        elif input_grid[h-1][c] != 0:
            color = input_grid[h-1][c]
            for r in range(h):
                output_grid[r][c] = color
    
    for r in range(h):
        if input_grid[r][0] != 0:
            color = input_grid[r][0]
            for c in range(w):
                output_grid[r][c] = color
        elif input_grid[r][w-1] != 0:
            color = input_grid[r][w-1]
            for c in range(w):
                output_grid[r][c] = color
    
    return output_grid
