# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-10
# ---------------------------------------------------------------

"""
Task ID: 5919211e
Difficulty: medium

=== Tags ===
- Direction guesingcrop

=== Description ===
Each input grid contains a single, straight line (horizontal or vertical) of
non-zero values. The orientation of this line determines the direction of
cropping: a horizontal line results in removing the top and bottom rows
(vertical cropping), while a vertical line results in removing the left and
right columns (horizontal cropping). The output grid is the resulting cropped
grid, with dimensions adjusted by the cropping direction. The line is guaranteed
to be the longest straight line in the grid, with no ties, and the input grid is
sufficiently large to allow cropping (at least 3x3).
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common
import random

def generate():
    orientation = random.choice(['horizontal', 'vertical'])
    width = random.randint(3, 30)
    height = random.randint(3, 30)
    input_grid = common.grid(width, height, 0)
    
    if orientation == 'horizontal':
        row = random.randint(1, height-2)
        for c in range(width):
            input_grid[row][c] = 1
        output_grid = input_grid[1:-1]
    else:
        col = random.randint(1, width-2)
        for r in range(height):
            input_grid[r][col] = 1
        output_grid = [row[1:-1] for row in input_grid]
    
    return {'input': input_grid, 'output': output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    width = len(input_grid[0])
    height = len(input_grid)
    
    max_horiz = 0
    for row in input_grid:
        current = 0
        max_in_row = 0
        for color in row:
            if color != 0:
                current += 1
            else:
                if current > max_in_row:
                    max_in_row = current
                current = 0
        if current > max_in_row:
            max_in_row = current
        if max_in_row > max_horiz:
            max_horiz = max_in_row
    
    max_vert = 0
    for c in range(width):
        current = 0
        max_in_col = 0
        for r in range(height):
            if input_grid[r][c] != 0:
                current += 1
            else:
                if current > max_in_col:
                    max_in_col = current
                current = 0
        if current > max_in_col:
            max_in_col = current
        if max_in_col > max_vert:
            max_vert = max_in_col
    
    if max_horiz > max_vert:
        return input_grid[1:-1]
    else:
        return [row[1:-1] for row in input_grid]
