# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-04
# ---------------------------------------------------------------

"""
Task ID: ed86b452
Difficulty: hard

=== Tags ===
- Conditional symmetry

=== Description ===
The task involves transforming an input grid into an output grid based on the
occurrence of the color 5. The input grids are 2D arrays of integers ranging
from 0 to 9, with dimensions between 1×1 and 30×30. The transformation rule is
as follows: if the color 5 appears exactly once in the input grid, the output
grid is the vertical reflection (left-right flip) of the input. If the color 5
appears zero times or more than once, the output grid is the horizontal
reflection (up-down flip) of the input. This requires the solver to identify the
presence and count of a specific color to determine the correct symmetry
operation, making the rule non-obvious and requiring careful analysis of the
input-output pairs to deduce the conditional behavior.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common
import random

def generate():
    width = random.randint(1, 30)
    height = random.randint(1, 30)
    input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    count_5 = sum(row.count(5) for row in input_grid)
    
    if count_5 == 1:
        output_grid = common.flip_horiz(input_grid)
    else:
        output_grid = input_grid[::-1]
    
    while input_grid == output_grid:
        input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
        count_5 = sum(row.count(5) for row in input_grid)
        if count_5 == 1:
            output_grid = common.flip_horiz(input_grid)
        else:
            output_grid = input_grid[::-1]
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import common

def p(input_grid):
    count_5 = sum(row.count(5) for row in input_grid)
    if count_5 == 1:
        return common.flip_horiz(input_grid)
    else:
        return input_grid[::-1]
