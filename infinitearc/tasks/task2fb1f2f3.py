# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-02
# ---------------------------------------------------------------

"""
Task ID: 2fb1f2f3
Difficulty: medium

=== Tags ===
- Extrapolate image from grid
- Pattern deconstruction

=== Description ===
The input grids display a single connected shape composed of non-background
cells (where 0 represents background), forming a contiguous object with a clear
boundary. The output grid is generated by expanding the shape outward by exactly
one cell in all four cardinal directions (up, down, left, right), preserving the
original shape's structure and orientation. This expansion adds a uniform layer
of the shape's color around its entire boundary, resulting in a larger grid
where the new shape's outermost layer is positioned one cell away from the
original shape's boundary on all sides. The transformation is purely visual,
relying on the spatial relationships of the shape's cells rather than numerical
properties. For example, a 3×3 square outline with a 1×1 hole in the center
(input) becomes a 5×5 square outline with a 3×3 hole in the center (output),
maintaining the same relative proportions and symmetry.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
import common

def generate():
    width = random.randint(3, 28)
    height = random.randint(3, 28)
    
    input_grid = common.grid(width, height, 0)
    shape_color = random.randint(1, 9)
    
    max_shape_size = (width - 2) * (height - 2)
    if max_shape_size < 3:
        max_shape_size = 3
    shape_size = random.randint(3, max_shape_size)
    
    pixels = common.continuous_creature(shape_size, width-2, height-2)
    pixels = [(p[0]+1, p[1]+1) for p in pixels]
    
    for r, c in pixels:
        input_grid[r][c] = shape_color
    
    output_grid = common.grid(width+2, height+2, 0)
    
    for r in range(height):
        for c in range(width):
            output_grid[r+1][c+1] = input_grid[r][c]
    
    for c in range(width+2):
        output_grid[0][c] = shape_color
        output_grid[height+1][c] = shape_color
    for r in range(height+2):
        output_grid[r][0] = shape_color
        output_grid[r][width+1] = shape_color
    
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import common

def p(input_grid):
    if not input_grid:
        return []
    
    shape_color = 0
    for row in input_grid:
        for val in row:
            if val != 0:
                shape_color = val
                break
        if shape_color:
            break
    
    if shape_color == 0:
        return input_grid
    
    height = len(input_grid)
    width = len(input_grid[0])
    
    output_grid = common.grid(width+2, height+2, 0)
    
    for r in range(height):
        for c in range(width):
            output_grid[r+1][c+1] = input_grid[r][c]
    
    for c in range(width+2):
        output_grid[0][c] = shape_color
        output_grid[height+1][c] = shape_color
    for r in range(height+2):
        output_grid[r][0] = shape_color
        output_grid[r][width+1] = shape_color
    
    return output_grid
