# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: 68532219
Difficulty: medium

=== Tags ===
- Homeomorphism
- Associate images to numbers
- Find and fix broken symmetry
- Associate colors to colors

=== Description ===
The task involves transforming input grids to output grids by correcting broken
vertical symmetry through a fixed color association rule. Input grids feature a
symmetric arrangement of non-zero cells (e.g., identical patterns on both left
and right sides), but with inconsistent color assignments that disrupt symmetry.
The output grid is generated by applying a predefined color-to-color mapping
(e.g., color 2 maps to 3, color 4 maps to 5) to every cell in the input. This
mapping ensures that for every cell on one side of the vertical axis, its
mirrored counterpart on the opposite side has the associated color, restoring
perfect vertical symmetry. The color associations are consistent across all
grids in the task and do not depend on input content. The solution requires
recognizing the symmetry axis, identifying the color mapping rule, and applying
it uniformly to all cells to resolve the symmetry break.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(3, 29)
    if width % 2 == 0:
        width += 1
    height = random.randint(1, 30)
    grid_input = [[1] * width for _ in range(height)]
    center = width // 2
    columns_to_break = []
    while not columns_to_break:
        columns_to_break = [c for c in range(center) if random.random() < 0.5]
    for c in columns_to_break:
        for r in range(height):
            grid_input[r][c] = 2
            grid_input[r][width - 1 - c] = 3
    def map_color(c):
        return 3 if c == 2 else c
    grid_output = [[map_color(c) for c in row] for row in grid_input]
    return {
        "input": grid_input,
        "output": grid_output
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    def map_color(c):
        return 3 if c == 2 else c
    return [[map_color(c) for c in row] for row in input_grid]
