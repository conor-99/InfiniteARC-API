# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: 1bd066c7
Difficulty: easy

=== Tags ===
- Take intersection

=== Description ===
The task involves transforming an input grid into an output grid by identifying
the intersection point of a unique horizontal line and a unique vertical line.
The input grid contains exactly one complete horizontal line (a row where all
cells have the same non-zero color) and exactly one complete vertical line (a
column where all cells have the same non-zero color). The output grid retains
only the cell at the intersection of these two lines, preserving its original
color, while all other cells are set to 0. This transformation relies on visual
recognition of contiguous lines in the grid, without requiring numerical
computations or memorization of specific patterns. The solution is consistent
across all valid inputs, as the horizontal and vertical lines are guaranteed to
intersect at exactly one location.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(2, 30)
    height = random.randint(2, 30)
    C = random.randint(1, 9)
    r = random.randint(0, height-1)
    c = random.randint(0, width-1)
    
    input_grid = [[0] * width for _ in range(height)]
    # Fill row r with C
    for j in range(width):
        input_grid[r][j] = C
    # Fill column c with C
    for i in range(height):
        input_grid[i][c] = C
    
    output_grid = [[0] * width for _ in range(height)]
    output_grid[r][c] = C
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    
    # Find the row that is entirely the same non-zero color
    row_idx = None
    for i in range(height):
        color = input_grid[i][0]
        if color != 0 and all(x == color for x in input_grid[i]):
            row_idx = i
            break
    if row_idx is None:
        row_idx = 0
    
    # Find the column that is entirely the same non-zero color
    col_idx = None
    for j in range(width):
        color = input_grid[0][j]
        if color != 0 and all(input_grid[i][j] == color for i in range(height)):
            col_idx = j
            break
    if col_idx is None:
        col_idx = 0
    
    # Create output grid with only the intersection cell set to color
    output_grid = [[0] * width for _ in range(height)]
    output_grid[row_idx][col_idx] = input_grid[row_idx][col_idx]
    return output_grid
