# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-09
# ---------------------------------------------------------------

"""
Task ID: 22547a4a
Difficulty: easy

=== Tags ===
- Color permutation
- Portals
- Duplicate column pattern
- Pattern resizing

=== Description ===
The input grids are 2D arrays of integers between 0 and 9, representing colors.
The transformation follows two consistent steps: First, identify the leftmost
column containing the color 5 (the "portal"). Duplicate this column immediately
to its right, expanding the grid width by 1. Second, apply a fixed color
permutation where each color value c is replaced with (c + 1) mod 10 (e.g., 0
becomes 1, 1 becomes 2, ..., 9 becomes 0). This process ensures the output grid
maintains the portal's column duplication pattern while consistently
transforming all colors through the defined permutation. The task is designed to
be intuitive, relying on clear column-based duplication and a simple arithmetic
color shift.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
def generate():
    width = random.randint(1, 29)
    height = random.randint(1, 30)
    input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    
    if not any(5 in row for row in input_grid):
        r, c = random.randint(0, height-1), random.randint(0, width-1)
        input_grid[r][c] = 5
    
    col_idx = None
    for c in range(width):
        for r in range(height):
            if input_grid[r][c] == 5:
                col_idx = c
                break
        if col_idx is not None:
            break
    if col_idx is None:
        col_idx = 0
    
    output_grid = []
    for r in range(height):
        new_row = input_grid[r][:col_idx+1] + [input_grid[r][col_idx]] + input_grid[r][col_idx+1:]
        output_grid.append(new_row)
    
    for r in range(height):
        for c in range(len(output_grid[r])):
            output_grid[r][c] = (output_grid[r][c] + 1) % 10
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if isinstance(input_grid, tuple):
        input_grid = [list(row) for row in input_grid]
    height = len(input_grid)
    width = len(input_grid[0])
    
    col_idx = None
    for c in range(width):
        for r in range(height):
            if input_grid[r][c] == 5:
                col_idx = c
                break
        if col_idx is not None:
            break
    if col_idx is None:
        col_idx = 0
    
    output_grid = []
    for r in range(height):
        new_row = input_grid[r][:col_idx+1] + [input_grid[r][col_idx]] + input_grid[r][col_idx+1:]
        output_grid.append(new_row)
    
    for r in range(height):
        for c in range(len(output_grid[r])):
            output_grid[r][c] = (output_grid[r][c] + 1) % 10
    
    return output_grid
