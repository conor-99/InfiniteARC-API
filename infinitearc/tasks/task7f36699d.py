# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: 7f36699d
Difficulty: hard

=== Tags ===
- Pattern differences
- Substitution rule discovery

=== Description ===
In this task, each cell in the output grid is determined by the count of its
corresponding input value across the entire input grid, modulo 10. For example,
if the input grid contains seven instances of the number 4, each 4 is replaced
with 7 (7 mod 10 = 7). The transformation requires recognizing that the output
value for each number depends on how frequently that number appears globally in
the input, rather than on local patterns, position, or simple arithmetic
operations. This creates a pattern difference where the output reflects
statistical properties of the input, making the substitution rule challenging to
discover without analyzing the grid's global frequency distribution. The rule is
consistent, deterministic, and generalizable across all input grids, requiring
abstract reasoning about value distribution rather than visual or spatial
pattern matching.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    while True:
        width = random.randint(1, 30)
        height = random.randint(1, 30)
        input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
        count = [0] * 10
        for row in input_grid:
            for val in row:
                count[val] += 1
        output_grid = [[count[val] % 10 for val in row] for row in input_grid]
        if input_grid != output_grid:
            return {
                "input": input_grid,
                "output": output_grid
            }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    count = [0] * 10
    for row in input_grid:
        for val in row:
            count[val] += 1
    return [[count[val] % 10 for val in row] for row in input_grid]
