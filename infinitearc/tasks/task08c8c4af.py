# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: 08c8c4af
Difficulty: insane

=== Tags ===
- Minimal description length
- Take intersection
- Reconstruct from projections
- Pattern repetition

=== Description ===
The input grid contains a complex arrangement of colors where each row and
column exhibits a distinct pattern. The output grid is derived by identifying,
for each position (i,j), the single color that appears in both the i-th row and
j-th column of the input grid. This requires analyzing the color sets of every
row and column and finding their unique intersection point. The input is
meticulously constructed to ensure that for every row and column pair, exactly
one color overlaps, forming a non-obvious pattern in the output that emerges
from the combinatorial intersection of horizontal and vertical color
distributions. The transformation relies solely on visual recognition of
overlapping color sets, with no numerical calculations or pixel-based heuristics
required.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    size = 3
    input_grid = [[random.randint(1, 9) for _ in range(size)] for _ in range(size)]
    output_grid = [[0] * size for _ in range(size)]
    for i in range(size):
        row_colors = set(input_grid[i])
        for j in range(size):
            col_colors = set(input_grid[k][j] for k in range(size))
            intersection = row_colors & col_colors
            output_grid[i][j] = list(intersection)[0]
    
    # Ensure input != output using a while loop
    while input_grid == output_grid:
        input_grid[0][0] = (input_grid[0][0] + 1) % 9 + 1
        output_grid = [[0] * size for _ in range(size)]
        for i in range(size):
            row_colors = set(input_grid[i])
            for j in range(size):
                col_colors = set(input_grid[k][j] for k in range(size))
                intersection = row_colors & col_colors
                output_grid[i][j] = list(intersection)[0]
    
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    size = len(input_grid)
    output = [[0] * size for _ in range(size)]
    for i in range(size):
        row_colors = set(input_grid[i])
        for j in range(size):
            col_colors = set(input_grid[k][j] for k in range(size))
            intersection = row_colors & col_colors
            output[i][j] = list(intersection)[0]
    return output
