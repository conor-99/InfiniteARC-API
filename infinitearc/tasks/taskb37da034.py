# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-03
# ---------------------------------------------------------------

"""
Task ID: b37da034
Difficulty: medium

=== Tags ===
- Pattern intersection

=== Description ===
The input grid contains a single contiguous horizontal line (a sequence of
identical non-background colors in a single row) and a single contiguous
vertical line (a sequence of identical non-background colors in a single
column), both using the same non-background color. The output grid is formed by
marking the intersection point of these two lines with color 9, while all other
cells remain background color (0). The horizontal line must span multiple
columns in one row, and the vertical line must span multiple rows in one column,
with their intersection being the only cell that belongs to both sequences.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(2, 30)
    height = random.randint(2, 30)
    c = random.randint(1, 8)
    r = random.randint(0, height-1)
    c_col = random.randint(0, width-1)
    
    # Ensure horizontal line has length >=2
    s_h = max(0, c_col - 1)
    e_h = min(width - 1, c_col + 1)
    
    # Ensure vertical line has length >=2
    s_v = max(0, r - 1)
    e_v = min(height - 1, r + 1)
    
    input_grid = [[0]*width for _ in range(height)]
    for col in range(s_h, e_h + 1):
        input_grid[r][col] = c
    for row in range(s_v, e_v + 1):
        input_grid[row][c_col] = c
    
    output_grid = [[0]*width for _ in range(height)]
    output_grid[r][c_col] = 9
    
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    c = None
    for i in range(len(input_grid)):
        for j in range(len(input_grid[0])):
            if input_grid[i][j] != 0:
                c = input_grid[i][j]
                break
        if c is not None:
            break
    if c is None:
        return [[0]*len(input_grid[0]) for _ in range(len(input_grid))]
    
    r = None
    for i in range(len(input_grid)):
        for j in range(1, len(input_grid[0])):
            if input_grid[i][j] == c and input_grid[i][j-1] == c:
                r = i
                break
        if r is not None:
            break
    
    c_col = None
    for j in range(len(input_grid[0])):
        for i in range(1, len(input_grid)):
            if input_grid[i][j] == c and input_grid[i-1][j] == c:
                c_col = j
                break
        if c_col is not None:
            break
    
    output_grid = [[0]*len(input_grid[0]) for _ in range(len(input_grid))]
    output_grid[r][c_col] = 9
    return output_grid
