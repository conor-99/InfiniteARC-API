# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-02
# ---------------------------------------------------------------

"""
Task ID: 41b315e2
Difficulty: medium

=== Tags ===
- Move object based on arrow
- Path following

=== Description ===
The input grids feature a single object cell (a single non-zero color value)
that must be moved according to the direction visually indicated by its color.
The direction is consistent across all grids, with each color representing a
specific cardinal direction (e.g., a color associated with a right-pointing
arrow symbol corresponds to a rightward move). The output grid shows the object
moved exactly one cell in the direction encoded by its color, with the original
position set to empty (0). The movement always remains within grid boundaries,
and the direction mapping is discoverable through visual inspection of input-
output examples without relying on numerical values or sums.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import common
import random

def generate():
    width = random.randint(2, 30)
    height = random.randint(2, 30)
    color = random.choice([1, 2, 3, 4])
    if color == 1:
        dr, dc = 0, 1
        c = random.randint(0, width - 2)
        r = random.randint(0, height - 1)
    elif color == 2:
        dr, dc = 0, -1
        c = random.randint(1, width - 1)
        r = random.randint(0, height - 1)
    elif color == 3:
        dr, dc = -1, 0
        r = random.randint(1, height - 1)
        c = random.randint(0, width - 1)
    elif color == 4:
        dr, dc = 1, 0
        r = random.randint(0, height - 2)
        c = random.randint(0, width - 1)
    
    input_grid = common.grid(width, height, 0)
    input_grid[r][c] = color
    output_grid = common.grid(width, height, 0)
    output_grid[r + dr][c + dc] = color
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import common

def p(input_grid):
    width = len(input_grid[0])
    height = len(input_grid)
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 0:
                color = input_grid[r][c]
                if color == 1:
                    dr, dc = 0, 1
                elif color == 2:
                    dr, dc = 0, -1
                elif color == 3:
                    dr, dc = -1, 0
                elif color == 4:
                    dr, dc = 1, 0
                else:
                    dr, dc = 0, 0
                new_r = r + dr
                new_c = c + dc
                output_grid = common.grid(width, height, 0)
                output_grid[new_r][new_c] = color
                return output_grid
