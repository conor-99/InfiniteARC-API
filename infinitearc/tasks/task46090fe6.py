# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: 46090fe6
Difficulty: mediumâ€“hard

=== Tags ===
- Terrain erosion
- Compositional reflection
- Color stream
- Count ver lines

=== Description ===
Input grids feature a background color with multiple vertical columns of solid
color, each spanning the full height of the grid and separated by background
cells. A horizontal sequence of distinct colors appears in the top row, matching
the left-to-right order of the vertical columns. The number of colors in this
sequence equals the count of vertical columns.  The transformation applies two
sequential operations. First, for each vertical column, the topmost cells are
removed (turned to background) in a quantity corresponding to the numerical
value of the color in the top row sequence. Second, the entire grid is reflected
horizontally (mirrored across its vertical midline), preserving all non-
background elements while reversing their left-right positions. The background
remains unchanged throughout, and no vertical column is completely erased
(removing all cells). The output grid displays the eroded columns followed by
the horizontally mirrored structure.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    n = random.randint(2, 8)
    colors = random.sample(range(1, 10), n)
    height = max(colors) + 2
    width = 2 * (n - 1) + 1 + random.randint(0, 5)
    input_grid = [[0] * width for _ in range(height)]
    for i, color in enumerate(colors):
        col_pos = 2 * i
        for r in range(height):
            input_grid[r][col_pos] = color
    output_grid = [row[:] for row in input_grid]
    for i, color in enumerate(colors):
        col_pos = 2 * i
        for r in range(color):
            output_grid[r][col_pos] = 0
    output_grid = [row[::-1] for row in output_grid]
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    input_list = [list(row) for row in input_grid]
    width = len(input_list[0])
    for j in range(width):
        if input_list[0][j] != 0:
            c = input_list[0][j]
            for r in range(c):
                input_list[r][j] = 0
    output_grid = [row[::-1] for row in input_list]
    return output_grid
