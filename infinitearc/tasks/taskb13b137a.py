# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-06
# ---------------------------------------------------------------

"""
Task ID: b13b137a
Difficulty: medium

=== Tags ===
- Pattern resizing
- Take maximum
- Summarize

=== Description ===
The input grids are 2D grids of integers ranging from 0 to 9, with dimensions
between 2×2 and 30×30. The output grid is generated by dividing the input into
non-overlapping 2×2 blocks (starting from the top-left corner), taking the
maximum value in each block (including partial blocks along the edges), and
arranging these maxima into a new grid where each block corresponds to a single
cell. For example, a 4×4 input grid is divided into four 2×2 blocks, resulting
in a 2×2 output grid where each cell contains the maximum value from the
corresponding input block. This process effectively downsamples the input while
preserving the dominant value within each spatial region, creating a summarized
representation of the original pattern.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(2, 30)
    height = random.randint(2, 30)
    input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    h_out = (height + 1) // 2
    w_out = (width + 1) // 2
    output_grid = [[0] * w_out for _ in range(h_out)]
    for i in range(h_out):
        for j in range(w_out):
            r_start = 2 * i
            r_end = min(2 * i + 1, height - 1)
            c_start = 2 * j
            c_end = min(2 * j + 1, width - 1)
            max_val = 0
            for r in range(r_start, r_end + 1):
                for c in range(c_start, c_end + 1):
                    if input_grid[r][c] > max_val:
                        max_val = input_grid[r][c]
            output_grid[i][j] = max_val
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    h_out = (height + 1) // 2
    w_out = (width + 1) // 2
    output_grid = [[0] * w_out for _ in range(h_out)]
    for i in range(h_out):
        for j in range(w_out):
            r_start = 2 * i
            r_end = min(2 * i + 1, height - 1)
            c_start = 2 * j
            c_end = min(2 * j + 1, width - 1)
            max_val = 0
            for r in range(r_start, r_end + 1):
                for c in range(c_start, c_end + 1):
                    if input_grid[r][c] > max_val:
                        max_val = input_grid[r][c]
            output_grid[i][j] = max_val
    return output_grid
