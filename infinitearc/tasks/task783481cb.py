# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: 783481cb
Difficulty: hard

=== Tags ===
- Symbolic color algebra

=== Description ===
Input grids are 2D grids with dimensions between 1×1 and 30×30, containing
colors 0–9. The top-left 2×2 subgrid (positions (0,0), (0,1), (1,0), (1,1))
contains four distinct colors. The output grid transforms each color c in the
input by replacing it with the next color in a cyclic sequence defined by the
key. The sequence is ordered row-wise (top-left, top-right, bottom-left, bottom-
right), forming a cycle where each color maps to the subsequent color, wrapping
around (e.g., the fourth color maps to the first). Colors not present in the key
remain unchanged. The transformation must be applied consistently across the
entire grid, ensuring no input grid is identical to its output.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    w = random.randint(2, 30)
    h = random.randint(2, 30)
    input_grid = [[random.randint(0, 9) for _ in range(w)] for _ in range(h)]
    colors = random.sample(range(0, 10), 4)
    input_grid[0][0] = colors[0]
    input_grid[0][1] = colors[1]
    input_grid[1][0] = colors[2]
    input_grid[1][1] = colors[3]
    output_grid = [row[:] for row in input_grid]
    a, b, c, d = colors
    mapping = {a: b, b: c, c: d, d: a}
    for r in range(h):
        for c in range(w):
            if output_grid[r][c] in mapping:
                output_grid[r][c] = mapping[output_grid[r][c]]
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    grid = [list(row) for row in input_grid]
    a = grid[0][0]
    b = grid[0][1]
    c = grid[1][0]
    d = grid[1][1]
    mapping = {a: b, b: c, c: d, d: a}
    for r in range(len(grid)):
        for c in range(len(grid[0])):
            if grid[r][c] in mapping:
                grid[r][c] = mapping[grid[r][c]]
    return tuple(tuple(row) for row in grid)
