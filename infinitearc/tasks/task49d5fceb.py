# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-07
# ---------------------------------------------------------------

"""
Task ID: 49d5fceb
Difficulty: medium

=== Tags ===
- Reflect by color
- Expand repeating unit
- Take complement
- Pattern deconstruction

=== Description ===
The input grid consists of a repeating 2×2 pattern that tiles the entire grid.
To generate the output grid, first decompose the input into its smallest
repeating 2×2 unit. Next, expand each cell of this unit into a 3×3 block,
maintaining its original color. Then, reflect each 3×3 block horizontally if its
color is odd or vertically if even. Finally, replace every color `c` in the
resulting grid with its complement `9 - c`, mapping 0→9, 1→8, 2→7, etc. This
transformation combines pattern deconstruction (identifying the repeating unit),
expansion (scaling each cell to 3×3), reflection (direction based on color
parity), and complement (color inversion).
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    unit = [[random.randint(0,9) for _ in range(2)] for _ in range(2)]
    width = random.choice([i for i in range(2, 31) if i % 2 == 0])
    height = random.choice([i for i in range(2, 31) if i % 2 == 0])
    input_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            input_grid[r][c] = unit[r % 2][c % 2]
    output_grid = [[0] * 6 for _ in range(6)]
    for i in range(2):
        for j in range(2):
            c = unit[i][j]
            block = [[c]*3 for _ in range(3)]
            if c % 2 == 1:
                block = [row[::-1] for row in block]
            else:
                block = block[::-1]
            for r in range(3):
                for col in range(3):
                    block[r][col] = 9 - block[r][col]
            for r in range(3):
                for col in range(3):
                    output_grid[i*3 + r][j*3 + col] = block[r][col]
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    unit = [
        [input_grid[0][0], input_grid[0][1]],
        [input_grid[1][0], input_grid[1][1]]
    ]
    output_grid = [[0] * 6 for _ in range(6)]
    for i in range(2):
        for j in range(2):
            c = unit[i][j]
            block = [[c]*3 for _ in range(3)]
            if c % 2 == 1:
                block = [row[::-1] for row in block]
            else:
                block = block[::-1]
            for r in range(3):
                for col in range(3):
                    block[r][col] = 9 - block[r][col]
            for r in range(3):
                for col in range(3):
                    output_grid[i*3 + r][j*3 + col] = block[r][col]
    return output_grid
