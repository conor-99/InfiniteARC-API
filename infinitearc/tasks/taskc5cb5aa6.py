# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: c5cb5aa6
Difficulty: insane

=== Tags ===
- Periodic reflection
- Rule embedding
- Color by distance to edge
- Concentric

=== Description ===
The input grid consists of a 2D array of colors (0-9) representing a visual
pattern. For each cell (r, c) in the output grid, the color is determined by
reflecting the input grid's color according to the cell's concentric layer. The
concentric layer is defined by the minimum distance to any edge (d = min(r,
height-1-r, c, width-1-c)). If d is even, the output cell (r, c) takes the color
from the input cell vertically reflected across the horizontal midline
(height-1-r, c). If d is odd, it takes the color from the input cell
horizontally reflected across the vertical midline (r, width-1-c). This
transformation creates a periodic reflection pattern where the reflection
direction alternates between vertical and horizontal every concentric layer,
embedding the reflection rule within the geometric structure of the grid. The
output grid visually manifests this alternating reflection cycle, with colors
arranged in concentric bands that shift direction based on their distance from
the grid's boundary. The pattern requires recognizing the periodic nature of the
reflection rule and applying it consistently across all layers, making it
challenging to discern without analyzing multiple layers simultaneously.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    while True:
        width = random.randint(2, 30)
        height = random.randint(2, 30)
        input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
        output_grid = [[0] * width for _ in range(height)]
        for r in range(height):
            for c in range(width):
                d = min(r, height - 1 - r, c, width - 1 - c)
                if d % 2 == 0:
                    ref_r, ref_c = height - 1 - r, c
                else:
                    ref_r, ref_c = r, width - 1 - c
                output_grid[r][c] = input_grid[ref_r][ref_c]
        if input_grid != output_grid:
            return {
                "input": input_grid,
                "output": output_grid
            }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    input_list = [list(row) for row in input_grid]
    height = len(input_list)
    width = len(input_list[0])
    output_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            d = min(r, height - 1 - r, c, width - 1 - c)
            if d % 2 == 0:
                ref_r, ref_c = height - 1 - r, c
            else:
                ref_r, ref_c = r, width - 1 - c
            output_grid[r][c] = input_list[ref_r][ref_c]
    return output_grid
