# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-09
# ---------------------------------------------------------------

"""
Task ID: 2a4430c5
Difficulty: medium

=== Tags ===
- Staircase construction
- Replace pattern
- Background filling

=== Description ===
The task involves transforming an input grid into an output grid by constructing
a staircase pattern along the main diagonal (top-left to bottom-right) and
filling the remaining background cells. The input grid contains a single non-
zero color (foreground) in some cells, while all other cells are zero
(background). The transformation rule is as follows: identify the foreground
color from the input grid (which will be the same across all non-zero cells),
set all cells on the main diagonal (where row index equals column index) to this
foreground color, and fill all non-diagonal cells with a fixed background color
(e.g., 5). This process requires recognizing the foreground color, applying a
diagonal pattern (staircase construction), and replacing all background cells
(background filling) with the designated color. The output grid's diagonal
pattern forms a consistent staircase structure, while the background is
uniformly filled, ensuring the transformation is general and discoverable
through inductive reasoning.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random

def generate():
    width = random.randint(2, 30)
    height = random.randint(2, 30)
    c = random.randint(1, 9)
    input_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c_col in range(width):
            if random.random() > 0.5:
                input_grid[r][c_col] = c
    if all(cell == 0 for row in input_grid for cell in row):
        input_grid[0][0] = c
    output_grid = [[5] * width for _ in range(height)]
    for i in range(min(width, height)):
        output_grid[i][i] = c
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

import random

def p(input_grid):
    colors = set()
    for row in input_grid:
        for cell in row:
            if cell != 0:
                colors.add(cell)
    c = colors.pop()
    width = len(input_grid[0])
    height = len(input_grid)
    output_grid = [[5] * width for _ in range(height)]
    for i in range(min(width, height)):
        output_grid[i][i] = c
    return output_grid
