# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-03
# ---------------------------------------------------------------

"""
Task ID: 758f5deb
Difficulty: medium

=== Tags ===
- Compare image
- Separate images
- Detect wall
- Associate images to patterns

=== Description ===
The task involves input grids containing two distinct regions (images) separated
by a single straight wall composed of color 5 pixels. The wall is either
horizontal (spanning all columns at a single row) or vertical (spanning all rows
at a single column). The transformation requires first identifying and removing
the wall (replacing color 5 with background color 0), then applying a stripe
pattern to each region based on the wall's orientation. For a horizontal wall,
each region is filled with horizontal stripes (alternating the region's original
color with 0 in rows). For a vertical wall, each region is filled with vertical
stripes (alternating the region's original color with 0 in columns). The output
grid thus separates the images by removing the wall and associates each image
with a stripe pattern corresponding to the wall's direction.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
def generate():
    width = random.randint(3, 30)
    height = random.randint(3, 30)
    if random.choice([True, False]):
        r = random.randint(1, height - 2)
        top_color = random.randint(1, 9)
        while top_color == 5:
            top_color = random.randint(1, 9)
        bottom_color = random.randint(1, 9)
        while bottom_color == 5 or bottom_color == top_color:
            bottom_color = random.randint(1, 9)
        input_grid = [[top_color] * width for _ in range(r)] + [[5] * width] + [[bottom_color] * width for _ in range(height - r - 1)]
        output_grid = []
        for i in range(r):
            output_grid.append([top_color if i % 2 == 0 else 0] * width)
        output_grid.append([0] * width)
        for i in range(r + 1, height):
            output_grid.append([bottom_color if (i - r - 1) % 2 == 0 else 0] * width)
    else:
        c = random.randint(1, width - 2)
        left_color = random.randint(1, 9)
        while left_color == 5:
            left_color = random.randint(1, 9)
        right_color = random.randint(1, 9)
        while right_color == 5 or right_color == left_color:
            right_color = random.randint(1, 9)
        input_grid = []
        for i in range(height):
            row = [left_color] * c + [5] + [right_color] * (width - c - 1)
            input_grid.append(row)
        output_grid = []
        for i in range(height):
            row = []
            for j in range(c):
                row.append(left_color if j % 2 == 0 else 0)
            row.append(0)
            for j in range(c + 1, width):
                row.append(right_color if (j - c - 1) % 2 == 0 else 0)
            output_grid.append(row)
    return {
        "input": input_grid,
        "output": output_grid
    }


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    height = len(input_grid)
    width = len(input_grid[0])
    wall_row = None
    for r in range(height):
        if all(x == 5 for x in input_grid[r]):
            wall_row = r
            break
    if wall_row is not None:
        top_color = input_grid[0][0]
        bottom_color = input_grid[wall_row + 1][0]
        output_grid = []
        for i in range(wall_row):
            output_grid.append([top_color if i % 2 == 0 else 0] * width)
        output_grid.append([0] * width)
        for i in range(wall_row + 1, height):
            output_grid.append([bottom_color if (i - wall_row - 1) % 2 == 0 else 0] * width)
        return output_grid
    else:
        wall_col = None
        for c in range(width):
            if all(input_grid[r][c] == 5 for r in range(height)):
                wall_col = c
                break
        if wall_col is None:
            return input_grid
        left_color = input_grid[0][0]
        right_color = input_grid[0][wall_col + 1]
        output_grid = []
        for i in range(height):
            row = []
            for j in range(wall_col):
                row.append(left_color if j % 2 == 0 else 0)
            row.append(0)
            for j in range(wall_col + 1, width):
                row.append(right_color if (j - wall_col - 1) % 2 == 0 else 0)
            output_grid.append(row)
        return output_grid
