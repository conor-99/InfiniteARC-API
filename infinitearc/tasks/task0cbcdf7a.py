# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-11
# ---------------------------------------------------------------

"""
Task ID: 0cbcdf7a
Difficulty: easy

=== Tags ===
- Dominant color
- Bridges
- Color majority row
- Project shadow

=== Description ===
The task involves transforming an input grid into an output grid based on the
dominant color of the entire input and the majority color of each row. The
dominant color is the most frequently occurring color in the entire grid. For
each row in the input, the majority color (the color that appears most in that
row) is compared to the dominant color. If they match, the corresponding output
row is filled entirely with the dominant color. If they do not match, the output
row is filled with a fixed shadow color (gray, represented as 5). The "Bridges"
aspect arises because rows filled with the dominant color form a connected,
bridge-like structure across the grid. The "Project shadow" aspect describes the
uniform application of the shadow color (5) to rows where the row's majority
color does not match the dominant color, effectively projecting the shadow onto
those rows.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

def generate():
    import random
    h = random.randint(2, 30)
    w = random.randint(1, 30)
    c_d = random.randint(1, 9)
    colors = [i for i in range(1, 10) if i != c_d and i != 5]
    c_n = random.choice(colors) if colors else 6
    d_rows = h // 2 + 1
    input_grid = [[c_d] * w for _ in range(d_rows)] + [[c_n] * w for _ in range(h - d_rows)]
    output_grid = [[c_d] * w for _ in range(d_rows)] + [[5] * w for _ in range(h - d_rows)]
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    from collections import Counter
    all_vals = [val for row in input_grid for val in row]
    dominant = Counter(all_vals).most_common(1)[0][0]
    output = []
    for row in input_grid:
        row_count = Counter(row)
        majority = row_count.most_common(1)[0][0]
        if majority == dominant:
            output.append([dominant] * len(row))
        else:
            output.append([5] * len(row))
    return output
