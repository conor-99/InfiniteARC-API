# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-04
# ---------------------------------------------------------------

"""
Task ID: 3bcdf3e8
Difficulty: insane

=== Tags ===
- Remove intruder
- Take complement
- Create grid
- Order numbers

=== Description ===
The input grid is a 2D grid of integers ranging from 0 to 9, with dimensions
between 1×1 and 30×30. The output grid is generated through the following
deterministic steps: First, identify the value that appears least frequently in
the input grid; if multiple values share the same minimal frequency, select the
smallest such value as the "intruder." Second, replace all occurrences of this
intruder value with 0. Third, apply a complement operation to each cell,
transforming each value `x` into `9 - x`. Finally, sort each row of the
transformed grid in ascending numerical order. This sequence of
operations—removing the intruder value, taking the complement, and ordering
numbers—creates a consistent and discoverable pattern that requires abstract
reasoning to infer from limited input-output examples. The task demands
recognizing the intruder through frequency analysis, executing arithmetic
transformations, and applying sorting rules, making it challenging for "insane"
difficulty.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import randint

def generate():
    width = randint(1, 30)
    height = randint(1, 30)
    input_grid = [[random.randint(0, 9) for _ in range(width)] for _ in range(height)]
    freq = {}
    for row in input_grid:
        for cell in row:
            freq[cell] = freq.get(cell, 0) + 1
    min_freq = min(freq.values())
    candidates = [val for val, count in freq.items() if count == min_freq]
    intruder = min(candidates)
    temp = [[0 if cell == intruder else cell for cell in row] for row in input_grid]
    comp = [[9 - cell for cell in row] for row in temp]
    output_grid = [sorted(row) for row in comp]
    if input_grid == output_grid:
        return generate()
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    freq = {}
    for row in input_grid:
        for cell in row:
            freq[cell] = freq.get(cell, 0) + 1
    min_freq = min(freq.values())
    candidates = [val for val, count in freq.items() if count == min_freq]
    intruder = min(candidates)
    temp = [[0 if cell == intruder else cell for cell in row] for row in input_grid]
    comp = [[9 - cell for cell in row] for row in temp]
    output_grid = [sorted(row) for row in comp]
    return output_grid
