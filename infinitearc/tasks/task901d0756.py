# ---------------------------------------------------------------
# This file was automatically generated. DO NOT EDIT MANUALLY.
# 
# Generated by: conor-99/InfiniteARC/prepare.py
# Date: 2025-11-10
# ---------------------------------------------------------------

"""
Task ID: 901d0756
Difficulty: easy

=== Tags ===
- Detect hor lines
- Maze

=== Description ===
The input grid represents a maze where non-zero values denote walls. The output
grid retains only the horizontal wall segmentsâ€”cells that are part of a
continuous horizontal run of the same non-zero color (i.e., each cell must have
at least one horizontal neighbor with the same color). All other cells in the
output grid are set to zero. This transformation detects horizontal lines within
the maze structure and filters out vertical segments and isolated cells.
"""


# ---------------------------------------------------------------
# Generator Code
# ---------------------------------------------------------------

import random
from common import grid
def generate():
    width = random.randint(2, 30)
    height = random.randint(1, 30)
    input_grid = grid(width, height, 0)
    
    color_h = random.randint(1, 9)
    r_h = random.randint(0, height-1)
    c_h = random.randint(0, width-2)
    input_grid[r_h][c_h] = color_h
    input_grid[r_h][c_h+1] = color_h
    
    color_i = random.randint(1, 9)
    while color_i == color_h:
        color_i = random.randint(1, 9)
    r_i = random.randint(0, height-1)
    c_i = random.randint(0, width-1)
    input_grid[r_i][c_i] = color_i
    
    output_grid = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 0:
                left_ok = (c > 0 and input_grid[r][c-1] == input_grid[r][c])
                right_ok = (c < width-1 and input_grid[r][c+1] == input_grid[r][c])
                if left_ok or right_ok:
                    output_grid[r][c] = input_grid[r][c]
    
    return {"input": input_grid, "output": output_grid}


# ---------------------------------------------------------------
# Solver Code
# ---------------------------------------------------------------

def p(input_grid):
    if not input_grid or not input_grid[0]:
        return input_grid
    height = len(input_grid)
    width = len(input_grid[0])
    output = [[0] * width for _ in range(height)]
    for r in range(height):
        for c in range(width):
            if input_grid[r][c] != 0:
                left_ok = (c > 0 and input_grid[r][c-1] == input_grid[r][c])
                right_ok = (c < width - 1 and input_grid[r][c+1] == input_grid[r][c])
                if left_ok or right_ok:
                    output[r][c] = input_grid[r][c]
    return output
